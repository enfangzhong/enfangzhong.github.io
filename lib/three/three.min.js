// threejs.org/license
(function(l,pa){"object"===typeof exports&&"undefined"!==typeof module?pa(exports):"function"===typeof define&&define.amd?define(["exports"],pa):pa(l.THREE=l.THREE||{})})(this,function(l){function pa(){}function D(a,b){this.x=a||0;this.y=b||0}function ea(a,b,c,d,e,f,g,h,m,k){Object.defineProperty(this,"id",{value:Ze++});this.uuid=N.generateUUID();this.name="";this.image=void 0!==a?a:ea.DEFAULT_IMAGE;this.mipmaps=[];this.mapping=void 0!==b?b:ea.DEFAULT_MAPPING;this.wrapS=void 0!==c?c:1001;this.wrapT=
void 0!==d?d:1001;this.magFilter=void 0!==e?e:1006;this.minFilter=void 0!==f?f:1008;this.anisotropy=void 0!==m?m:1;this.format=void 0!==g?g:1023;this.type=void 0!==h?h:1009;this.offset=new D(0,0);this.repeat=new D(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.encoding=void 0!==k?k:3E3;this.version=0;this.onUpdate=null}function fa(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1}function Ya(a,b,c){this.uuid=N.generateUUID();this.width=
a;this.height=b;this.scissor=new fa(0,0,a,b);this.scissorTest=!1;this.viewport=new fa(0,0,a,b);c=c||{};void 0===c.minFilter&&(c.minFilter=1006);this.texture=new ea(void 0,void 0,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding);this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}function Gb(a,b,c){Ya.call(this,a,b,c);this.activeMipMapLevel=
this.activeCubeFace=0}function ca(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1}function q(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function S(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("three.matrix4: the="" constructor="" no="" longer="" reads="" arguments.="" use="" .set()="" instead.")}function="" za(a,b,c,d,e,f,g,h,m,k){a="void" 0!="=a?a:[];ea.call(this,a,void" hb(a,b,c){var="" d="a[0];if(0">=
d||0<d)return 0="==f&&(f=new" 1="" 2="" a;var="" e="b*c,f=Be[e];void" float32array(e),be[e]="f);if(0!==b)for(d.toArray(f,0),d=1,e=0;d!==b;++d)e+=c,a[d].toArray(f,e);return" f}function="" ce(a,b){var="" c="De[b];void" int32array(b),de[b]="c);for(var" d="0;d!==b;++d)c[d]=a.allocTextureUnit();return" c}function="" $e(a,b){a.uniform1f(this.addr,b)}function="" af(a,b){a.uniform1i(this.addr,b)}function="" bf(a,b){void="" cf(a,b){void="" 0!="=b.x?a.uniform3f(this.addr," b.x,b.y,b.z):void="" df(a,b){void="" ef(a,b){a.uniformmatrix2fv(this.addr,!1,b.elements||b)}function="" ff(a,b){a.uniformmatrix3fv(this.addr,!1,b.elements||b)}function="" gf(a,b){a.uniformmatrix4fv(this.addr,!1,b.elements||b)}function="" hf(a,b,c){var="" jf(a,b,c){var="" a.uniform1i(this.addr,d);c.settexturecube(b||fe,d)}function="" ge(a,b){a.uniform2iv(this.addr,b)}function="" he(a,b){a.uniform3iv(this.addr,b)}function="" ie(a,b){a.uniform4iv(this.addr,b)}function="" kf(a){switch(a){case="" 5126:return="" $e;case="" 35664:return="" bf;case="" 35665:return="" cf;case="" 35666:return="" df;case="" 35674:return="" ef;case="" 35675:return="" ff;case="" 35676:return="" gf;case="" 35678:return="" hf;case="" 35680:return="" jf;case="" 5124:case="" 35670:return="" af;case="" 35667:case="" 35671:return="" ge;case="" 35668:case="" 35672:return="" he;case="" 35669:case="" 35673:return="" ie}}="" function="" lf(a,b){a.uniform1fv(this.addr,b)}function="" mf(a,b){a.uniform1iv(this.addr,b)}function="" nf(a,b){a.uniform2fv(this.addr,hb(b,this.size,2))}function="" of(a,b){a.uniform3fv(this.addr,hb(b,this.size,3))}function="" pf(a,b){a.uniform4fv(this.addr,hb(b,this.size,4))}function="" qf(a,b){a.uniformmatrix2fv(this.addr,!1,hb(b,this.size,4))}function="" rf(a,b){a.uniformmatrix3fv(this.addr,!1,hb(b,this.size,9))}function="" sf(a,b){a.uniformmatrix4fv(this.addr,!1,hb(b,this.size,16))}function="" tf(a,b,c){var="" uf(a,b,c){var="" vf(a){switch(a){case="" lf;case="" nf;case="" of;case="" pf;case="" qf;case="" rf;case="" sf;case="" tf;case="" uf;case="" mf;case="" he;="" case="" ie}}function="" wf(a,b,c){this.id="a;this.addr=c;this.setValue=kf(b.type)}function" xf(a,b,c){this.id="a;this.addr=c;this.size=b.size;this.setValue=vf(b.type)}function" je(a){this.id="a;this.seq=[];this.map={}}function" $a(a,b,c){this.seq="[];this.map={};this.renderer=c;c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS);for(var" k="Rd.exec(h),t=Rd.lastIndex,p=" k[1],n="k[3];"]"===k[2]&&(p|=0);if(void" wf(p,e,f):new="" xf(p,e,f);h.seq.push(e);h.map[e.id]="e;break}else" n="g.map[p],void" je(p),p="g,g=n,p.seq.push(g),p.map[g.id]=g),g=n}}}function" j(a,b,c){return="" void="" eb(a,b,c,d,e,f,g,h,m,k,t,p){ea.call(this,null,f,g,h,m,k,d,e,t,p);this.image="{data:a,width:b,height:c};this.magFilter=void" !1;this.unpackalignment="1}function" sc(a,b){this.min="void" d(infinity,infinity);this.max="void" d(-infinity,-infinity)}function="" yf(a,b){var="" c,d,e,f,g,h,m,k,t,p,n="a.context,u=a.state,l,r,A,w,y,K;this.render=function(v,E,L){if(0!==b.length){v=new" q;var="" d(h*c,h),da="new" q(1,1,0),fb="new" d(1,1),sd="new" sc;sd.min.set(l.x,l.y);sd.max.set(l.x+(l.z-16),l.y+(l.w-16));if(void="" h="new" float32array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),q="new" uint16array([0,1,2,0,2,3]);l="n.createBuffer();r=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l);n.bufferData(n.ARRAY_BUFFER,H,n.STATIC_DRAW);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r);n.bufferData(n.ELEMENT_ARRAY_BUFFER,Q,n.STATIC_DRAW);y=n.createTexture();K=n.createTexture();u.bindTexture(n.TEXTURE_2D,y);n.texImage2D(n.TEXTURE_2D,0,n.RGB,16,16,0,n.RGB,n.UNSIGNED_BYTE,null);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);" n.texparameteri(n.texture_2d,n.texture_mag_filter,n.nearest);n.texparameteri(n.texture_2d,n.texture_min_filter,n.nearest);u.bindtexture(n.texture_2d,k);n.teximage2d(n.texture_2d,0,n.rgba,16,16,0,n.rgba,n.unsigned_byte,null);n.texparameteri(n.texture_2d,n.texture_wrap_s,n.clamp_to_edge);n.texparameteri(n.texture_2d,n.texture_wrap_t,n.clamp_to_edge);n.texparameteri(n.texture_2d,n.texture_mag_filter,n.nearest);n.texparameteri(n.texture_2d,n.texture_min_filter,n.nearest);var="" lowp="" int="" rendertype;\nuniform="" vec3="" screenposition;\nuniform="" vec2="" scale;\nuniform="" float="" rotation;\nuniform="" sampler2d="" occlusionmap;\nattribute="" position;\nattribute="" uv;\nvarying="" vuv;\nvarying="" vvisibility;\nvoid="" main()="" {\nvuv="uv;\nvec2" pos="position;\nif" (="" rendertype="=" )="" {\nvec4="" visibility="texture2D(" occlusionmap,="" vec2(="" 0.1,="" 0.1="" );\nvisibility="" +="texture2D(" 0.5,="" 0.9,="" 0.5="" 0.9="" );\nvvisibility="visibility.r" 9.0;\nvvisibility="" *="1.0" -="" visibility.g="" visibility.a="" 9.0;\npos.x="cos(" rotation="" position.x="" sin(="" position.y;\npos.y="sin(" cos(="" position.y;\n}\ngl_position="vec4(" scale="" screenposition.xy="" ).xy,="" screenposition.z,="" 1.0="" );\n}",="" fragmentshader:"uniform="" map;\nuniform="" opacity;\nuniform="" color;\nvarying="" {\nif="" {\ngl_fragcolor="vec4(" 1.0,="" 0.0,="" 0.0="" );\n}="" else="" if="" map,="" vuv="" texture="texture2D(" );\ntexture.a="" vvisibility;\ngl_fragcolor="texture;\ngl_FragColor.rgb" o="n.createShader(n.VERTEX_SHADER),P="precision" "+a.getprecision()+"="" float;\n";n.shadersource(m,p+h.fragmentshader);n.shadersource(o,p+h.vertexshader);n.compileshader(m);n.compileshader(o);n.attachshader(q,m);n.attachshader(q,o);n.linkprogram(q);w="Q;t=n.getAttribLocation(w,"position");p=n.getAttribLocation(w,"uv");c=n.getUniformLocation(w,"renderType");d=n.getUniformLocation(w,"map");e=n.getUniformLocation(w,"occlusionMap");f=n.getUniformLocation(w,"opacity");g=n.getUniformLocation(w,"color");h=n.getUniformLocation(w," "scale");m="n.getUniformLocation(w,"rotation");k=n.getUniformLocation(w,"screenPosition")}n.useProgram(w);u.initAttributes();u.enableAttribute(t);u.enableAttribute(p);u.disableUnusedAttributes();n.uniform1i(e,0);n.uniform1i(d,1);n.bindBuffer(n.ARRAY_BUFFER,l);n.vertexAttribPointer(t,2,n.FLOAT,!1,16,0);n.vertexAttribPointer(p,2,n.FLOAT,!1,16,8);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r);u.disable(n.CULL_FACE);u.setDepthWrite(!1);Q=0;for(M=b.length;Q<M;Q++)if(H=16/L.w,aa.set(H*C,H),O=b[Q],v.set(O.matrixWorld.elements[12]," o.matrixworld.elements[13],o.matrixworld.elements[14]),v.applymatrix4(e.matrixworldinverse),v.applymatrix4(e.projectionmatrix),da.copy(v),fb.x="L.x+Da.x*F+F-8,fb.y=L.y+Da.y*da+da-8,!0===Sd.containsPoint(fb)){u.activeTexture(n.TEXTURE0);u.bindTexture(n.TEXTURE_2D,null);u.activeTexture(n.TEXTURE1);u.bindTexture(n.TEXTURE_2D,y);n.copyTexImage2D(n.TEXTURE_2D,0,n.RGB,fb.x,fb.y,16,16,0);n.uniform1i(c,0);n.uniform2f(h,aa.x,aa.y);n.uniform3f(k,Da.x,Da.y,Da.z);u.disable(n.BLEND);u.enable(n.DEPTH_TEST);n.drawElements(n.TRIANGLES," 6,n.unsigned_short,0);u.activetexture(n.texture0);u.bindtexture(n.texture_2d,k);n.copyteximage2d(n.texture_2d,0,n.rgba,fb.x,fb.y,16,16,0);n.uniform1i(c,1);u.disable(n.depth_test);u.activetexture(n.texture1);u.bindtexture(n.texture_2d,y);n.drawelements(n.triangles,6,n.unsigned_short,0);o.positionscreen.copy(da);o.customupdatecallback?o.customupdatecallback(o):o.updatelensflares();n.uniform1i(c,2);u.enable(n.blend);for(var="" p="0,wa=O.lensFlares.length;P<wa;P++){var" w="O.lensFlares[P];.001<W.opacity&&.001<" w.scale&&(da.x="W.x,Da.y=W.y,Da.z=W.z,H=W.size*W.scale/L.w,aa.x=H*C,aa.y=H,n.uniform3f(k,Da.x,Da.y,Da.z),n.uniform2f(h,aa.x,aa.y),n.uniform1f(m,W.rotation),n.uniform1f(f,W.opacity),n.uniform3f(g,W.color.r,W.color.g,W.color.b),u.setBlending(W.blending,W.blendEquation,W.blendSrc,W.blendDst),a.setTexture2D(W.texture,1),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}}u.enable(n.CULL_FACE);u.enable(n.DEPTH_TEST);u.setDepthWrite(!0);a.resetGLState()}}}function" zf(a,b){var="" c,d,e,f,g,h,m,k,t,p,n,u,l,r,="" a,w,y;function="" k(a,b){return="" a.renderorder!="=b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:b.id-a.id}var" v="a.context,E=a.state,L,C,F,da,H=new" q,aa="new" ca,da="new" q;this.render="function(q,D){if(0!==b.length){if(void" q="new" float32array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),m="new" m,v.static_draw);var="" float;","uniform="" mat4="" modelviewmatrix;\nuniform="" projectionmatrix;\nuniform="" uvoffset;\nuniform="" uvscale;\nattribute="" vuv;\nvoid="" uv="" uvscale;\nvec2="" alignedposition="position" scale;\nvec2="" rotatedposition;\nrotatedposition.x="cos(" alignedposition.x="" alignedposition.y;\nrotatedposition.y="sin(" alignedposition.y;\nvec4="" finalposition;\nfinalposition="modelViewMatrix" vec4(="" );\nfinalposition.xy="" =="" projectionmatrix="" finalposition;\ngl_position="finalPosition;\n}"].join("\n"));" v.shadersource(o,["precision="" color;\nuniform="" fogtype;\nuniform="" fogcolor;\nuniform="" fogdensity;\nuniform="" fognear;\nuniform="" fogfar;\nuniform="" alphatest;\nvarying="" );\nif="" texture.a="" <="" alphatest="" discard;\ngl_fragcolor="vec4(" color="" texture.xyz,="" opacity="" fogtype=""> 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}"].join("\n"));
v.compileShader(M);v.compileShader(O);v.attachShader(Q,M);v.attachShader(Q,O);v.linkProgram(Q);F=Q;w=v.getAttribLocation(F,"position");y=v.getAttribLocation(F,"uv");c=v.getUniformLocation(F,"uvOffset");d=v.getUniformLocation(F,"uvScale");e=v.getUniformLocation(F,"rotation");f=v.getUniformLocation(F,"scale");g=v.getUniformLocation(F,"color");h=v.getUniformLocation(F,"map");m=v.getUniformLocation(F,"opacity");k=v.getUniformLocation(F,"modelViewMatrix");t=v.getUniformLocation(F,"projectionMatrix");p=
v.getUniformLocation(F,"fogType");n=v.getUniformLocation(F,"fogDensity");u=v.getUniformLocation(F,"fogNear");l=v.getUniformLocation(F,"fogFar");r=v.getUniformLocation(F,"fogColor");A=v.getUniformLocation(F,"alphaTest");Q=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Q.width=8;Q.height=8;M=Q.getContext("2d");M.fillStyle="white";M.fillRect(0,0,8,8);da=new ea(Q);da.needsUpdate=!0}v.useProgram(F);E.initAttributes();E.enableAttribute(w);E.enableAttribute(y);E.disableUnusedAttributes();
E.disable(v.CULL_FACE);E.enable(v.BLEND);v.bindBuffer(v.ARRAY_BUFFER,L);v.vertexAttribPointer(w,2,v.FLOAT,!1,16,0);v.vertexAttribPointer(y,2,v.FLOAT,!1,16,8);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,C);v.uniformMatrix4fv(t,!1,D.projectionMatrix.elements);E.activeTexture(v.TEXTURE0);v.uniform1i(h,0);M=Q=0;(O=q.fog)?(v.uniform3f(r,O.color.r,O.color.g,O.color.b),O.isFog?(v.uniform1f(u,O.near),v.uniform1f(l,O.far),v.uniform1i(p,1),M=Q=1):O.isFogExp2&&(v.uniform1f(n,O.density),v.uniform1i(p,2),M=Q=2)):(v.uniform1i(p,
0),M=Q=0);for(var O=0,P=b.length;O<p;o++){var 0="==b&&(b={},y[f]=b),f=b[h],void" wa="b[O];wa.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,wa.matrixWorld);wa.z=-wa.modelViewMatrix.elements[14]}b.sort(K);for(var" w="[],O=0,P=b.length;O<P;O++){var" v.uniform2f(d,x.map.repeat.x,x.map.repeat.y)):(v.uniform2f(c,0,0),v.uniform2f(d,1,1)),v.uniform1f(m,x.opacity),v.uniform3f(g,x.color.r,x.color.g,x.color.b),v.uniform1f(e,x.rotation),v.uniform2fv(f,w),e.setblending(x.blending,x.blendequation,x.blendsrc,x.blenddst),e.setdepthtest(x.depthtest),e.setdepthwrite(x.depthwrite),x.map?a.settexture2d(x.map,0):a.settexture2d(da,0),v.drawelements(v.triangles,6,v.unsigned_short,0))}e.enable(v.cull_face);a.resetglstate()}}}function="" x(){object.defineproperty(this,="" "id",{value:af++});this.uuid="N.generateUUID();this.name="";this.type="Material";this.lights=this.fog=!0;this.blending=1;this.side=0;this.shading=2;this.vertexColors=0;this.opacity=1;this.transparent=!1;this.blendSrc=204;this.blendDst=205;this.blendEquation=100;this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null;this.depthFunc=3;this.depthWrite=this.depthTest=!0;this.clippingPlanes=null;this.clipShadows=this.clipIntersection=!1;this.colorWrite=!0;this.precision=null;this.polygonOffset=" !1;this.alphatest="this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.premultipliedAlpha=!1;this.overdraw=0;this._needsUpdate=this.visible=!0}function" ha(a){x.call(this);this.type="ShaderMaterial" ;this.defines="{};this.uniforms={};this.vertexShader="void" main()="" {\n\tgl_position="projectionMatrix" *="" modelviewmatrix="" vec4(="" position,="" 1.0="" );\n}";this.fragmentshader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}" ;this.linewidth="1;this.wireframe=!1;this.wireframeLinewidth=1;this.morphNormals=" this.morphtargets="this.skinning=this.clipping=this.lights=this.fog=!1;this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]};this.index0AttributeName=void" 0;void="" 0!="=a&&(void" attributes="" should="" now="" be="" defined="" in="" three.buffergeometry="" instead."),this.setvalues(a))}function="" ab(a){x.call(this);this.type="MeshDepthMaterial" ;this.depthpacking="3200;this.morphTargets=" this.skinning="!1;this.displacementMap=this.alphaMap=this.map=null;this.displacementScale=1;this.displacementBias=0;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.setValues(a)}function" pa(a,b){this.min="void" q(infinity,infinity,infinity);this.max="void" q(-infinity,-infinity,-infinity)}function="" na(a,b){this.center="void" q;this.radius="void" ya(){this.elements="new" float32array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("three.matrix3:="" the="" constructor="" no="" longer="" reads="" arguments.="" use="" .set()="" instead.")}="" function="" la(a,b){this.normal="void" q(1,0,0);this.constant="void" tc(a,b,c,d,e,f){this.planes="[void" la,void="" la]}function="" ke(a,b,c,d){function="" e(b,c,d,e){var="" f="b.geometry,g;g=A;var" h="b.customDepthMaterial;d&&(g=w,h=b.customDistanceMaterial);h?g=h:(h=!1,c.morphTargets&&(f&&f.isBufferGeometry?h=f.morphAttributes&&f.morphAttributes.position&&0<f.morphAttributes.position.length:" f&&f.isgeometry&&(h="f.morphTargets&&0<f.morphTargets.length)),b=b.isSkinnedMesh&&c.skinning,f=0,h&&(f|=1),b&&(f|=2),g=g[f]);a.localClippingEnabled&&!0===c.clipShadows&&0!==c.clippingPlanes.length&&(f=g.uuid,h=c.uuid,b=y[f],void" c.wireframelinewidth;g.linewidth="c.linewidth;d&&void" g}function="" f(a,b,c){if(!1!="=a.visible){0!==(a.layers.mask&b.layers.mask)&&(a.isMesh||a.isLine||a.isPoints)&&a.castShadow&&(!1===a.frustumCulled||!0===m.intersectsObject(a))&&!0===a.material.visible&&(a.modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,a.matrixWorld),r.push(a));a=a.children;for(var" d="0,e=a.length;d<e;d++)f(a[d],b,c)}}var" g="a.context,h=a.state,m=new" tc,k="new" s,="" t="b.shadows,p=new" d,n="new" d(d.maxtexturesize,d.maxtexturesize),u="new" q,l="new" q,r="[],A=Array(4),w=Array(4),y={},K=[new" q(1,0,0),new="" q(-1,0,0),new="" q(0,0,1),new="" q(0,0,-1),new="" q(0,1,0),new="" q(0,-1,0)],v="[new" q(0,0,-1)],e="[new" fa,new="" fa];b="new" ab;b.depthpacking="3201;b.clipping=!0;d=bb.distanceRGBA;for(var" l="Ja.clone(d.uniforms),C=0;4!==C;++C){var" da;a[c]="H;F=new" ha({defines:{use_shadowmap:""},uniforms:l,vertexshader:d.vertexshader,fragmentshader:d.fragmentshader,morphtargets:f,skinning:da,clipping:!0});w[c]="F}var" aa="this;this.enabled=!1;this.autoUpdate=!0;this.needsUpdate=!1;this.type=1;this.renderSingleSided=this.renderReverseSided=!0;this.render=function(b,d){if(!1!==aa.enabled&&(!1!==aa.autoUpdate||!1!==aa.needsUpdate)&&0!==t.length){h.buffers.color.setClear(1,1,1,1);h.disable(g.BLEND);h.setDepthTest(!0);h.setScissorTest(!1);for(var" y,="" q,a="0,C=t.length;A<C;A++){var" shadow.");else{var="" y="1,q=!1;null===L.map&&(L.map=new" ya(p.x,p.y,{minfilter:1003,magfilter:1003,format:1023}),f.updateprojectionmatrix());l.isspotlightshadow&&l.update(w);="" l&&l.isrectarealightshadow&&l.update(w);h="L.map;L=L.matrix;l.setFromMatrixPosition(w.matrixWorld);F.position.copy(l);a.setRenderTarget(H);a.clear();for(H=0;H<y;H++){q?(u.copy(F.position),u.add(K[H]),F.up.copy(v[H]),F.lookAt(u),h.viewport(E[H])):(u.setFromMatrixPosition(w.target.matrixWorld),F.lookAt(u));F.updateMatrixWorld();F.matrixWorldInverse.getInverse(F.matrixWorld);L.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);L.multiply(F.projectionMatrix);L.multiply(F.matrixWorldInverse);k.multiplyMatrices(F.projectionMatrix," f.matrixworldinverse);m.setfrommatrix(k);r.length="0;f(b,d,F);for(var" da="0,x=r.length;da<x;da++){var" le="Td.groups,Sa=Sa.materials,z=0,Ea=Le.length;z<Ea;z++){var" i="Le[z],J=Sa[I.materialIndex];!0===J.visible&&(J=e(D,J,q,l),a.renderBufferDirect(F,null,Td,J,D,I))}else" j="e(D,Sa,q,l),a.renderBufferDirect(F,null,Td,J,D,null)}}}}y=a.getClearColor();q=a.getClearAlpha();a.setClearColor(y,q);aa.needsUpdate=!1}}}function" cb(a,b){this.origin="void" q;this.direction="void" q}function="" db(a,b,c,d){this._x="a||0;this._y=b||0;this._z=c||0;this._order=d||db.DefaultOrder}function" nd(){this.mask="1}function" x(){object.defineproperty(this,"id",{value:bf++});this.uuid="N.generateUUID();this.name="";this.type="Object3D";this.parent=null;this.children=[];this.up=x.DefaultUp.clone();var" a="new" q,b="new" db,c="new" ca,d="new" q(1,1,1);b.onchange(function(){c.setfromeuler(b,!1)});c.onchange(function(){b.setfromquaternion(c,void="" 0,!1)});object.defineproperties(this,="" {position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:b},quaternion:{enumerable:!0,value:c},scale:{enumerable:!0,value:d},modelviewmatrix:{value:new="" s},normalmatrix:{value:new="" ya}});this.matrix="new" s;this.matrixworld="new" s;this.matrixautoupdate="x.DefaultMatrixAutoUpdate;this.matrixWorldNeedsUpdate=!1;this.layers=new" nd;this.visible="!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.renderOrder=0;this.userData={};this.onBeforeRender=function(){};this.onAfterRender=function(){}}" hb(a,b){this.start="void" q;this.end="void" za(a,b,c){this.a="void" q;this.b="void" q;this.c="void" ha(a,b,c,d,e,f){this.a="a;this.b=b;this.c=c;this.normal=d&&d.isVector3?d:new" q;this.vertexnormals="Array.isArray(d)?d:[];this.color=e&&e.isColor?e:new" j;this.vertexcolors="Array.isArray(e)?e:[];this.materialIndex=void" ka(a){x.call(this);this.type="MeshBasicMaterial" ;this.color="new" j(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.envMap=this.alphaMap=this.specularMap=null;this.combine=0;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.lights=this.morphTargets=this.skinning=!1;this.setValues(a)}function" u(a,b,c){if(array.isarray(a))throw="" new="" typeerror("three.bufferattribute:="" array="" typed="" array.");this.uuid="N.generateUUID();this.array=a;" this.itemsize="b;this.count=void" uc(a,b){u.call(this,new="" int8array(a),b)}function="" vc(a,b){u.call(this,new="" uint8array(a),b)}function="" wc(a,b){u.call(this,new="" uint8clampedarray(a),b)}function="" xc(a,b){u.call(this,new="" int16array(a),b)}function="" ib(a,b){u.call(this,new="" uint16array(a),b)}function="" yc(a,b){u.call(this,new="" int32array(a),b)}function="" jb(a,b){u.call(this,="" uint32array(a),b)}function="" z(a,b){u.call(this,new="" float32array(a),b)}function="" zc(a,b){u.call(this,new="" float64array(a),b)}function="" me(){this.indices="[];this.vertices=[];this.normals=[];this.colors=[];this.uvs=[];this.uvs2=[];this.groups=[];this.morphTargets={};this.skinWeights=[];this.skinIndices=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function" ud(a){for(var="" b="a.length,c=-Infinity;b--;)a[b]">
c&&(c=a[b]);return c}function T(){Object.defineProperty(this,"id",{value:Vd++});this.uuid=N.generateUUID();this.name="";this.type="Geometry";this.vertices=[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=
!1}function I(){Object.defineProperty(this,"id",{value:Vd++});this.uuid=N.generateUUID();this.name="";this.type="BufferGeometry";this.index=null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.drawRange={start:0,count:Infinity}}function Aa(a,b){x.call(this);this.type="Mesh";this.geometry=void 0!==a?a:new I;this.material=void 0!==b?b:new Ka({color:16777215*Math.random()});this.drawMode=0;this.updateMorphTargets()}function Ib(a,b,c,d,e,f){T.call(this);
this.type="BoxGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};this.fromBufferGeometry(new kb(a,b,c,d,e,f));this.mergeVertices()}function kb(a,b,c,d,e,f){function g(a,b,c,d,e,f,g,l,L,C,F){var da=f/L,H=g/C,aa=f/2,x=g/2,D=l/2;g=L+1;var z=C+1,Q=f=0,M,O,P=new q;for(O=0;O<z;o++){var j="O*H-x;for(M=0;M<g;M++)P[a]=(M*da-aa)*d,P[b]=J*e,P[c]=D,k.push(P.x,P.y,P.z),P[a]=0,P[b]=0,P[c]=0<l?1:-1,t.push(P.x,P.y,P.z),p.push(M/L),p.push(1-O/C),f+=1}for(O=0;O<C;O++)for(M=" 0;m<l;m++)a="n+M+g*(O+1),b=n+(M+1)+g*(O+1),c=n+(M+1)+g*O,m.push(n+M+g*O,a,c),m.push(a,b,c),Q+=6;h.addGroup(u,Q,F);u+=Q;n+=f}I.call(this);this.type="BoxBufferGeometry";this.parameters={width:a,height:b,depth:c,widthSegments:d,heightSegments:e,depthSegments:f};var" h="this;d=Math.floor(d)||1;e=Math.floor(e)||1;f=Math.floor(f)||1;var" m="[],k=[],t=[],p=[],n=0,u=0;g("z","y","x",-1,-1,c,b,a,f,e,0);g("z","y","x",1,-1,c,b,-a,f,e,1);g("x","z","y",1,1,a,c,b,d,f,2);g("x","z","y",1,-1,a,c,-b,d,f,3);g("x","y","z"," 1,-1,a,b,c,d,e,4);g("x","y","z",-1,-1,a,b,-c,d,e,5);this.setindex(m);this.addattribute("position",new="" z(k,3));this.addattribute("normal",new="" z(t,3));this.addattribute("uv",new="" z(p,2))}function="" ac(a,b,c,d){t.call(this);this.type="PlaneGeometry" ;this.parameters="{width:a,height:b,widthSegments:c,heightSegments:d};this.fromBufferGeometry(new" lb(a,b,c,d))}function="" lb(a,b,c,d){i.call(this);this.type="PlaneBufferGeometry" e="a/2,f=b/" 2;c="Math.floor(c)||1;d=Math.floor(d)||1;var" g="c+1,h=d+1,m=a/c,k=b/d,t=[],p=[],n=[],u=[];for(a=0;a<h;a++){var" l="a*k-f;for(b=0;b<g;b++)p.push(b*m-e,-l,0),n.push(0,0,1),u.push(b/c),u.push(1-a/d)}for(a=0;a<d;a++)for(b=0;b<c;b++)e=b+g*(a+1),f=b+1+g*(a+1),h=b+1+g*a,t.push(b+g*a,e,h),t.push(e,f,h);this.setIndex(t);this.addAttribute("position",new" z(p,3));this.addattribute("normal",new="" z(n,3));this.addattribute("uv",new="" z(u,2))}function="" ra(){x.call(this);this.type="Camera" ;this.matrixworldinverse="new" s;this.projectionmatrix="new" s}function="" fa(a,b,c,d){ra.call(this);this.type="PerspectiveCamera" ;this.fov="void" 0!="=a?a:50;this.zoom=1;this.near=void" jb(a,b,c,d,e,f){ra.call(this);this.type="OrthographicCamera" ;this.zoom="1;this.view=null;this.left=a;this.right=b;this.top=c;this.bottom=d;this.near=void" function="" cf(a,b,c){var="" d,e,f;return{setmode:function(a){d="a},setIndex:function(c){c.array" instanceof="" uint32array&&b.get("oes_element_index_uint")?(e="a.UNSIGNED_INT,f=4):c.array" uint16array?(e="a.UNSIGNED_SHORT,f=2):(e=a.UNSIGNED_BYTE,f=1)},render:function(b,h){a.drawElements(d,h,e,b*f);c.calls++;c.vertices+=h;d===a.TRIANGLES&&(c.faces+=h/3)},renderInstances:function(g,h,m){var" k="b.get("ANGLE_instanced_arrays");null===k?console.error("THREE.WebGLBufferRenderer:" using="" three.instancedbuffergeometry="" but="" hardware="" does="" not="" support="" extension="" angle_instanced_arrays."):="" (k.drawelementsinstancedangle(d,m,e,h*f,g.maxinstancedcount),c.calls++,c.vertices+="m*g.maxInstancedCount,d===a.TRIANGLES&&(c.faces+=g.maxInstancedCount*m/3))}}}function" df(a,b,c){var="" d;return{setmode:function(a){d="a},render:function(b,f){a.drawArrays(d,b,f);c.calls++;c.vertices+=f;d===a.TRIANGLES&&(c.faces+=f/3)},renderInstances:function(e){var" f="b.get("ANGLE_instanced_arrays");if(null===f)console.error("THREE.WebGLBufferRenderer:" angle_instanced_arrays.");="" else{var="" ef(){var="" a="{};return{get:function(b){if(void" a[b.id];var="" c;switch(b.type){case="" "directionallight":c="{direction:new" q,color:new="" j,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" d};break;case="" "spotlight":c="{position:new" q,direction:new="" q,="" color:new="" j,distance:0,conecos:0,penumbracos:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" "pointlight":c="{position:new" j,distance:0,decay:0,shadow:!1,shadowbias:0,shadowradius:1,shadowmapsize:new="" "hemispherelight":c="{direction:new" q,skycolor:new="" j,groundcolor:new="" j};break;case="" "rectarealight":c="{color:new" j,position:new="" q,halfwidth:new="" q,halfheight:new="" q}}return="" a[b.id]="c}}}function" ff(a){a="a.split("\n");for(var" b="0;b<a.length;b++)a[b]=" b+1+":="" "+a[b];return="" a.join("\n")}function="" ne(a,b,c){var="" d="a.createShader(b);a.shaderSource(d,c);a.compileShader(d);!1===a.getShaderParameter(d,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader:" shader="" couldn't="" compile.");""!="=a.getShaderInfoLog(d)&&console.warn("THREE.WebGLShader:" gl.getshaderinfolog()",b="==a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(d),Ff(c));return" d}function="" oe(a){switch(a){case="" 3e3:return["linear","(="" value="" )"];case="" 3001:return["srgb","(="" 3002:return["rgbe",="" "(="" 3004:return["rgbm","(="" value,="" 7.0="" 3005:return["rgbm","(="" 16.0="" 3006:return["rgbd","(="" 256.0="" 3007:return["gamma","(="" float(="" gamma_factor="" )="" )"];default:throw="" error("unsupported="" encoding:="" "+a);}}function="" wd(a,b){var="" c="Oe(b);return"vec4" "+a+"(="" vec4="" {="" return="" "+c[0]+"tolinear"+c[1]+";="" }"}function="" gf(a,b){var="" linearto"+c[0]+c[1]+";="" hf(a,b){var="" c;switch(b){case="" 1:c="Linear" ;break;="" case="" 2:c="Reinhard" ;break;case="" 3:c="Uncharted2" 4:c="OptimizedCineon" ;break;default:throw="" tonemapping:="" "+b);}return"vec3="" vec3="" color="" "+c+"tonemapping(="" );="" if(a,b,c){a="a||{};return[a.derivatives||b.envMapCubeUV||b.bumpMap||b.normalMap||b.flatShading?"#extension" gl_oes_standard_derivatives="" :="" enable":"",(a.fragdepth||b.logarithmicdepthbuffer)&&c.get("ext_frag_depth")?"#extension="" gl_ext_frag_depth="" enable":"",a.drawbuffers&&c.get("webgl_draw_buffers")?="" "#extension="" gl_ext_draw_buffers="" require":"",(a.shadertexturelod||b.envmap)&&c.get("ext_shader_texture_lod")?"#extension="" gl_ext_shader_texture_lod="" enable":""].filter(bc).join("\n")}function="" jf(a){var="" in="" a){var="" "+c+"="" "+d)}return="" b.join("\n")}function="" bc(a){return""!="=a}function" pe(a,b){return="" a.replace(="" num_dir_lights="" g,b.numdirlights).replace(="" num_spot_lights="" g,b.numspotlights).replace(="" num_rect_area_lights="" g,b.numrectarealights).replace(="" num_point_lights="" g,="" b.numpointlights).replace(="" num_hemi_lights="" g,b.numhemilights)}function="" xd(a){return="" #include="" +<([\w\d.]+)="">/g,function(a,c){var d=Z[c];if(void 0===d)throw Error("Can not resolve #include <"+c+">");return Xd(d)})}function Qe(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(a,c,d,e){a="";for(c=parseInt(c);c<parseint(d);c++)a+=e.replace( 0="==q&&(q=new" \[="" i="" \]="" g,"[="" "+c+"="" ]");return="" a})}function="" kf(a,b,c,d){var="" e="a.context,f=c.extensions,g=c.defines,h=c.__webglShader.vertexShader," m="c.__webglShader.fragmentShader,k="SHADOWMAP_TYPE_BASIC";1===d.shadowMapType?k="SHADOWMAP_TYPE_PCF":2===d.shadowMapType&&(k="SHADOWMAP_TYPE_PCF_SOFT");var" t="ENVMAP_TYPE_CUBE" ,p="ENVMAP_MODE_REFLECTION" ,n="ENVMAP_BLENDING_MULTIPLY" ;if(d.envmap){switch(c.envmap.mapping){case="" 301:case="" 302:t="ENVMAP_TYPE_CUBE" ;break;case="" 306:case="" 307:t="ENVMAP_TYPE_CUBE_UV" 303:case="" 304:t="ENVMAP_TYPE_EQUIREC" 305:t="ENVMAP_TYPE_SPHERE" }switch(c.envmap.mapping){case="" 302:case="" 304:p="ENVMAP_MODE_REFRACTION" }switch(c.combine){case="" 0:n="ENVMAP_BLENDING_MULTIPLY" 1:n="ENVMAP_BLENDING_MIX" 2:n="ENVMAP_BLENDING_ADD" }}var="" u="0<a.gammaFactor?a.gammaFactor:1,f=If(f,d,a.extensions),l=Jf(g),r=e.createProgram();c.isRawShaderMaterial?(g=[l,"\n"].filter(Bc).join("\n"),k=[f,l,"\n"].filter(Bc).join("\n")):(g=["precision" "+d.precision+"="" float;","precision="" int;","#define="" shader_name="" "+c.__webglshader.name,l,d.supportsvertextextures?"#define="" vertex_textures":"","#define="" gamma_factor="" "+u,"#define="" max_bones="" "+="" d.maxbones,d.usefog&&d.fog?"#define="" use_fog":"",d.usefog&&d.fogexp?"#define="" fog_exp2":"",d.map?"#define="" use_map":"",d.envmap?"#define="" use_envmap":"",d.envmap?"#define="" "+p:"",d.lightmap?"#define="" use_lightmap":"",d.aomap?"#define="" use_aomap":"",d.emissivemap?"#define="" use_emissivemap":"",d.bumpmap?"#define="" use_bumpmap":"",d.normalmap?"#define="" use_normalmap":"",d.displacementmap&&d.supportsvertextextures?"#define="" use_displacementmap":"",d.specularmap?"#define="" use_specularmap":"",d.roughnessmap?"#define="" use_roughnessmap":="" "",d.metalnessmap?"#define="" use_metalnessmap":"",d.alphamap?"#define="" use_alphamap":"",d.vertexcolors?"#define="" use_color":"",d.flatshading?"#define="" flat_shaded":"",d.skinning?"#define="" use_skinning":"",d.usevertextexture?"#define="" bone_texture":"",d.morphtargets?"#define="" use_morphtargets":"",d.morphnormals&&!1="==d.flatShading?"#define" use_morphnormals":"",d.doublesided?"#define="" double_sided":"",d.flipsided?"#define="" flip_sided":"","#define="" num_clipping_planes="" "+d.numclippingplanes,d.shadowmapenabled?"#define="" use_shadowmap":="" "",d.shadowmapenabled?"#define="" "+k:"",d.sizeattenuation?"#define="" use_sizeattenuation":"",d.logarithmicdepthbuffer?"#define="" use_logdepthbuf":"",d.logarithmicdepthbuffer&&a.extensions.get("ext_frag_depth")?"#define="" use_logdepthbuf_ext":"","uniform="" mat4="" modelmatrix;","uniform="" modelviewmatrix;","uniform="" projectionmatrix;","uniform="" viewmatrix;","uniform="" mat3="" normalmatrix;","uniform="" vec3="" cameraposition;","attribute="" position;","attribute="" normal;","attribute="" vec2="" uv;","#ifdef="" use_color",="" "\tattribute="" color;","#endif","#ifdef="" use_morphtargets","\tattribute="" morphtarget0;","\tattribute="" morphtarget1;","\tattribute="" morphtarget2;","\tattribute="" morphtarget3;","\t#ifdef="" use_morphnormals","\t\tattribute="" morphnormal0;","\t\tattribute="" morphnormal1;","\t\tattribute="" morphnormal2;","\t\tattribute="" morphnormal3;","\t#else","\t\tattribute="" morphtarget4;","\t\tattribute="" morphtarget5;","\t\tattribute="" morphtarget6;","\t\tattribute="" morphtarget7;",="" "\t#endif","#endif","#ifdef="" use_skinning","\tattribute="" vec4="" skinindex;","\tattribute="" skinweight;","#endif","\n"].filter(bc).join("\n"),k="[f,"precision" "+c.__webglshader.name,l,d.alphatest?"#define="" alphatest="" "+d.alphatest:"","#define="" "+u,d.usefog&&d.fog?"#define="" "+t:"",d.envmap?="" "#define="" "+p:"",d.envmap?"#define="" "+n:"",d.lightmap?"#define="" use_normalmap":"",d.specularmap?"#define="" use_roughnessmap":"",d.metalnessmap?"#define="" use_color":"",d.gradientmap?"#define="" use_gradientmap":"",d.flatshading?"#define="" flat_shaded":="" "",d.doublesided?"#define="" "+d.numclippingplanes,"#define="" union_clipping_planes="" "+(d.numclippingplanes-d.numclipintersection),d.shadowmapenabled?"#define="" use_shadowmap":"",d.shadowmapenabled?"#define="" "+k:"",d.premultipliedalpha?"#define="" premultiplied_alpha":"",d.physicallycorrectlights?"#define="" physically_correct_lights":"",d.logarithmicdepthbuffer?"#define="" use_logdepthbuf":"",d.logarithmicdepthbuffer&&a.extensions.get("ext_frag_depth")?="" use_logdepthbuf_ext":"",d.envmap&&a.extensions.get("ext_shader_texture_lod")?"#define="" texture_lod_ext":"","uniform="" cameraposition;",0!="=d.toneMapping?"#define" tone_mapping":"",0!="=d.toneMapping?Z.tonemapping_pars_fragment:"",0!==d.toneMapping?Hf("toneMapping",d.toneMapping):"",d.outputEncoding||d.mapEncoding||d.envMapEncoding||d.emissiveMapEncoding?Z.encodings_pars_fragment:"",d.mapEncoding?Wd("mapTexelToLinear",d.mapEncoding):"",d.envMapEncoding?Wd("envMapTexelToLinear"," d.envmapencoding):"",d.emissivemapencoding?wd("emissivemaptexeltolinear",d.emissivemapencoding):"",d.outputencoding?gf("lineartooutputtexel",d.outputencoding):"",d.depthpacking?"#define="" depth_packing="" "+c.depthpacking:"","\n"].filter(bc).join("\n"));h="Xd(h,d);h=Pe(h,d);m=Xd(m,d);m=Pe(m,d);c.isShaderMaterial||(h=Qe(h),m=Qe(m));m=k+m;h=Ne(e,e.VERTEX_SHADER,g+h);m=Ne(e,e.FRAGMENT_SHADER,m);e.attachShader(r,h);e.attachShader(r,m);void" 0!="=c.index0AttributeName?e.bindAttribLocation(r,0,c.index0AttributeName):" !0="==d.morphTargets&&e.bindAttribLocation(r,0,"position");e.linkProgram(r);d=e.getProgramInfoLog(r);t=e.getShaderInfoLog(h);p=e.getShaderInfoLog(m);u=n=!0;if(!1===e.getProgramParameter(r,e.LINK_STATUS))n=!1,console.error("THREE.WebGLProgram:" shader="" error:="" ",e.geterror(),"gl.validate_status",e.getprogramparameter(r,e.validate_status),"gl.getprograminfolog",d,t,p);else="" if(""!="=d)console.warn("THREE.WebGLProgram:" gl.getprograminfolog()",d);else="" if(""="==t||""===p)u=!1;u&&(this.diagnostics={runnable:n," material:c,programlog:d,vertexshader:{log:t,prefix:g},fragmentshader:{log:p,prefix:k}});e.deleteshader(h);e.deleteshader(m);var="" q;this.getuniforms="function(){void" $a(e,r,a));return="" q};var="" w;this.getattributes="function(){if(void" a="{},b=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),c=0;c<b;c++){var" d="e.getActiveAttrib(r,c).name;a[d]=e.getAttribLocation(r,d)}w=a}return" w};this.destroy="function(){e.deleteProgram(r);this.program=void" 0};object.defineproperties(this,{uniforms:{get:function(){console.warn("three.webglprogram:="" .uniforms="" is="" now="" .getuniforms().");="" return="" this.getuniforms()}},attributes:{get:function(){console.warn("three.webglprogram:="" .attributes="" .getattributes().");return="" this.getattributes()}}});this.id="Lf++;this.code=b;this.usedTimes=1;this.program=r;this.vertexShader=h;this.fragmentShader=m;return" this}function="" mf(a,b){function="" c(a,b){var="" c;a?a.istexture?c="a.encoding:a.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap:" don't="" use="" render="" targets="" as="" textures.="" their="" .texture="" property="" instead."),c="a.texture.encoding):c=3E3;3E3===c&&b&&(c=3007);return" c}var="" supportsvertextextures="" map="" mapencoding="" envmap="" envmapmode="" envmapencoding="" lightmap="" aomap="" emissivemap="" emissivemapencoding="" bumpmap="" normalmap="" displacementmap="" specularmap="" roughnessmap="" metalnessmap="" gradientmap="" alphamap="" combine="" vertexcolors="" fog="" usefog="" fogexp="" flatshading="" sizeattenuation="" logarithmicdepthbuffer="" skinning="" maxbones="" usevertextexture="" morphtargets="" morphnormals="" maxmorphtargets="" maxmorphnormals="" premultipliedalpha="" numdirlights="" numpointlights="" numspotlights="" numhemilights="" numrectarealights="" shadowmapenabled="" shadowmaptype="" tonemapping="" physicallycorrectlights="" doublesided="" flipsided="" numclippingplanes="" numclipintersection="" depthpacking".split("="" ");="" this.getparameters="function(d,f,m,k,t,p){var" n="e[d.type],u;b.floatVertexTextures&&p&&p.skeleton&&p.skeleton.useVertexTexture?u=1024:(u=Math.floor((b.maxVertexUniforms-20)/4),void" too="" many="" bones="" -="" "+p.skeleton.bones.length+",="" this="" gpu="" supports="" just="" "+u+"="" (try="" opengl="" instead="" of="" angle)")));var="" l="a.getPrecision();null!==d.precision&&(l=b.getMaxPrecision(d.precision),l!==d.precision&&" console.warn("three.webglprogram.getparameters:",d.precision,"not="" supported,="" using",l,"instead."));var="" r="a.getCurrentRenderTarget();return{shaderID:n,precision:l,supportsVertexTextures:b.vertexTextures,outputEncoding:c(r?r.texture:null,a.gammaOutput),map:!!d.map,mapEncoding:c(d.map,a.gammaInput),envMap:!!d.envMap,envMapMode:d.envMap&&d.envMap.mapping,envMapEncoding:c(d.envMap,a.gammaInput),envMapCubeUV:!!d.envMap&&(306===d.envMap.mapping||307===d.envMap.mapping),lightMap:!!d.lightMap,aoMap:!!d.aoMap," emissivemap:!!d.emissivemap,emissivemapencoding:c(d.emissivemap,a.gammainput),bumpmap:!!d.bumpmap,normalmap:!!d.normalmap,displacementmap:!!d.displacementmap,roughnessmap:!!d.roughnessmap,metalnessmap:!!d.metalnessmap,specularmap:!!d.specularmap,alphamap:!!d.alphamap,gradientmap:!!d.gradientmap,combine:d.combine,vertexcolors:d.vertexcolors,fog:!!m,usefog:d.fog,fogexp:m&&m.isfogexp2,flatshading:1="==d.shading,sizeAttenuation:d.sizeAttenuation,logarithmicDepthBuffer:b.logarithmicDepthBuffer,skinning:d.skinning," maxbones:u,usevertextexture:b.floatvertextextures&&p&&p.skeleton&&p.skeleton.usevertextexture,morphtargets:d.morphtargets,morphnormals:d.morphnormals,maxmorphtargets:a.maxmorphtargets,maxmorphnormals:a.maxmorphnormals,numdirlights:f.directional.length,numpointlights:f.point.length,numspotlights:f.spot.length,numrectarealights:f.rectarea.length,numhemilights:f.hemi.length,numclippingplanes:k,numclipintersection:t,shadowmapenabled:a.shadowmap.enabled&&p.receiveshadow&&0<f.shadows.length,shadowmaptype:a.shadowmap.type,="" tonemapping:a.tonemapping,physicallycorrectlights:a.physicallycorrectlights,premultipliedalpha:d.premultipliedalpha,alphatest:d.alphatest,doublesided:2="==d.side,flipSided:1===d.side,depthPacking:void" c="[];b.shaderID?c.push(b.shaderID):(c.push(a.fragmentShader),c.push(a.vertexShader));if(void" in="" a.defines)c.push(d),c.push(a.defines[d]);for(d="0;d<f.length;d++)c.push(b[f[d]]);return" c.join()};this.acquireprogram="function(b,c,e){for(var" f,t="0,p=d.length;t<p;t++){var" kf(a,e,b,c),d.push(f));return="" f};this.releaseprogram="function(a){if(0===--a.usedTimes){var" b="d.indexOf(a);d[b]=d[d.length-1];d.pop();a.destroy()}};this.programs=d}function" nf(a,b,c){function="" d(a){var="" h="a.target;a=f[h.id];null!==a.index&&e(a.index);var" m)e(m[k]);h.removeeventlistener("dispose",d);delete="" f[h.id];k="b.get(h);k.wireframe&&e(k.wireframe);b["delete"](h);" e(c){var="" d;d="c.isInterleavedBufferAttribute?b.get(c.data).__webglBuffer:b.get(c).__webglBuffer;void" f="{};return{get:function(a){var" f[b.id];b.addeventlistener("dispose",d);var="" e;b.isbuffergeometry?e="b:b.isGeometry&&(void" i).setfromobject(a)),="" e}}}function="" of(a,b,c){function="" d(c,d){var="" k="a.FLOAT,t=e.array;t" instanceof="" float32array?k="a.FLOAT:t" float64array?console.warn("unsupported="" data="" buffer="" format:="" float64array"):t="" uint16array?k="a.UNSIGNED_SHORT:" int16array?k="a.SHORT:t" uint32array?k="a.UNSIGNED_INT:t" int32array?k="a.INT:t" int8array?k="a.BYTE:t" uint8array&&(k="a.UNSIGNED_BYTE);m.bytesPerElement=t.BYTES_PER_ELEMENT;m.type=k;m.version=e.version;e.onUploadCallback()}else" m.version!="=e.version&&(a.bindBuffer(d,m.__webglBuffer),!1===e.dynamic?a.bufferData(d,e.array,a.STATIC_DRAW):-1===e.updateRange.count?a.bufferSubData(d,0,e.array):0===e.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer:" dynamic="" three.bufferattribute="" marked="" needsupdate="" but="" updaterange.count="" 0,="" ensure="" you="" are="" using="" set="" methods="" or="" updating="" manually."):="" (a.buffersubdata(d,e.updaterange.offset*e.array.bytes_per_element,e.array.subarray(e.updaterange.offset,e.updaterange.offset+e.updaterange.count)),e.updaterange.count="0),m.version=e.version)}var" nf(a,b,c);return{getattributebuffer:function(a){return="" a.isinterleavedbufferattribute?b.get(a.data).__webglbuffer:b.get(a).__webglbuffer},getattributeproperties:function(a){return="" a.isinterleavedbufferattribute?b.get(a.data):b.get(a)},getwireframeattribute:function(c){var="" e.wireframe;="" var="" for(m="c.position.array,c=0,k=m.length/3-1;c<k;c+=3)t=c+0,p=c+1,n=c+2,h.push(t,p,p,n,n,t);h=new" (65535<ud(h)?jb:ib)(h,1);d(h,a.element_array_buffer);return="" e.wireframe="h},update:function(b){var" h)d(h[m],a.array_buffer);="" b)for(var="" c}}}function="" pf(a,b,c,d,e,f,g){function="" h(a,b){if(a.width="">b||a.height>b){var c=b/Math.max(a.width,a.height),d=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");d.width=Math.floor(a.width*c);d.height=Math.floor(a.height*c);d.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,d.width,d.height);console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+
d.width+"x"+d.height,a);return d}return a}function m(a){return N.isPowerOfTwo(a.width)&&N.isPowerOfTwo(a.height)}function k(b){return 1003===b||1004===b||1005===b?a.NEAREST:a.LINEAR}function t(b){b=b.target;b.removeEventListener("dispose",t);a:{var c=d.get(b);if(b.image&&c.__image__webglTextureCube)a.deleteTexture(c.__image__webglTextureCube);else{if(void 0===c.__webglInit)break a;a.deleteTexture(c.__webglTexture)}d["delete"](b)}q.textures--}function p(b){b=b.target;b.removeEventListener("dispose",
p);var c=d.get(b),e=d.get(b.texture);if(b){void 0!==e.__webglTexture&&a.deleteTexture(e.__webglTexture);b.depthTexture&&b.depthTexture.dispose();if(b.isWebGLRenderTargetCube)for(e=0;6>e;e++)a.deleteFramebuffer(c.__webglFramebuffer[e]),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer[e]);else a.deleteFramebuffer(c.__webglFramebuffer),c.__webglDepthbuffer&&a.deleteRenderbuffer(c.__webglDepthbuffer);d["delete"](b.texture);d["delete"](b)}q.textures--}function n(b,g){var k=d.get(b);if(0<
b.version&&k.__version!==b.version){var n=b.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",b);else if(!1===n.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",b);else{void 0===k.__webglInit&&(k.__webglInit=!0,b.addEventListener("dispose",t),k.__webglTexture=a.createTexture(),q.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,k.__webglTexture);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
b.flipY);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b.premultiplyAlpha);a.pixelStorei(a.UNPACK_ALIGNMENT,b.unpackAlignment);var p=h(b.image,e.maxTextureSize);if((1001!==b.wrapS||1001!==b.wrapT||1003!==b.minFilter&&1006!==b.minFilter)&&!1===m(p))if(n=p,n instanceof HTMLImageElement||n instanceof HTMLCanvasElement){var l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");l.width=N.nearestPowerOfTwo(n.width);l.height=N.nearestPowerOfTwo(n.height);l.getContext("2d").drawImage(n,0,0,
l.width,l.height);console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+l.width+"x"+l.height,n);p=l}else p=n;var n=m(p),l=f(b.format),G=f(b.type);u(a.TEXTURE_2D,b,n);var r=b.mipmaps;if(b.isDepthTexture){r=a.DEPTH_COMPONENT;if(1015===b.type){if(!w)throw Error("Float Depth Texture only supported in WebGL2.0");r=a.DEPTH_COMPONENT32F}else w&&(r=a.DEPTH_COMPONENT16);1026===b.format&&r===a.DEPTH_COMPONENT&&1012!==b.type&&1014!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),
b.type=1012,G=f(b.type));1027===b.format&&(r=a.DEPTH_STENCIL,1020!==b.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),b.type=1020,G=f(b.type)));c.texImage2D(a.TEXTURE_2D,0,r,p.width,p.height,0,l,G,null)}else if(b.isDataTexture)if(0<r.length&&n){for(var 1015="==g.type&&null===b.get("OES_texture_float_linear")||1016===g.type&&null===b.get("OES_texture_half_float_linear")||!(1<g.anisotropy||d.get(g).__currentAnisotropy)||(a.texParameterf(c,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g.anisotropy,e.getMaxAnisotropy())),d.get(g).__currentAnisotropy=g.anisotropy)}function" h="0,aa=r.length;H<aa;H++)p=r[H],c.texImage2D(a.TEXTURE_2D,H,l,p.width,p.height,0,l,G,p.data);b.generateMipmaps=!1}else" c.teximage2d(a.texture_2d,0,l,p.width,p.height,0,l,g,p.data);else="" if(b.iscompressedtexture)for(h="0,aa=r.length;H<aa;H++)p=r[H],1023!==b.format&&1022!==b.format?-1<c.getCompressedTextureFormats().indexOf(l)?c.compressedTexImage2D(a.TEXTURE_2D,H,l,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer:" attempt="" to="" load="" unsupported="" compressed="" texture="" format="" in="" .uploadtexture()"):c.teximage2d(a.texture_2d,h,l,p.width,p.height,0,l,g,p.data);else="" if(0<r.length&&n){h="0;for(aa=r.length;H<aa;H++)p=r[H],c.texImage2D(a.TEXTURE_2D,H,l,l,G,p);b.generateMipmaps=!1}else" c.teximage2d(a.texture_2d,0,l,l,="" g,p);b.generatemipmaps&&n&&a.generatemipmap(a.texture_2d);k.__version="b.version;if(b.onUpdate)b.onUpdate(b);return}}c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_2D,k.__webglTexture)}function" u(c,g,h){h?(a.texparameteri(c,a.texture_wrap_s,f(g.wraps)),a.texparameteri(c,a.texture_wrap_t,f(g.wrapt)),a.texparameteri(c,a.texture_mag_filter,f(g.magfilter)),a.texparameteri(c,a.texture_min_filter,f(g.minfilter))):(a.texparameteri(c,a.texture_wrap_s,a.clamp_to_edge),a.texparameteri(c,a.texture_wrap_t,="" a.clamp_to_edge),1001="==g.wrapS&&1001===g.wrapT||console.warn("THREE.WebGLRenderer:" is="" not="" power="" of="" two.="" texture.wraps="" and="" texture.wrapt="" should="" be="" set="" three.clamptoedgewrapping.",g),a.texparameteri(c,a.texture_mag_filter,k(g.magfilter)),a.texparameteri(c,a.texture_min_filter,k(g.minfilter)),1003!="=g.minFilter&&1006!==g.minFilter&&console.warn("THREE.WebGLRenderer:" texture.minfilter="" three.nearestfilter="" or="" three.linearfilter.",g));!(h="b.get("EXT_texture_filter_anisotropic"))||" l(b,e,g,h){var="" m="f(e.texture.format),k=f(e.texture.type);c.texImage2D(h,0,m,e.width,e.height,0,m,k,null);a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,g,h,d.get(e.texture).__webglTexture," 0);a.bindframebuffer(a.framebuffer,null)}function="" r(b,c){a.bindrenderbuffer(a.renderbuffer,b);c.depthbuffer&&!c.stencilbuffer?(a.renderbufferstorage(a.renderbuffer,a.depth_component16,c.width,c.height),a.framebufferrenderbuffer(a.framebuffer,a.depth_attachment,a.renderbuffer,b)):c.depthbuffer&&c.stencilbuffer?(a.renderbufferstorage(a.renderbuffer,a.depth_stencil,c.width,c.height),a.framebufferrenderbuffer(a.framebuffer,a.depth_stencil_attachment,a.renderbuffer,b)):a.renderbufferstorage(a.renderbuffer,="" a.rgba4,c.width,c.height);a.bindrenderbuffer(a.renderbuffer,null)}var="" q="g.memory,w="undefined"!==typeof" webgl2renderingcontext&&a="" instanceof="" webgl2renderingcontext;this.settexture2d="n;this.setTextureCube=function(b,g){var" k="d.get(b);if(6===b.image.length)if(0<b.version&&k.__version!==b.version){k.__image__webglTextureCube||(b.addEventListener("dispose",t),k.__image__webglTextureCube=a.createTexture(),q.textures++);c.activeTexture(a.TEXTURE0+g);c.bindTexture(a.TEXTURE_CUBE_MAP,k.__image__webglTextureCube);" a.pixelstorei(a.unpack_flip_y_webgl,b.flipy);for(var="" n="b&&b.isCompressedTexture,p=b.image[0]&&b.image[0].isDataTexture,l=[],r=0;6">r;r++)l[r]=n||p?p?b.image[r].image:b.image[r]:h(b.image[r],e.maxCubemapSize);var G=m(l[0]),w=f(b.format),aa=f(b.type);u(a.TEXTURE_CUBE_MAP,b,G);for(r=0;6>r;r++)if(n)for(var x,D=l[r].mipmaps,z=0,Q=D.length;z<q;z++)x=d[z],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(w)?c.compressedteximage2d(a.texture_cube_map_positive_x+r,z,w,x.width,x.height, 0,x.data):console.warn("three.webglrenderer:="" attempt="" to="" load="" unsupported="" compressed="" texture="" format="" in="" .settexturecube()"):c.teximage2d(a.texture_cube_map_positive_x+r,z,w,x.width,x.height,0,w,aa,x.data);else="" p?c.teximage2d(a.texture_cube_map_positive_x+r,0,w,l[r].width,l[r].height,0,w,aa,l[r].data):c.teximage2d(a.texture_cube_map_positive_x+r,0,w,w,aa,l[r]);b.generatemipmaps&&g&&a.generatemipmap(a.texture_cube_map);k.__version="b.version;if(b.onUpdate)b.onUpdate(b)}else" c.activetexture(a.texture0+="" g),c.bindtexture(a.texture_cube_map,k.__image__webgltexturecube)};this.settexturecubedynamic="function(b,e){c.activeTexture(a.TEXTURE0+e);c.bindTexture(a.TEXTURE_CUBE_MAP,d.get(b).__webglTexture)};this.setupRenderTarget=function(b){var" e="d.get(b),f=d.get(b.texture);b.addEventListener("dispose",p);f.__webglTexture=a.createTexture();q.textures++;var" g="!0===b.isWebGLRenderTargetCube,h=m(b);if(g){e.__webglFramebuffer=[];for(var" k="0;6">k;k++)e.__webglFramebuffer[k]=a.createFramebuffer()}else e.__webglFramebuffer=
a.createFramebuffer();if(g){c.bindTexture(a.TEXTURE_CUBE_MAP,f.__webglTexture);u(a.TEXTURE_CUBE_MAP,b.texture,h);for(k=0;6>k;k++)l(e.__webglFramebuffer[k],b,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+k);b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_CUBE_MAP);c.bindTexture(a.TEXTURE_CUBE_MAP,null)}else c.bindTexture(a.TEXTURE_2D,f.__webglTexture),u(a.TEXTURE_2D,b.texture,h),l(e.__webglFramebuffer,b,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),b.texture.generateMipmaps&&h&&a.generateMipmap(a.TEXTURE_2D),
c.bindTexture(a.TEXTURE_2D,null);if(b.depthBuffer){e=d.get(b);f=!0===b.isWebGLRenderTargetCube;if(b.depthTexture){if(f)throw Error("target.depthTexture not supported in Cube render targets");if(b&&b.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported!");a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer);if(!b.depthTexture||!b.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");d.get(b.depthTexture).__webglTexture&&
b.depthTexture.image.width===b.width&&b.depthTexture.image.height===b.height||(b.depthTexture.image.width=b.width,b.depthTexture.image.height=b.height,b.depthTexture.needsUpdate=!0);n(b.depthTexture,0);e=d.get(b.depthTexture).__webglTexture;if(1026===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,e,0);else if(1027===b.depthTexture.format)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,e,0);else throw Error("Unknown depthTexture format");
}else if(f)for(e.__webglDepthbuffer=[],f=0;6>f;f++)a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer[f]),e.__webglDepthbuffer[f]=a.createRenderbuffer(),r(e.__webglDepthbuffer[f],b);else a.bindFramebuffer(a.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=a.createRenderbuffer(),r(e.__webglDepthbuffer,b);a.bindFramebuffer(a.FRAMEBUFFER,null)}};this.updateRenderTargetMipmap=function(b){var e=b.texture;e.generateMipmaps&&m(b)&&1003!==e.minFilter&&1006!==e.minFilter&&(b=b&&b.isWebGLRenderTargetCube?
a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,e=d.get(e).__webglTexture,c.bindTexture(b,e),a.generateMipmap(b),c.bindTexture(b,null))}}function Qf(){var a={};return{get:function(b){b=b.uuid;var c=a[b];void 0===c&&(c={},a[b]=c);return c},"delete":function(b){delete a[b.uuid]},clear:function(){a={}}}}function Rf(a,b,c){function d(b,c,d){var e=new Uint8Array(4),f=a.createTexture();a.bindTexture(b,f);a.texParameteri(b,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(b,a.TEXTURE_MAG_FILTER,a.NEAREST);for(b=0;b<d;b++)a.teximage2d(c+ 0="==b&&(b=a.TEXTURE0+P-1);W!==b&&(a.activeTexture(b)," 1020="==a&&(b=ja.get("WEBGL_depth_texture"),null!==b)?b.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer","84");a=a||{};var" b,0,a.rgba,1,1,0,a.rgba,a.unsigned_byte,e);return="" f}function="" e(b){!0!="=y[b]&&(a.enable(b),y[b]=!0)}function" f(b){!1!="=y[b]&&(a.disable(b),y[b]=!1)}function" g(b,d,g,h,m,k,n,t){0!="=b?e(a.BLEND):f(a.BLEND);if(b!==v||t!==x)2===b?t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):3===b?t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):" (a.blendequation(a.func_add),a.blendfunc(a.zero,a.one_minus_src_color)):4="==b?t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):t?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA))," v="b,x=t;if(5===b){m=m||d;k=k||g;n=n||h;if(d!==E||m!==F)a.blendEquationSeparate(c(d),c(m)),E=d,F=m;if(g!==L||h!==C||k!==da||n!==H)a.blendFuncSeparate(c(g),c(h),c(k),c(n)),L=g,C=h,da=k,H=n}else" h="da=F=C=L=E=null}function" h(a){n.setfunc(a)}function="" m(b){d!="=b&&(b?a.frontFace(a.CW):a.frontFace(a.CCW),D=b)}function" k(b){0!="=b?(e(a.CULL_FACE),b!==z&&(1===b?a.cullFace(a.BACK):2===b?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):f(a.CULL_FACE);z=b}function" t(b){void="" w="b)}var" p="new" function(){var="" b="!1,c=new" fa,d="null,e=new" fa;return{setmask:function(c){d="==c||b||(a.colorMask(c,c,c,c),d=c)},setLocked:function(a){b=a},setClear:function(b,d,f,g,h){!0===h&&(b*=g,d*=g,f*=g);c.set(b,d,f,g);!1===e.equals(c)&&(a.clearColor(b,d,f,g),e.copy(c))},reset:function(){b=!1;d=null;e.set(0,0,0,1)}}},n=new" b){if(b)switch(b){case="" 0:a.depthfunc(a.never);break;case="" 1:a.depthfunc(a.always);break;case="" 2:a.depthfunc(a.less);break;case="" 3:a.depthfunc(a.lequal);break;case="" 4:a.depthfunc(a.equal);break;case="" 5:a.depthfunc(a.gequal);break;case="" 6:a.depthfunc(a.greater);break;case="" 7:a.depthfunc(a.notequal);break;default:a.depthfunc(a.lequal)}else="" a.depthfunc(a.lequal);d="b}},setLocked:function(a){b=a},setClear:function(b){g!==b&&(a.clearDepth(b),g=b)},reset:function(){b=!1;g=d=c=null}}},u=new" null,d="null,g=null,h=null,m=null,k=null,n=null,t=null;return{setTest:function(b){b?e(a.STENCIL_TEST):f(a.STENCIL_TEST)},setMask:function(d){c===d||b||(a.stencilMask(d),c=d)},setFunc:function(b,c,e){if(d!==b||g!==c||h!==e)a.stencilFunc(b,c,e),d=b,g=c,h=e},setOp:function(b,c,d){if(m!==b||k!==c||n!==d)a.stencilOp(b,c,d),m=b,k=c,n=d},setLocked:function(a){b=a},setClear:function(b){t!==b&&(a.clearStencil(b),t=b)},reset:function(){b=!1;t=n=k=m=h=g=d=c=null}}},l=a.getParameter(a.MAX_VERTEX_ATTRIBS),r=new" uint8array(l),="" q="new" uint8array(l),w="new" uint8array(l),y="{},K=null,v=null,E=null,L=null,C=null,F=null,da=null,H=null,x=!1,D=null,z=null,J=null,Q=null,M=null,O=null,P=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),l=parseFloat(/^WebGL\" ([0-9])="" .exec(a.getparameter(a.version))[1]),i="1<=parseFloat(l),W=null,S={},R=new" fa,t="new" fa,n="{};N[a.TEXTURE_2D]=d(a.TEXTURE_2D,a.TEXTURE_2D,1);N[a.TEXTURE_CUBE_MAP]=d(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6);return{buffers:{color:p,depth:n,stencil:u},init:function(){p.setClear(0," 0,0,1);n.setclear(1);u.setclear(0);e(a.depth_test);h(3);m(!1);k(1);e(a.cull_face);e(a.blend);g(1)},initattributes:function(){for(var="" a="0,b=r.length;a<b;a++)r[a]=0},enableAttribute:function(c){r[c]=1;0===q[c]&&(a.enableVertexAttribArray(c),q[c]=1);0!==w[c]&&(b.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c,0),w[c]=0)},enableAttributeAndDivisor:function(b,c,d){r[b]=1;0===q[b]&&(a.enableVertexAttribArray(b),q[b]=1);w[b]!==c&&(d.vertexAttribDivisorANGLE(b,c),w[b]=c)},disableUnusedAttributes:function(){for(var" c="a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),d=0;d<c.length;d++)K.push(c[d]);return" k},setblending:g,setcolorwrite:function(a){p.setmask(a)},setdepthtest:function(a){n.settest(a)},setdepthwrite:function(a){n.setmask(a)},="" setdepthfunc:h,setstenciltest:function(a){u.settest(a)},setstencilwrite:function(a){u.setmask(a)},setstencilfunc:function(a,b,c){u.setfunc(a,b,c)},setstencilop:function(a,b,c){u.setop(a,b,c)},setflipsided:m,setcullface:k,setlinewidth:function(b){b!="=J&&(I&&a.lineWidth(b),J=b)},setPolygonOffset:function(b,c,d){if(b){if(e(a.POLYGON_OFFSET_FILL),Q!==c||M!==d)a.polygonOffset(c,d),Q=c,M=d}else" f(a.polygon_offset_fill)},getscissortest:function(){return="" o},setscissortest:function(b){(o="b)?e(a.SCISSOR_TEST):" f(a.scissor_test)},activetexture:t,bindtexture:function(b,c){null="==W&&t();var" d="S[W];void" 0,texture:void="" 0},s[w]="d);if(d.type!==b||d.texture!==c)a.bindTexture(b,c||N[b]),d.type=b,d.texture=c},compressedTexImage2D:function(){try{a.compressedTexImage2D.apply(a,arguments)}catch(b){console.error(b)}},texImage2D:function(){try{a.texImage2D.apply(a,arguments)}catch(b){console.error(b)}},scissor:function(b){!1===R.equals(b)&&(a.scissor(b.x,b.y,b.z,b.w),R.copy(b))},viewport:function(b){!1===" t.equals(b)&&(a.viewport(b.x,b.y,b.z,b.w),t.copy(b))},reset:function(){for(var="" sf(a,b,c){function="" d(b){if("highp"="==b){if(0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision&&0<a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision)return"highp";b="mediump"}return"mediump"===b&&0<a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision&&" 0<a.getshaderprecisionformat(a.fragment_shader,a.medium_float).precision?"mediump":"lowp"}var="" e,f="void" 0!="=c.precision?c.precision:"highp",g=d(f);g!==f&&(console.warn("THREE.WebGLRenderer:",f,"not" supported,="" using",g,"instead."),f="g);c=!0===c.logarithmicDepthBuffer&&!!b.get("EXT_frag_depth");var" g="a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),h=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=a.getParameter(a.MAX_TEXTURE_SIZE),k=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),t=a.getParameter(a.MAX_VERTEX_ATTRIBS)," e;var="" e="null!==c?a.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:d,precision:f,logarithmicDepthBuffer:c,maxTextures:g,maxVertexTextures:h,maxTextureSize:m,maxCubemapSize:k,maxAttributes:t,maxVertexUniforms:p," maxvaryings:n,maxfragmentuniforms:u,vertextextures:l,floatfragmenttextures:r,floatvertextextures:l&&r}}function="" tf(a){var="" b[c];var="" d;switch(c){case="" "webgl_depth_texture":d="a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case" "ext_texture_filter_anisotropic":d="a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||" a.getextension("webkit_ext_texture_filter_anisotropic");break;case="" "webgl_compressed_texture_s3tc":d="a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case" "webgl_compressed_texture_pvrtc":d="a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case" "webgl_compressed_texture_etc1":d="a.getExtension("WEBGL_compressed_texture_etc1");" break;default:d="a.getExtension(c)}null===d&&console.warn("THREE.WebGLRenderer:" "+c+"="" extension="" not="" supported.");return="" b[c]="d}}}function" uf(){function="" a(){k.value!="=d&&(k.value=d,k.needsUpdate=0<e);c.numPlanes=e;c.numIntersection=0}function" b(a,b,d,e){var="" f="null!==a?a.length:0,g=null;if(0!==f){g=k.value;if(!0!==e||null===g){e=d+4*f;b=b.matrixWorldInverse;m.getNormalMatrix(b);if(null===g||g.length<e)g=new" float32array(e);for(e="0;e!==f;++e,d+=4)h.copy(a[e]).applyMatrix4(b,m),h.normal.toArray(g,d),g[d+" 3]="h.constant}k.value=g;k.needsUpdate=!0}c.numPlanes=f;return" g}var="" la,m="new" ya,k="{value:null,needsUpdate:!1};this.uniform=k;this.numIntersection=this.numPlanes=0;this.init=function(a,c,g){var" h};this.beginshadows="function(){g=!0;b(null)};this.endShadows=function(){g=!1;a()};this.setState=function(c,h,m,l,G,r){if(!f||null===c||0===c.length||g&&!m)g?b(null):a();else{m=g?0:e;var" k.value="w;w=b(c,l,q,r);for(c=0;c!==q;++c)w[c]=d[c];G.clippingState=w;this.numIntersection=h?this.numPlanes:0;this.numPlanes+=m}}}function" yd(a){function="" b(){y.init();y.scissor(x.copy(ga).multiplyscalar(ra));y.viewport(z.copy(ia).multiplyscalar(ra));y.buffers.color.setclear(ea.r,ea.g,ea.b,gb,f)}function="" c(){u="wa=null;V="";R=-1;Y.reset()}function" d(a){a.preventdefault();c();b();ha.clear()}function="" e(a){a="a.target;a.removeEventListener("dispose",e);f(a);ha["delete"](a)}function" f(a){var="" a.program="void" 0;void="" g(a,b){return="" math.abs(b[0])-math.abs(a[0])}function="" h(a,b){return="" a.object.renderorder!="=b.object.renderOrder?a.object.renderOrder-b.object.renderOrder:a.material.program&&b.material.program&&a.material.program!==b.material.program?a.material.program.id-b.material.program.id:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function" m(a,b){return="" b.object.renderorder:a.z!="=b.z?b.z-a.z:a.id-b.id}function" k(a,b,c,d,e){var="" f;c.transparent?(d="z,f=++T):(d=aa,f=++D);f=d[f];void" t(a){if(!ma.intersectssphere(a))return!1;var="" if(c[e].distancetopoint(d)<a)return!1;while(++e!="=b);return!0}function" p(a,b){if(!1!="=" a.visible){if(0!="=(a.layers.mask&b.layers.mask))if(a.isLight)H.push(a);else" if(a.issprite){var="" c;(c="!1===a.frustumCulled)||(na.center.set(0,0,0),na.radius=.7071067811865476,na.applyMatrix4(a.matrixWorld),c=!0===t(na));c&&M.push(a)}else" if(a.islensflare)o.push(a);else="" if(a.isimmediaterenderobject)!0="==P.sortObjects&&(Ga.setFromMatrixPosition(a.matrixWorld),Ga.applyMatrix4(ua)),k(a,null,a.material,Ga.z,null);else" if(a.ismesh||a.isline||a.ispoints)if(a.isskinnedmesh&&a.skeleton.update(),(c="!1===a.frustumCulled)||" (c="a.geometry,null===c.boundingSphere&&c.computeBoundingSphere(),na.copy(c.boundingSphere).applyMatrix4(a.matrixWorld),c=!0===t(na)),c){var" k(a,c,d,ga.z,null)}c="a.children;d=0;for(g=c.length;d<g;d++)p(c[d],b)}}function" n(a,b,c,="" d){for(var="" n="G(c,b.fog,k,h);V="";h.render(function(a){P.renderBufferImmediate(a,n,k)})}else" p.renderbufferdirect(c,b.fog,m,k,h,g);h.onafterrender(p,b,c,m,k,g)}}function="" l(a){2="==a.side?Y.disable(B.CULL_FACE):Y.enable(B.CULL_FACE);" y.setflipsided(1="==a.side);!0===a.transparent?Y.setBlending(a.blending,a.blendEquation,a.blendSrc,a.blendDst,a.blendEquationAlpha,a.blendSrcAlpha,a.blendDstAlpha,a.premultipliedAlpha):Y.setBlending(0);Y.setDepthFunc(a.depthFunc);Y.setDepthTest(a.depthTest);Y.setDepthWrite(a.depthWrite);Y.setColorWrite(a.colorWrite);Y.setPolygonOffset(a.polygonOffset,a.polygonOffsetFactor,a.polygonOffsetUnits)}function" g(a,b,c,d){ea="0;var" c.clipshadows,a,g,a="==U&&c.id===R);!1===c.needsUpdate&&(void" if(n.code!="=" k)f(c);else="" if(void="" a;else="" t="!1;t&&(m.shaderID?(n=bb[m.shaderID],h.__webglShader={name:c.type,uniforms:Ja.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}):h.__webglShader={name:c.type,uniforms:c.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader},c.__webglShader=h.__webglShader,n=ya.acquireProgram(c,m,k),h.program=n,c.program=n);m=n.getAttributes();if(c.morphTargets)for(k=c.numSupportedMorphTargets=0;k<P.maxMorphTargets;k++)0<=" m["morphtarget"+k]&&c.numsupportedmorphtargets++;if(c.morphnormals)for(k="c.numSupportedMorphNormals=0;k<P.maxMorphNormals;k++)0<=m["morphNormal"+k]&&c.numSupportedMorphNormals++;m=h.__webglShader.uniforms;if(!c.isShaderMaterial&&!c.isRawShaderMaterial||!0===c.clipping)h.numClippingPlanes=ca.numPlanes,h.numIntersection=ca.numIntersection,m.clippingPlanes=ca.uniform;h.fog=b;h.lightsHash=ba.hash;c.lights&&(m.ambientLightColor.value=ba.ambient,m.directionalLights.value=ba.directional,m.spotLights.value=" ba.spot,m.rectarealights.value="ba.rectArea,m.pointLights.value=ba.point,m.hemisphereLights.value=ba.hemi,m.directionalShadowMap.value=ba.directionalShadowMap,m.directionalShadowMatrix.value=ba.directionalShadowMatrix,m.spotShadowMap.value=ba.spotShadowMap,m.spotShadowMatrix.value=ba.spotShadowMatrix,m.pointShadowMap.value=ba.pointShadowMap,m.pointShadowMatrix.value=ba.pointShadowMatrix);k=h.program.getUniforms();m=$a.seqWithValue(k.seq,m);h.uniformsList=m}c.needsUpdate=!1}var" m="h.getUniforms(),k=g.__webglShader.uniforms;h.id!==wa&&(B.useProgram(h.program),wa=h.id,t=n=p=!0);c.id!==R&&(R=c.id,n=!0);if(p||a!==U){m.set(B,a,"projectionMatrix");la.logarithmicDepthBuffer&&m.setValue(B,"logDepthBufFC",2/(Math.log(a.far+1)/Math.LN2));a!==U&&(U=a,t=n=!0);if(c.isShaderMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.envMap)p=m.map.cameraPosition,void" c.ismeshstandardmaterial||c.isshadermaterial||c.skinning)&&m.setvalue(b,"viewmatrix",a.matrixworldinverse);m.set(b,p,"tonemappingexposure");m.set(b,p,"tonemappingwhitepoint")}c.skinning&&(m.setoptional(b,d,"bindmatrix"),m.setoptional(b,d,"bindmatrixinverse"),a="d.skeleton)&&(la.floatVertexTextures&&a.useVertexTexture?(m.set(B,a,"boneTexture"),m.set(B,a,"boneTextureWidth"),m.set(B,a,"boneTextureHeight")):m.setOptional(B,a,"boneMatrices"));if(n){c.lights&&(a=t,k.ambientLightColor.needsUpdate=a,k.directionalLights.needsUpdate=" a,k.pointlights.needsupdate="a,k.spotLights.needsUpdate=a,k.rectAreaLights.needsUpdate=a,k.hemisphereLights.needsUpdate=a);b&&c.fog&&(k.fogColor.value=b.color,b.isFog?(k.fogNear.value=b.near,k.fogFar.value=b.far):b.isFogExp2&&(k.fogDensity.value=b.density));if(c.isMeshBasicMaterial||c.isMeshLambertMaterial||c.isMeshPhongMaterial||c.isMeshStandardMaterial||c.isMeshNormalMaterial||c.isMeshDepthMaterial){k.opacity.value=c.opacity;k.diffuse.value=c.color;c.emissive&&k.emissive.value.copy(c.emissive).multiplyScalar(c.emissiveIntensity);" k.map.value="c.map;k.specularMap.value=c.specularMap;k.alphaMap.value=c.alphaMap;c.lightMap&&(k.lightMap.value=c.lightMap,k.lightMapIntensity.value=c.lightMapIntensity);c.aoMap&&(k.aoMap.value=c.aoMap,k.aoMapIntensity.value=c.aoMapIntensity);var" l;c.map?l="c.map:c.specularMap?l=c.specularMap:c.displacementMap?l=c.displacementMap:c.normalMap?l=c.normalMap:c.bumpMap?l=c.bumpMap:c.roughnessMap?l=c.roughnessMap:c.metalnessMap?l=c.metalnessMap:c.alphaMap?l=c.alphaMap:c.emissiveMap&&(l=c.emissiveMap);void" l&&(l.iswebglrendertarget&&(l="l.texture),b=l.offset,l=l.repeat,k.offsetRepeat.value.set(b.x,b.y,l.x,l.y));k.envMap.value=c.envMap;k.flipEnvMap.value=c.envMap&&c.envMap.isCubeTexture?-1:1;k.reflectivity.value=c.reflectivity;k.refractionRatio.value=c.refractionRatio}c.isLineBasicMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity):c.isLineDashedMaterial?(k.diffuse.value=c.color,k.opacity.value=c.opacity,k.dashSize.value=c.dashSize,k.totalSize.value=c.dashSize+c.gapSize,k.scale.value=c.scale):" c.ispointsmaterial?(k.diffuse.value="c.color,k.opacity.value=c.opacity,k.size.value=c.size*Ra,k.scale.value=.5*Cc,k.map.value=c.map,null!==c.map&&(l=c.map.offset,c=c.map.repeat,k.offsetRepeat.value.set(l.x,l.y,c.x,c.y))):c.isMeshLambertMaterial?c.emissiveMap&&(k.emissiveMap.value=c.emissiveMap):c.isMeshToonMaterial?(r(k,c),c.gradientMap&&(k.gradientMap.value=c.gradientMap)):c.isMeshPhongMaterial?r(k,c):c.isMeshPhysicalMaterial?(k.clearCoat.value=c.clearCoat,k.clearCoatRoughness.value=c.clearCoatRoughness," a(k,c)):c.ismeshstandardmaterial?a(k,c):c.ismeshdepthmaterial?c.displacementmap&&(k.displacementmap.value="c.displacementMap,k.displacementScale.value=c.displacementScale,k.displacementBias.value=c.displacementBias):c.isMeshNormalMaterial&&(c.bumpMap&&(k.bumpMap.value=c.bumpMap,k.bumpScale.value=c.bumpScale),c.normalMap&&(k.normalMap.value=c.normalMap,k.normalScale.value.copy(c.normalScale)),c.displacementMap&&(k.displacementMap.value=c.displacementMap,k.displacementScale.value=c.displacementScale," k.displacementbias.value="c.displacementBias));void" h}function="" r(a,b){a.specular.value="b.specular;a.shininess.value=Math.max(b.shininess,1E-4);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);b.bumpMap&&(a.bumpMap.value=b.bumpMap," a.bumpscale.value="b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias)}function" a(a,b){a.roughness.value="b.roughness;a.metalness.value=b.metalness;b.roughnessMap&&(a.roughnessMap.value=b.roughnessMap);b.metalnessMap&&(a.metalnessMap.value=b.metalnessMap);b.emissiveMap&&(a.emissiveMap.value=b.emissiveMap);" b.bumpmap&&(a.bumpmap.value="b.bumpMap,a.bumpScale.value=b.bumpScale);b.normalMap&&(a.normalMap.value=b.normalMap,a.normalScale.value.copy(b.normalScale));b.displacementMap&&(a.displacementMap.value=b.displacementMap,a.displacementScale.value=b.displacementScale,a.displacementBias.value=b.displacementBias);b.envMap&&(a.envMapIntensity.value=b.envMapIntensity)}function" w(a){var="" b;if(1e3="==a)return" b.repeat;if(1001="==a)return" b.clamp_to_edge;if(1002="==a)return" b.mirrored_repeat;if(1003="==a)return" b.nearest;="" if(1004="==a)return" b.nearest_mipmap_nearest;if(1005="==a)return" b.nearest_mipmap_linear;if(1006="==a)return" b.linear;if(1007="==a)return" b.linear_mipmap_nearest;if(1008="==a)return" b.linear_mipmap_linear;if(1009="==a)return" b.unsigned_byte;if(1017="==a)return" b.unsigned_short_4_4_4_4;if(1018="==a)return" b.unsigned_short_5_5_5_1;if(1019="==a)return" b.unsigned_short_5_6_5;if(1010="==a)return" b.byte;if(1011="==a)return" b.short;if(1012="==a)return" b.unsigned_short;if(1013="==a)return" b.int;if(1014="==a)return" b.unsigned_int;="" if(1015="==a)return" b.float;if(1016="==a&&(b=ja.get("OES_texture_half_float"),null!==b))return" b.half_float_oes;if(1021="==a)return" b.alpha;if(1022="==a)return" b.rgb;if(1023="==a)return" b.rgba;if(1024="==a)return" b.luminance;if(1025="==a)return" b.luminance_alpha;if(1026="==a)return" b.depth_component;if(1027="==a)return" b.depth_stencil;if(100="==a)return" b.func_add;if(101="==a)return" b.func_subtract;if(102="==a)return" b.func_reverse_subtract;if(200="==a)return" b.zero;if(201="==a)return" b.one;if(202="==a)return" b.src_color;="" if(203="==a)return" b.one_minus_src_color;if(204="==a)return" b.src_alpha;if(205="==a)return" b.one_minus_src_alpha;if(206="==a)return" b.dst_alpha;if(207="==a)return" b.one_minus_dst_alpha;if(208="==a)return" b.dst_color;if(209="==a)return" b.one_minus_dst_color;if(210="==a)return" b.src_alpha_saturate;if(2001="==a||2002===a||2003===a||2004===a)if(b=ja.get("WEBGL_compressed_texture_s3tc"),null!==b){if(2001===a)return" b.compressed_rgb_s3tc_dxt1_ext;if(2002="==a)return" b.compressed_rgba_s3tc_dxt1_ext;if(2003="==a)return" b.compressed_rgba_s3tc_dxt3_ext;="" if(2004="==a)return" b.compressed_rgba_s3tc_dxt5_ext}if(2100="==a||2101===a||2102===a||2103===a)if(b=ja.get("WEBGL_compressed_texture_pvrtc"),null!==b){if(2100===a)return" b.compressed_rgb_pvrtc_4bppv1_img;if(2101="==a)return" b.compressed_rgb_pvrtc_2bppv1_img;if(2102="==a)return" b.compressed_rgba_pvrtc_4bppv1_img;if(2103="==a)return" b.compressed_rgba_pvrtc_2bppv1_img}if(2151="==a&&(b=ja.get("WEBGL_compressed_texture_etc1"),null!==b))return" b.compressed_rgb_etc1_webgl;if(103="==a||104===a)if(b=ja.get("EXT_blend_minmax")," null!="=b){if(103===a)return" b.min_ext;if(104="==a)return" b.max_ext}return="" y="void" a.premultipliedalpha:!0,x="void" float32array(8),m="[],O=[];this.domElement=y;this.context=null;this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.clippingPlanes=[];this.localClippingEnabled=!1;this.gammaFactor=2;this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1;this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1;this.maxMorphTargets=" 8;this.maxmorphnormals="4;var" fa,sa="null,Z=new" fa,ea="0,Ea=new" j(0),gb="0,md=y.width,Cc=y.height,Ra=1,ga=new" fa(0,0,md,cc),ka="!1,ia=new" fa(0,0,md,cc),ma="new" tc,ca="new" uf,oa="!1,ra=!1,na=new" na,ua="new" s,ga="new" q,ba="new" s,xa="new" s,ba="{hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},pa={calls:0," vertices:0,faces:0,points:0};this.info="{render:pa,memory:{geometries:0,textures:0},programs:null};var" b;try{v="{alpha:v,depth:E,stencil:L,antialias:C,premultipliedAlpha:F,preserveDrawingBuffer:x};B=K||y.getContext("webgl",v)||y.getContext("experimental-webgl",v);if(null===B){if(null!==y.getContext("webgl"))throw"Error" creating="" webgl="" context="" with="" your="" selected attributes.";throw"error="" context.";}void="" rangemax:1,precision:1}});y.addeventlistener("webglcontextlost",d,!1)}catch(vf){console.error("three.webglrenderer:="" "+vf)}var="" ja="new" tf(b);ja.get("webgl_depth_texture");ja.get("oes_texture_float");ja.get("oes_texture_float_linear");ja.get("oes_texture_half_float");ja.get("oes_texture_half_float_linear");ja.get("oes_standard_derivatives");ja.get("angle_instanced_arrays");ja.get("oes_element_index_uint")&&(i.maxindex="4294967296);var" la="new" sf(b,ja,a),y="new" rf(b,ja,w),ha="new" qf,ta="new" pf(b,ja,y,ha,la,="" w,this.info),qa="new" of(b,ha,this.info),ya="new" mf(this,la),za="new" ef;this.info.programs="ya.programs;var" df(b,ja,pa),oa="new" cf(b,ja,pa),ia,ca,sa,va;b();this.context="B;this.capabilities=la;this.extensions=ja;this.properties=ha;this.state=Y;var" ma="new" ke(this,ba,qa,la);this.shadowmap="Ma;var" pa="new" zf(this,m),qa="new" yf(this,o);this.getcontext="function(){return" b};this.getcontextattributes="function(){return" b.getcontextattributes()};this.forcecontextloss="function(){ja.get("WEBGL_lose_context").loseContext()};" this.getmaxanisotropy="function(){return" la.getmaxanisotropy()};this.getprecision="function(){return" la.precision};this.getpixelratio="function(){return" ra};this.setpixelratio="function(a){void" function(a,b,c,d){y.scissor(ga.set(a,b,c,d))};this.setscissortest="function(a){Y.setScissorTest(ka=a)};this.getClearColor=function(){return" ea};this.setclearcolor="function(a,b){Ea.set(a);gb=void" gb};this.setclearalpha="function(a){gb=a;Y.buffers.color.setClear(Ea.r,Ea.g,Ea.b,gb,F)};this.clear=function(a,b,c){var" c)d|="B.STENCIL_BUFFER_BIT;B.clear(d)};this.clearColor=function(){this.clear(!0,!1,!1)};this.clearDepth=function(){this.clear(!1,!0,!1)};this.clearStencil=function(){this.clear(!1,!1,!0)};this.clearTarget=function(a,b,c,d){this.setRenderTarget(a);this.clear(b,c,d)};this.resetGLState=c;this.dispose=function(){z=[];T=-1;aa=[];D=-1;y.removeEventListener("webglcontextlost",d,!1)};this.renderBufferImmediate=function(a,b,c){Y.initAttributes();var" a.hasnormals&&!d.normal&&(d.normal="B.createBuffer());a.hasUvs&&!d.uv&&(d.uv=B.createBuffer());a.hasColors&&!d.color&&(d.color=B.createBuffer());b=b.getAttributes();a.hasPositions&&(B.bindBuffer(B.ARRAY_BUFFER,d.position),B.bufferData(B.ARRAY_BUFFER,a.positionArray,B.DYNAMIC_DRAW),Y.enableAttribute(b.position),B.vertexAttribPointer(b.position,3,B.FLOAT,!1,0,0));if(a.hasNormals){B.bindBuffer(B.ARRAY_BUFFER,d.normal);if(!c.isMeshPhongMaterial&&!c.isMeshStandardMaterial&&!c.isMeshNormalMaterial&&1===" c.shading)for(var="" 2,b.float,!1,0,0));a.hascolors&&0!="=c.vertexColors&&(B.bindBuffer(B.ARRAY_BUFFER,d.color),B.bufferData(B.ARRAY_BUFFER,a.colorArray,B.DYNAMIC_DRAW),Y.enableAttribute(b.color),B.vertexAttribPointer(b.color,3,B.FLOAT,!1,0,0));Y.disableUnusedAttributes();B.drawArrays(B.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,d,e,f){l(d);var" k="[];a=0;for(var" b[a],k.push([m,a]);k.sort(g);8<k.length&&(k.length="8);var" 0,p;if(c&&c.isinstancedbuffergeometry&&(p="ja.get("ANGLE_instanced_arrays"),null===p)){console.error("THREE.WebGLRenderer.setupVertexAttributes:" using="" three.instancedbuffergeometry="" but="" hardware="" does="" support="" angle_instanced_arrays.");break="" a}void="" q;for(q="" in="" h){var="" k)}else="" v.isinstancedbufferattribute?(y.enableattributeanddivisor(y,v.meshperattribute,p),void="" 2:b.vertexattrib2fv(y,w);break;case="" 3:b.vertexattrib3fv(y,w);break;case="" 4:b.vertexattrib4fv(y,w);break;default:b.vertexattrib1fv(y,w)}}}y.disableunusedattributes()}null!="=b&&B.bindBuffer(B.ELEMENT_ARRAY_BUFFER," qa.getattributebuffer(b))}p="0;null!==b?p=b.count:void" switch(e.drawmode){case="" 0:a.setmode(b.triangles);break;case="" 1:a.setmode(b.triangle_strip);break;case="" 2:a.setmode(b.triangle_fan)}else="" e.isline?(d="d.linewidth,void" d&&(d="1),Y.setLineWidth(d*(null===W?Ra:1)),e.isLineSegments?a.setMode(B.LINES):a.setMode(B.LINE_STRIP)):e.isPoints&&a.setMode(B.POINTS);c&&c.isInstancedBufferGeometry?0<c.maxInstancedCount&&a.renderInstances(c,q,f):a.render(q,f)}};this.render=function(a,b,c,d){if(void" camera="" is="" an="" instance="" of="" three.camera.");else{v="" ;r="-1;U=null;!0===a.autoUpdate&&a.updateMatrixWorld();null===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);" ua.multiplymatrices(b.projectionmatrix,b.matrixworldinverse);ma.setfrommatrix(ua);h.length="0;T=D=-1;M.length=0;O.length=0;ra=this.localClippingEnabled;oa=ca.init(this.clippingPlanes,ra,b);p(a,b);aa.length=D+1;z.length=T+1;!0===P.sortObjects&&(aa.sort(h),z.sort(m));oa&&ca.beginShadows();for(var" e[f],r="k.color,G=k.intensity,q=k.distance,y=k.shadow&&k.shadow.map?k.shadow.map.texture:null,k.isAmbientLight)t+=r.r*G,l+=r.g*G,u+=r.b*G;else" if(k.isdirectionallight){var="" y;ba.directionalshadowmatrix[w]="k.shadow.matrix;ba.directional[w++]=E}else" if(k.isspotlight){e="za.get(k);E.position.setFromMatrixPosition(k.matrixWorld);E.position.applyMatrix4(v);E.color.copy(r).multiplyScalar(G);E.distance=q;E.direction.setFromMatrixPosition(k.matrixWorld);Ga.setFromMatrixPosition(k.target.matrixWorld);E.direction.sub(Ga);E.direction.transformDirection(v);E.coneCos=Math.cos(k.angle);E.penumbraCos=Math.cos(k.angle*(1-k.penumbra));E.decay=0===k.distance?0:k.decay;if(E.shadow=k.castShadow)E.shadowBias=" k.shadow.bias,e.shadowradius="k.shadow.radius,E.shadowMapSize=k.shadow.mapSize;ba.spotShadowMap[K]=y;ba.spotShadowMatrix[K]=k.shadow.matrix;ba.spot[K++]=E}else" if(k.isrectarealight)e="za.get(k),E.color.copy(r).multiplyScalar(G/(k.width*k.height)),E.position.setFromMatrixPosition(k.matrixWorld),E.position.applyMatrix4(v),xa.identity(),Ba.copy(k.matrixWorld),Ba.premultiply(v),xa.extractRotation(Ba),E.halfWidth.set(.5*k.width,0,0),E.halfHeight.set(0,.5*k.height,0),E.halfWidth.applyMatrix4(xa),E.halfHeight.applyMatrix4(xa)," ba.rectarea[c++]="E;else" if(k.ispointlight){e="za.get(k);E.position.setFromMatrixPosition(k.matrixWorld);E.position.applyMatrix4(v);E.color.copy(k.color).multiplyScalar(k.intensity);E.distance=k.distance;E.decay=0===k.distance?0:k.decay;if(E.shadow=k.castShadow)E.shadowBias=k.shadow.bias,E.shadowRadius=k.shadow.radius,E.shadowMapSize=k.shadow.mapSize;ba.pointShadowMap[A]=y;void" s);ga.setfrommatrixposition(k.matrixworld).negate();ba.pointshadowmatrix[a].identity().setposition(ga);="" ba.point[a++]="E}else" k.ishemispherelight&&(e="za.get(k),E.direction.setFromMatrixPosition(k.matrixWorld),E.direction.transformDirection(v),E.direction.normalize(),E.skyColor.copy(k.color).multiplyScalar(G),E.groundColor.copy(k.groundColor).multiplyScalar(G),ba.hemi[L++]=E);ba.ambient[0]=t;ba.ambient[1]=l;ba.ambient[2]=u;ba.directional.length=w;ba.spot.length=K;ba.rectArea.length=C;ba.point.length=A;ba.hemi.length=L;ba.hash=w+","+A+","+K+","+C+","+L+","+ba.shadows.length;oa&&ca.endShadows();pa.calls=" 0;pa.vertices="0;pa.faces=0;pa.points=0;void" fa,va="new" aa(new="" kb(5,5,5),new="" ha({uniforms:bb.cube.uniforms,vertexshader:bb.cube.vertexshader,fragmentshader:bb.cube.fragmentshader,side:1,depthtest:!1,="" depthwrite:!1,fog:!1}))),sa.projectionmatrix.copy(b.projectionmatrix),sa.matrixworld.extractrotation(b.matrixworld),sa.matrixworldinverse.getinverse(sa.matrixworld),va.material.uniforms.tcube.value="e,va.modelViewMatrix.multiplyMatrices(sa.matrixWorldInverse,va.matrixWorld),qa.update(va),P.renderBufferDirect(sa,null,va.geometry,va.material,va,null)):e&&e.isTexture&&(void" jb(-1,1,1,-1,0,1),ca="new" lb(2,2),new="" ka({depthtest:!1,depthwrite:!1,fog:!1}))),ca.material.map="e,qa.update(Ca)," p.renderbufferdirect(ia,null,ca.geometry,ca.material,ca,null));a.overridematerial?(d="a.overrideMaterial,n(aa,a,b,d),n(z,a,b,d)):(Y.setBlending(0),n(aa,a,b),n(z,a,b));Pa.render(a,b);Qa.render(a,b,Z);c&&ta.updateRenderTargetMipmap(c);Y.setDepthTest(!0);Y.setDepthWrite(!0);Y.setColorWrite(!0)}};this.setFaceCulling=function(a,b){Y.setCullFace(a);Y.setFlipSided(0===b)};this.allocTextureUnit=function(){var">=la.maxTextures&&console.warn("WebGLRenderer: trying to use "+a+" texture units while this GPU supports only "+
la.maxTextures);ea+=1;return a};this.setTexture2D=function(){var a=!1;return function(b,c){b&&b.isWebGLRenderTarget&&(a||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);ta.setTexture2D(b,c)}}();this.setTexture=function(){var a=!1;return function(b,c){a||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),a=!0);ta.setTexture2D(b,c)}}();this.setTextureCube=function(){var a=
!1;return function(b,c){b&&b.isWebGLRenderTargetCube&&(a||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),a=!0),b=b.texture);b&&b.isCubeTexture||Array.isArray(b.image)&&6===b.image.length?ta.setTextureCube(b,c):ta.setTextureCubeDynamic(b,c)}}();this.getCurrentRenderTarget=function(){return W};this.setRenderTarget=function(a){(W=a)&&void 0===ha.get(a).__webglFramebuffer&&ta.setupRenderTarget(a);var b=a&&a.isWebGLRenderTargetCube,
c;a?(c=ha.get(a),c=b?c.__webglFramebuffer[a.activeCubeFace]:c.__webglFramebuffer,X.copy(a.scissor),Sa=a.scissorTest,Z.copy(a.viewport)):(c=null,X.copy(ga).multiplyScalar(Ra),Sa=ka,Z.copy(ia).multiplyScalar(Ra));N!==c&&(B.bindFramebuffer(B.FRAMEBUFFER,c),N=c);Y.scissor(X);Y.setScissorTest(Sa);Y.viewport(Z);b&&(b=ha.get(a.texture),B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,b.__webglTexture,a.activeMipMapLevel))};this.readRenderTargetPixels=
function(a,b,c,d,e,f){if(!1===(a&&a.isWebGLRenderTarget))console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");else{var g=ha.get(a).__webglFramebuffer;if(g){var h=!1;g!==N&&(B.bindFramebuffer(B.FRAMEBUFFER,g),h=!0);try{var k=a.texture,m=k.format,n=k.type;1023!==m&&w(m)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===
n||w(n)===B.getParameter(B.IMPLEMENTATION_COLOR_READ_TYPE)||1015===n&&(ja.get("OES_texture_float")||ja.get("WEBGL_color_buffer_float"))||1016===n&&ja.get("EXT_color_buffer_half_float")?B.checkFramebufferStatus(B.FRAMEBUFFER)===B.FRAMEBUFFER_COMPLETE?0<=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&b.readpixels(b,c,d,e,w(m),w(n),f):console.error("three.webglrenderer.readrendertargetpixels: 0="==b)this.calculateInverses();else" readpixels="" from="" rendertarget="" failed.="" framebuffer="" not="" complete."):console.error("three.webglrenderer.readrendertargetpixels:="" is="" in="" unsignedbytetype="" or="" implementation="" defined="" type.")}finally{h&&="" b.bindframebuffer(b.framebuffer,n)}}}}}function="" kb(a,b){this.name="" ;this.color="new" j(a);this.density="void" 0!="=b?b:2.5E-4}function" lb(a,b,c){this.name="" j(a);this.near="void" mb(){x.call(this);this.type="Scene" ;this.overridematerial="this.fog=this.background=null;this.autoUpdate=!0}function" zd(a,b,c,d,e){x.call(this);this.lensflares="[];this.positionScreen=new" q;this.customupdatecallback="void" 0;void="" nb(a){x.call(this);="" this.type="SpriteMaterial" j(16777215);this.map="null;this.rotation=0;this.lights=this.fog=!1;this.setValues(a)}function" dc(a){x.call(this);this.type="Sprite" ;this.material="void" nb}function="" ec(){x.call(this);this.type="LOD" ;object.defineproperties(this,{levels:{enumerable:!0,value:[]}})}function="" od(a,b,c){this.usevertextexture="void" s;a="a||[];this.bones=a.slice(0);this.useVertexTexture?(a=Math.sqrt(4*this.bones.length),a=N.nextPowerOfTwo(Math.ceil(a))," this.bonetextureheight="this.boneTextureWidth=a=Math.max(a,4),this.boneMatrices=new" float32array(this.bonetexturewidth*this.bonetextureheight*4),this.bonetexture="new" eb(this.bonematrices,this.bonetexturewidth,this.bonetextureheight,1023,1015)):this.bonematrices="new" float32array(16*this.bones.length);if(void="" if(this.bones.length="==b.length)this.boneInverses=b.slice(0);else" for(console.warn("three.skeleton="" boninverses="" the="" wrong="" length."),this.boneinverses="[],b=" 0,a="this.bones.length;b<a;b++)this.boneInverses.push(new" s)}function="" pd(){x.call(this);this.type="Bone" }function="" qd(a,b,c){aa.call(this,a,b);this.type="SkinnedMesh" ;this.bindmode="attached" ;this.bindmatrix="new" s;this.bindmatrixinverse="new" d,e="0,f=this.geometry.bones.length;e<f;++e)d=this.geometry.bones[e],b=new" pd,a.push(b),b.name="d.name,b.position.fromArray(d.pos),b.quaternion.fromArray(d.rotq),void" e="0;for(f=this.geometry.bones.length;e<f;++e)d=this.geometry.bones[e],-1!==d.parent&&null!==d.parent&&void" od(a,void="" 0,c),this.matrixworld)}function="" ia(a){x.call(this);this.type="LineBasicMaterial" j(16777215);this.linewidth="1;this.linejoin=this.linecap="round";this.lights=!1;this.setValues(a)}function" ua(a,b,c){if(1="==c)return" console.warn("three.line:="" parameter="" three.linepieces="" no="" longer="" supported.="" created="" three.linesegments="" instead."),="" new="" ga(a,b);x.call(this);this.type="Line" ;this.geometry="void" i;this.material="void" ia({color:16777215*math.random()})}function="" ga(a,b){ua.call(this,a,b);this.type="LineSegments" oa(a){x.call(this);this.type="PointsMaterial" mb(a,b){x.call(this);this.type="Points" oa({color:16777215*math.random()})}="" function="" fc(){x.call(this);this.type="Group" rd(a,b,c,d,e,f,g,h,m){function="" k(){requestanimationframe(k);a.readystate="">=a.HAVE_CURRENT_DATA&&(t.needsUpdate=!0)}ea.call(this,a,b,c,d,e,f,g,h,m);this.generateMipmaps=!1;var t=this;k()}function Nb(a,b,c,d,e,f,g,h,m,k,t,p){ea.call(this,null,f,g,h,m,k,d,e,t,p);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=this.flipY=!1}function sd(a,b,c,d,e,f,g,h,m){ea.call(this,a,b,c,d,e,f,g,h,m);this.needsUpdate=!0}function Gc(a,b,c,d,e,f,g,
h,m,k){k=void 0!==k?k:1026;if(1026!==k&&1027!==k)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&1026===k&&(c=1012);void 0===c&&1027===k&&(c=1020);ea.call(this,null,d,e,f,g,h,k,c,m);this.image={width:a,height:b};this.magFilter=void 0!==g?g:1003;this.minFilter=void 0!==h?h:1003;this.generateMipmaps=this.flipY=!1}function Ob(a){function b(a,b){return a-b}I.call(this);this.type="WireframeGeometry";var c=[],d,e,f,g,h=[0,0],m={},k,t=["a","b",
"c"];if(a&&a.isGeometry){var p=a.faces;d=0;for(f=p.length;d<f;d++){var n="p[d];for(e=0;3">e;e++)h[0]=n[t[e]],h[1]=n[t[(e+1)%3]],h.sort(b),k=h.toString(),void 0===m[k]&&(m[k]={index1:h[0],index2:h[1]})}for(k in m)d=m[k],t=a.vertices[d.index1],c.push(t.x,t.y,t.z),t=a.vertices[d.index2],c.push(t.x,t.y,t.z)}else if(a&&a.isBufferGeometry){var l,t=new q;if(null!==a.index){p=a.attributes.position;n=a.index;l=a.groups;0===l.length&&a.addGroup(0,n.count);a=0;for(g=l.length;a<g;++a)for(d=l[a],e=d.start,f=d.count, d="e,f=e+f;d<f;d+=3)for(e=0;3">e;e++)h[0]=n.getX(d+e),h[1]=n.getX(d+(e+1)%3),h.sort(b),k=h.toString(),void 0===m[k]&&(m[k]={index1:h[0],index2:h[1]});for(k in m)d=m[k],t.fromBufferAttribute(p,d.index1),c.push(t.x,t.y,t.z),t.fromBufferAttribute(p,d.index2),c.push(t.x,t.y,t.z)}else for(p=a.attributes.position,d=0,f=p.count/3;d<f;d++)for(e=0;3>e;e++)m=3*d+e,t.fromBufferAttribute(p,m),c.push(t.x,t.y,t.z),m=3*d+(e+1)%3,t.fromBufferAttribute(p,m),c.push(t.x,t.y,t.z)}this.addAttribute("position",new z(c,3))}
function Hc(a,b,c){T.call(this);this.type="ParametricGeometry";this.parameters={func:a,slices:b,stacks:c};this.fromBufferGeometry(new Pb(a,b,c));this.mergeVertices()}function Pb(a,b,c){I.call(this);this.type="ParametricBufferGeometry";this.parameters={func:a,slices:b,stacks:c};var d=[],e=[],f=[],g,h,m=b+1;for(g=0;g<=c;g++){var k="g/c;for(h=0;h<=b;h++){var" t="h/b,p=a(t,k);e.push(p.x,p.y,p.z);f.push(t,k)}}for(g=0;g<c;g++)for(h=0;h<b;h++)a=g*m+h+1,k=(g+1)*m+h+1,t=(g+1)*m+h,d.push(g*m+h,a,t),d.push(a,k," t);this.setindex(d);this.addattribute("position",new="" z(e,3));this.addattribute("uv",new="" z(f,2));this.computevertexnormals()}function="" ic(a,b,c,d){t.call(this);this.type="PolyhedronGeometry" ;this.parameters="{vertices:a,indices:b,radius:c,detail:d};this.fromBufferGeometry(new" ba(a,b,c,d));this.mergevertices()}function="" ba(a,b,c,d){function="" e(a){h.push(a.x,a.y,a.z)}function="" f(b,c){var="" d="3*b;c.x=a[d+0];c.y=a[d+1];c.z=a[d+2]}function" g(a,b,c,d){0="">d&&1===a.x&&(m[b]=a.x-1);0===c.x&&0===c.z&&(m[b]=d/2/Math.PI+
.5)}I.call(this);this.type="PolyhedronBufferGeometry";this.parameters={vertices:a,indices:b,radius:c,detail:d};c=c||1;var h=[],m=[];(function(a){for(var c=new q,d=new q,g=new q,h=0;h<b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var m="c,l=d,A=g,w=Math.pow(2,a),y=[],K,v;for(K=0;K<=w;K++){y[K]=[];var" e="m.clone().lerp(A,K/w),L=l.clone().lerp(A,K/w),C=w-K;for(v=0;v<=C;v++)y[K][v]=0===v&&K===w?E:E.clone().lerp(L,v/C)}for(K=0;K<w;K++)for(v=0;v<2*(w-K)-1;v++)m=Math.floor(v/2),0===v%2?(e(y[K][m+1])," e(y[k+1][m]),e(y[k][m])):(e(y[k][m+1]),e(y[k+1][m+1]),e(y[k+1][m]))}})(d||0);(function(a){for(var="" b="new" q,c="0;c<h.length;c+=3)b.x=h[c+0],b.y=h[c+1],b.z=h[c+2],b.normalize().multiplyScalar(a),h[c+0]=b.x,h[c+1]=b.y,h[c+2]=b.z})(c);(function(){for(var" a="new" q,b="0;b<h.length;b+=3)a.x=h[b+0],a.y=h[b+1],a.z=h[b+2],m.push(Math.atan2(a.z,-a.x)/2/Math.PI+.5,1-(Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5));for(var" q,d="new" q,e="new" d,f="new" d,l="new" d,a="0,w=0;A<h.length;A+=9,w+=" 6){a.set(h[a+0],h[a+1],h[a+2]);b.set(h[a+3],h[a+4],h[a+5]);c.set(h[a+6],h[a+7],h[a+8]);e.set(m[w+0],m[w+1]);f.set(m[w+2],m[w+3]);l.set(m[w+4],m[w+5]);d.copy(a).add(b).add(c).dividescalar(3);var="" y="Math.atan2(d.z,-d.x);g(e,w+0,a,y);g(f,w+2,b,y);g(l,w+4,c,y)}for(a=0;a<m.length;a+=6)b=m[a+0],c=m[a+2],d=m[a+4],e=Math.min(b,c,d),.9<Math.max(b,c,d)&&.1">e&&(.2>b&&(m[a+0]+=1),.2>c&&(m[a+2]+=1),.2>d&&(m[a+4]+=1))})();this.addAttribute("position",new z(h,3));this.addAttribute("normal",new z(h.slice(),3));this.addAttribute("uv",
new z(m,2));this.normalizeNormals()}function Jc(a,b){T.call(this);this.type="TetrahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Qb(a,b));this.mergeVertices()}function Qb(a,b){Ba.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,b);this.type="TetrahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Kc(a,b){T.call(this);this.type="OctahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new ob(a,b));this.mergeVertices()}
function ob(a,b){Ba.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,b);this.type="OctahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Lc(a,b){T.call(this);this.type="IcosahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Rb(a,b));this.mergeVertices()}function Rb(a,b){var c=(1+Math.sqrt(5))/2;Ba.call(this,[-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,
5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,b);this.type="IcosahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Mc(a,b){T.call(this);this.type="DodecahedronGeometry";this.parameters={radius:a,detail:b};this.fromBufferGeometry(new Sb(a,b));this.mergeVertices()}function Sb(a,b){var c=(1+Math.sqrt(5))/2,d=1/c;Ba.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-d,-c,0,-d,c,0,
d,-c,0,d,c,-d,-c,0,-d,c,0,d,-c,0,d,c,0,-c,0,-d,c,0,-d,-c,0,d,c,0,d],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,b);this.type="DodecahedronBufferGeometry";this.parameters={radius:a,detail:b}}function Nc(a,b,c,d,e,f){T.call(this);this.type="TubeGeometry";this.parameters={path:a,
tubularSegments:b,radius:c,radialSegments:d,closed:e};void 0!==f&&console.warn("THREE.TubeGeometry: taper has been removed.");a=new Tb(a,b,c,d,e);this.tangents=a.tangents;this.normals=a.normals;this.binormals=a.binormals;this.fromBufferGeometry(a);this.mergeVertices()}function Tb(a,b,c,d,e){function f(e){var f=a.getPointAt(e/b),k=g.normals[e];e=g.binormals[e];for(p=0;p<=d;p++){var 0="==b.bevelThickness&&(b.bevelThickness=10);void" t="p/d*Math.PI*2,r=Math.sin(t),t=-Math.cos(t);m.x=t*k.x+r*e.x;m.y=t*k.y+r*e.y;m.z=t*k.z+r*e.z;m.normalize();l.push(m.x," m.y,m.z);h.x="f.x+c*m.x;h.y=f.y+c*m.y;h.z=f.z+c*m.z;n.push(h.x,h.y,h.z)}}I.call(this);this.type="TubeBufferGeometry";this.parameters={path:a,tubularSegments:b,radius:c,radialSegments:d,closed:e};b=b||64;c=c||1;d=d||8;e=e||!1;var" g="a.computeFrenetFrames(b,e);this.tangents=g.tangents;this.normals=g.normals;this.binormals=g.binormals;var" h="new" q,m="new" q,k="new" d,t,p,n="[],l=[],G=[],r=[];for(t=0;t<b;t++)f(t);f(!1===e?b:0);for(t=0;t<=b;t++)for(p=0;p<=d;p++)k.x=t/b,k.y=p/d,G.push(k.x,k.y);(function(){for(p=" 1;p<="b;p++)for(t=1;t<=d;t++){var" a="(d+1)*p+(t-1),c=(d+1)*p+t,e=(d+1)*(p-1)+t;r.push((d+1)*(p-1)+(t-1),a,e);r.push(a,c,e)}})();this.setIndex(r);this.addAttribute("position",new" z(n,3));this.addattribute("normal",new="" z(l,3));this.addattribute("uv",new="" z(g,2))}function="" oc(a,b,c,d,e,f,g){t.call(this);this.type="TorusKnotGeometry" ;this.parameters="{radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};void" 0!="=g&&console.warn("THREE.TorusKnotGeometry:" heightscale="" has="" been="" deprecated.="" use="" .scale(="" x,="" y,="" z="" )="" instead.");="" this.frombuffergeometry(new="" ub(a,b,c,d,e,f));this.mergevertices()}function="" ub(a,b,c,d,e,f){function="" g(a,b,c,d,e){var="" f="Math.sin(a);b=c/b*a;c=Math.cos(b);e.x=d*(2+c)*.5*Math.cos(a);e.y=d*(2+c)*f*.5;e.z=d*Math.sin(b)*.5}I.call(this);this.type="TorusKnotBufferGeometry";this.parameters={radius:a,tube:b,tubularSegments:c,radialSegments:d,p:e,q:f};a=a||100;b=b||40;c=Math.floor(c)||64;d=Math.floor(d)||8;e=e||2;f=f||3;var" q,g="new" q;new="" d;var="" r="new" q,a="new" q,w="new" q,y="new" q;for(p="0;p<=c;++p)for(n=p/c*e*Math.PI*2,g(n,e,f,a,r),g(n+.01,e,f,a,A),y.subVectors(A,r),K.addVectors(A,r),w.crossVectors(y,K),K.crossVectors(w,y),w.normalize(),K.normalize(),n=0;n<=d;++n){var" v="n/d*Math.PI*2,E=-b*Math.cos(v),v=b*Math.sin(v);l.x=r.x+(E*K.x+v*w.x);l.y=r.y+(E*K.y+v*w.y);l.z=r.z+(E*K.z+v*w.z);m.push(l.x,l.y,l.z);G.subVectors(l,r).normalize();k.push(G.x,G.y,G.z);t.push(p/c);t.push(n/d)}for(n=1;n<=c;n++)for(p=1;p<=d;p++)a=(d+1)*n+(p-1),b=(d+1)*n+p,e=(d+1)*(n-1)+p,h.push((d+1)*(n-1)+" (p-1),a,e),h.push(a,b,e);this.setindex(h);this.addattribute("position",new="" z(m,3));this.addattribute("normal",new="" z(k,3));this.addattribute("uv",new="" z(t,2))}function="" pc(a,b,c,d,e){t.call(this);this.type="TorusGeometry" vb(a,b,c,d,e))}function="" vb(a,b,c,d,e){i.call(this);this.type="TorusBufferGeometry" 8;d="Math.floor(d)||6;e=e||2*Math.PI;var" q,t="new" q,p="new" q,n,l;for(n="0;n<=c;n++)for(l=0;l<=d;l++){var" this.addattribute("position",new="" z(g,3));this.addattribute("normal",new="" z(h,3));this.addattribute("uv",new="" z(m,2))}function="" la(a,b){"undefined"!="=typeof" a&&(t.call(this),this.type="ExtrudeGeometry" ,a="Array.isArray(a)?a:[a],this.addShapeList(a,b),this.computeFaceNormals())}function" qc(a,b){b="b||{};var" c="b.font;if(!1===(c&&c.isFont))return" console.error("three.textgeometry:="" font="" parameter="" is="" not="" an="" instance="" of="" three.font."),new="" t;c="c.generateShapes(a,b.size,b.curveSegments);b.amount=void" b.height:50;void="" rc(a,b,c,d,e,f,g){t.call(this);this.type="SphereGeometry" pb(a,b,c,d,e,f,g))}function="" pb(a,b,c,d,e,f,g){i.call(this);this.type="SphereBufferGeometry" widthsegments:b,heightsegments:c,phistart:d,philength:e,thetastart:f,thetalength:g};a="a||50;b=Math.max(3,Math.floor(b)||8);c=Math.max(2,Math.floor(c)||6);d=void" q,l="new" y="[],K=k/c;for(m=0;m<=b;m++){var" a.push(l.x,l.y,l.z);w.push(v,1-k);y.push(t++)}p.push(y)}for(k="0;k<c;k++)for(m=0;m<b;m++)a=p[k][m+1],d=p[k][m],e=p[k+1][m],g=p[k+1][m+1],(0!==k||0<f)&&G.push(a,d,g),(k!==c-1||h<Math.PI)&&G.push(d,e,g);this.setIndex(G);this.addAttribute("position",new" z(r,3));this.addattribute("normal",new="" z(a,3));this.addattribute("uv",new="" z(w,2))}function="" sc(a,b,c,d,e,f){t.call(this);this.type="RingGeometry" wb(a,="" b,c,d,e,f))}function="" wb(a,b,c,d,e,f){i.call(this);this.type="RingBufferGeometry" d,g,r;for(g="0;G<=d;G++){for(r=0;r<=c;r++)a=e+r/c*f,n.x=t*Math.cos(a),n.y=t*Math.sin(a),h.push(n.x,n.y,n.z),m.push(0,0,1),l.x=(n.x/b+1)/2,l.y=(n.y/b+1)/" 2,k.push(l.x,l.y);t+="p}for(G=0;G<d;G++)for(b=G*(c+1),r=0;r<c;r++)a=r+b,e=a+c+1,f=a+c+2,t=a+1,g.push(a,e,t),g.push(e,f,t);this.setIndex(g);this.addAttribute("position",new" z(h,3));this.addattribute("normal",new="" z(m,3));this.addattribute("uv",new="" z(k,2))}function="" tc(a,b,c,d){t.call(this);this.type="LatheGeometry" xb(a,b,c,d));this.mergevertices()}function="" xb(a,b,c,d){i.call(this);this.type="LatheBufferGeometry" ;="" this.parameters="{points:a,segments:b,phiStart:c,phiLength:d};b=Math.floor(b)||12;c=c||0;d=d||2*Math.PI;d=N.clamp(d,0,2*Math.PI);var" e="[],f=[],g=[],h=1/b,m=new" d,t,p;for(t="0;t<=b;t++){p=c+t*h*d;var" n="Math.sin(p),l=Math.cos(p);for(p=0;p<=a.length-1;p++)m.x=a[p].x*n,m.y=a[p].y,m.z=a[p].x*l,f.push(m.x,m.y,m.z),k.x=t/b,k.y=p/(a.length-1),g.push(k.x,k.y)}for(t=0;t<b;t++)for(p=0;p<a.length-1;p++)c=p+t*a.length,h=c+a.length,m=c+a.length+1,k=c+1,e.push(c,h,k),e.push(h,m,k);this.setIndex(e);this.addAttribute("position"," new="" z(f,3));this.addattribute("uv",new="" z(g,2));this.computevertexnormals();if(d="==2*Math.PI)for(d=this.attributes.normal.array,e=new" q,f="new" q,c="b*a.length*3,p=t=0;t<a.length;t++,p+=3)e.x=d[p+0],e.y=d[p+1],e.z=d[p+2],f.x=d[c+p+0],f.y=d[c+p+1],f.z=d[c+p+2],g.addVectors(e,f).normalize(),d[p+0]=d[c+p+0]=g.x,d[p+1]=d[c+p+1]=g.y,d[p+2]=d[c+p+2]=g.z}function" yb(a,b){t.call(this);this.type="ShapeGeometry" ;"object"="==typeof" b&&(console.warn("three.shapegeometry:="" options="" removed."),="" b="b.curveSegments);this.parameters={shapes:a,curveSegments:b};this.fromBufferGeometry(new" zb(a,b));this.mergevertices()}function="" zb(a,b){function="" c(a){var="" c,h,k="e.length/3;a=a.extractPoints(b);var" l="a.shape,r=a.holes;if(!1===Ia.isClockWise(l))for(l=l.reverse(),a=0,c=r.length;a<c;a++)h=r[a],!0===Ia.isClockWise(h)&&(r[a]=h.reverse());var" q="Ia.triangulateShape(l,r);a=0;for(c=r.length;a<c;a++)h=r[a],l=l.concat(h);a=0;for(c=l.length;a<c;a++)h=l[a],e.push(h.x,h.y,0),f.push(0,0,1),g.push(h.x,h.y);a=0;for(c=" q.length;a<c;a++)l="q[a],d.push(l[0]+k,l[1]+k,l[2]+k),m+=3}I.call(this);this.type="ShapeBufferGeometry";this.parameters={shapes:a,curveSegments:b};b=b||12;var" d="[],e=[],f=[],g=[],h=0,m=0;if(!1===Array.isArray(a))c(a);else" for(var="" k="0;k<a.length;k++)c(a[k]),this.addGroup(h,m,k),h+=m,m=0;this.setIndex(d);this.addAttribute("position",new" z(e,3));this.addattribute("normal",new="" $b(a,b){function="" c(a,b){return="" a-b}i.call(this);this.type="EdgesGeometry" t,k.frombuffergeometry(a)):k="a.clone();k.mergeVertices();k.computeFaceNormals();var" p="0,n=k.length;p<n;p++)for(var">q;q++)f[0]=l[m[q]],f[1]=l[m[(q+1)%3]],f.sort(c),h=f.toString(),void 0===g[h]?g[h]={index1:f[0],index2:f[1],face1:p,face2:void 0}:g[h].face2=p;for(h in g)if(f=g[h],void 0===f.face2||k[f.face1].normal.dot(k[f.face2].normal)<= 0="==a)throw" e)m="t[f.index1],d.push(m.x,m.y,m.z),m=t[f.index2],d.push(m.x,m.y,m.z);this.addAttribute("position",new" z(d,3))}function="" qb(a,b,c,d,e,f,g,h){t.call(this);this.type="CylinderGeometry" ;this.parameters="{radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};this.fromBufferGeometry(new" va(a,b,c,d,e,f,g,h));this.mergevertices()}function="" va(a,b,c,d,e,f,g,h){function="" m(c){var="" e,f,m,r="new" d,c="new" q,f="0,x=!0===c?a:b,H=!0===c?1:-1;f=G;for(e=1;e<=d;e++)p.push(0," a*h,0),n.push(0,h,0),l.push(.5,.5),g++;m="G;for(e=0;e<=d;e++){var" aa="e/d*h+g,z=Math.cos(aa),aa=Math.sin(aa);C.x=x*aa;C.y=A*H;C.z=x*z;p.push(C.x,C.y,C.z);n.push(0,H,0);r.x=.5*z+.5;r.y=.5*aa*H+.5;l.push(r.x,r.y);G++}for(e=0;e<d;e++)r=f+e,C=m+e,!0===c?t.push(C,C+1,r):t.push(C+1,C,r),F+=3;k.addGroup(w,F,!0===c?1:2);w+=F}I.call(this);this.type="CylinderBufferGeometry";this.parameters={radiusTop:a,radiusBottom:b,height:c,radialSegments:d,heightSegments:e,openEnded:f,thetaStart:g,thetaLength:h};var" k="this;" a="void" 0!="=a?a:20;b=void" t="[],p=[],n=[],l=[],G=0,r=[],A=c/2,w=0;(function(){var" f,m,v="new" q,e="new" q,l="0,C=(b-a)/c;for(m=0;m<=e;m++){var" f="[],x=m/e,H=x*(b-a)+a;for(f=0;f<=d;f++){var" d="f/d,z=D*h+g,J=Math.sin(z),z=Math.cos(z);E.x=H*J;E.y=-x*c+A;E.z=H*z;p.push(E.x,E.y,E.z);v.set(J,C,z).normalize();n.push(v.x,v.y,v.z);l.push(D,1-x);F.push(G++)}r.push(F)}for(f=0;f<d;f++)for(m=" 0;m<e;m++)v="r[m+1][f],E=r[m+1][f+1],C=r[m][f+1],t.push(r[m][f],v,C),t.push(v,E,C),L+=6;k.addGroup(w,L,0);w+=L})();!1===f&&(0<a&&m(!0),0<b&&m(!1));this.setIndex(t);this.addAttribute("position",new" z(p,3));this.addattribute("normal",new="" z(n,3));this.addattribute("uv",new="" z(l,2))}function="" uc(a,b,c,d,e,f,g){qb.call(this,0,a,b,c,d,e,f,g);this.type="ConeGeometry" vc(a,b,c,d,e,f,g){va.call(this,="" 0,a,b,c,d,e,f,g);this.type="ConeBufferGeometry" wc(a,b,c,d){t.call(this);this.type="CircleGeometry" ac(a,b,c,d))}function="" ac(a,b,c,d){i.call(this);this.type="CircleBufferGeometry" c?c:0;d="void" e="[],f=[],g=[],h=[],m,k,t=new" q,p="new" d;f.push(0,0,0);g.push(0,0,1);h.push(.5,.5);k="0;for(m=3;k<=b;k++,m+=3){var" n="c+k/b*d;t.x=a*Math.cos(n);t.y=a*Math.sin(n);f.push(t.x,t.y,t.z);g.push(0,0,1);p.x=(f[m]/a+1)/2;p.y=(f[m+1]/a+1)/2;h.push(p.x,p.y)}for(m=1;m<=b;m++)e.push(m,m+1,0);this.setIndex(e);this.addAttribute("position",new" z(f,3));this.addattribute("normal",new="" z(g,3));this.addattribute("uv",new="" z(h,2))}function="" bc(){ha.call(this,{uniforms:ja.merge([v.lights,="" {opacity:{value:1}}]),vertexshader:z.shadow_vert,fragmentshader:z.shadow_frag});this.transparent="this.lights=!0;Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return" this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value="a}}})}function" cc(a){ha.call(this,a);this.type="RawShaderMaterial" }function="" xc(a){this.uuid="N.generateUUID();this.type="MultiMaterial";this.materials=Array.isArray(a)?a:[];this.visible=!0}function" qa(a){x.call(this);this.defines="{STANDARD:""};" this.type="MeshStandardMaterial" ;this.color="new" j(16777215);this.metalness="this.roughness=.5;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" j(0);this.emissiveintensity="1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new" d(1,1);this.displacementmap="null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null;this.envMapIntensity=1;this.refractionRatio=" .98;this.wireframe="!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)}function" rb(a){qa.call(this);this.defines="{PHYSICAL:""};this.type="MeshPhysicalMaterial";this.reflectivity=.5;this.clearCoatRoughness=this.clearCoat=0;this.setValues(a)}function" ca(a){x.call(this);this.type="MeshPhongMaterial" j(16777215);this.specular="new" j(1118481);this.shininess="30;this.lightMap=this.map=null;" this.lightmapintensity="1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" this.morphtargets="this.skinning=!1;this.setValues(a)}function" sb(a){ca.call(this);this.defines="{TOON:""};this.type="MeshToonMaterial";this.gradientMap=null;this.setValues(a)}function" tb(a){x.call(this,a);this.type="MeshNormalMaterial" ;this.bumpmap="null;this.bumpScale=1;this.normalMap=null;this.normalScale=new" !1;this.setvalues(a)}function="" ub(a){x.call(this);this.type="MeshLambertMaterial" j(16777215);this.lightmap="this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new" this.skinning="!1;this.setValues(a)}function" vb(a){x.call(this);this.type="LineDashedMaterial" j(16777215);this.scale="this.linewidth=1;this.dashSize=3;this.gapSize=1;this.lights=!1;this.setValues(a)}function" $d(a,b,c){var="" 0;this.onload="a;this.onProgress=b;this.onError=c;this.itemStart=function(a){g++;if(!1===e&&void" d.onload))d.onload()};this.itemerror="function(a){if(void" sa(a){this.manager="void" re(a){this.manager="void" ae(a){this.manager="void" yc(a){this.manager="void" be(a){this.manager="void" td(a){this.manager="void" ma(a,b){x.call(this);this.type="Light" j(a);this.intensity="void" void="" 0}function="" ud(a,b,c){ma.call(this,a,c);this.type="HemisphereLight" ;this.castshadow="void" 0;this.position.copy(x.defaultup);this.updatematrix();this.groundcolor="new" j(b)}function="" wb(a){this.camera="a;this.bias=0;this.radius=1;this.mapSize=new" d(512,512);this.map="null;this.matrix=new" s}function="" vd(){wb.call(this,new="" fa(50,1,.5,500))}function="" wd(a,b,c,d,e,f){ma.call(this,a,b);this.type="SpotLight" ;this.position.copy(x.defaultup);this.updatematrix();this.target="new" x;object.defineproperty(this,"power",="" {get:function(){return="" this.intensity*math.pi},set:function(a){this.intensity="a/Math.PI}});this.distance=void" vd}function="" xd(a,b,c,d){ma.call(this,a,b);this.type="PointLight" ;object.defineproperty(this,"power",{get:function(){return="" 4*this.intensity*math.pi},set:function(a){this.intensity="a/(4*Math.PI)}});this.distance=void" wb(new="" fa(90,="" 1,.5,500))}function="" yd(){wb.call(this,new="" jb(-5,5,5,-5,.5,500))}function="" zd(a,b){ma.call(this,a,b);this.type="DirectionalLight" x;this.shadow="new" yd}function="" ad(a,b){ma.call(this,a,b);this.type="AmbientLight" xa(a,b,c,d){this.parameterpositions="a;this._cachedIndex=0;this.resultBuffer=void" b.constructor(c);this.samplevalues="b;this.valueSize=c}function" bd(a,b,c,d){xa.call(this,a,b,c,d);this._offsetnext="this._weightNext=this._offsetPrev=this._weightPrev=-0}function" zc(a,b,c,d){xa.call(this,a,b,c,d)}function="" cd(a,b,c,d){xa.call(this,a,b,c,d)}function="" xb(a,b,c,d){if(void="" error("track="" name="" is="" undefined");if(void="" error("no="" keyframes="" in="" track="" named="" "+a);this.name="a;this.times=na.convertArray(b,this.TimeBufferType);this.values=na.convertArray(c,this.ValueBufferType);this.setInterpolation(d||this.DefaultInterpolation);this.validate();this.optimize()}function" dc(a,b,="" c,d){xb.call(this,a,b,c,d)}function="" dd(a,b,c,d){xa.call(this,a,b,c,d)}function="" $c(a,b,c,d){xb.call(this,a,b,c,d)}function="" ec(a,b,c,d){xb.call(this,a,b,c,d)}function="" ed(a,b,c,d){xb.call(this,a,b,c,d)}function="" fd(a,b,c){xb.call(this,a,b,c)}function="" gd(a,b,c,d){xb.call(this,a,b,c,d)}function="" yb(a,b,c,d){xb.apply(this,arguments)}function="" qa(a,b,c){this.name="a;this.tracks=c;this.duration=void">this.duration&&this.resetDuration();this.optimize()}function Hd(a){this.manager=
void 0!==a?a:ta;this.textures={}}function ce(a){this.manager=void 0!==a?a:ta}function zb(){this.onLoadStart=function(){};this.onLoadProgress=function(){};this.onLoadComplete=function(){}}function de(a){"boolean"===typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0);this.manager=void 0!==a?a:ta;this.withCredentials=!1}function Se(a){this.manager=void 0!==a?a:ta;this.texturePath=""}function Te(a,b,c,d,e){b=.5*(d-b);e=.5*(e-c);var f=a*a;return(2*
c-2*d+b+e)*a*f+(-3*c+3*d-2*b-e)*f+b*a+c}function Ab(a,b,c,d){var e=1-a;return e*e*b+2*(1-a)*a*c+a*a*d}function Bb(a,b,c,d,e){var f=1-a,g=1-a;return f*f*f*b+3*g*g*a*c+3*(1-a)*a*a*d+a*a*a*e}function ua(){}function Ta(a,b){this.v1=a;this.v2=b}function ad(){this.curves=[];this.autoClose=!1}function Wa(a,b,c,d,e,f,g,h){this.aX=a;this.aY=b;this.xRadius=c;this.yRadius=d;this.aStartAngle=e;this.aEndAngle=f;this.aClockwise=g;this.aRotation=h||0}function Cb(a){this.points=void 0===a?[]:a}function fc(a,b,c,
d){this.v0=a;this.v1=b;this.v2=c;this.v3=d}function gc(a,b,c){this.v0=a;this.v1=b;this.v2=c}function bd(a){ad.call(this);this.currentPoint=new D;a&&this.fromPoints(a)}function Db(){bd.apply(this,arguments);this.holes=[]}function ee(){this.subPaths=[];this.currentPath=null}function fe(a){this.data=a}function Ue(a){this.manager=void 0!==a?a:ta}function ge(a){this.manager=void 0!==a?a:ta}function he(a,b,c,d){ma.call(this,a,b);this.type="RectAreaLight";this.position.set(0,1,0);this.updateMatrix();this.width=
void 0!==c?c:10;this.height=void 0!==d?d:10}function Ve(){this.type="StereoCamera";this.aspect=1;this.eyeSep=.064;this.cameraL=new Fa;this.cameraL.layers.enable(1);this.cameraL.matrixAutoUpdate=!1;this.cameraR=new Fa;this.cameraR.layers.enable(2);this.cameraR.matrixAutoUpdate=!1}function Id(a,b,c){x.call(this);this.type="CubeCamera";var d=new Fa(90,1,a,b);d.up.set(0,-1,0);d.lookAt(new q(1,0,0));this.add(d);var e=new Fa(90,1,a,b);e.up.set(0,-1,0);e.lookAt(new q(-1,0,0));this.add(e);var f=new Fa(90,
1,a,b);f.up.set(0,0,1);f.lookAt(new q(0,1,0));this.add(f);var g=new Fa(90,1,a,b);g.up.set(0,0,-1);g.lookAt(new q(0,-1,0));this.add(g);var h=new Fa(90,1,a,b);h.up.set(0,-1,0);h.lookAt(new q(0,0,1));this.add(h);var m=new Fa(90,1,a,b);m.up.set(0,-1,0);m.lookAt(new q(0,0,-1));this.add(m);this.renderTarget=new Gb(c,c,{format:1022,magFilter:1006,minFilter:1006});this.updateCubeMap=function(a,b){null===this.parent&&this.updateMatrixWorld();var c=this.renderTarget,n=c.texture.generateMipmaps;c.texture.generateMipmaps=
!1;c.activeCubeFace=0;a.render(b,d,c);c.activeCubeFace=1;a.render(b,e,c);c.activeCubeFace=2;a.render(b,f,c);c.activeCubeFace=3;a.render(b,g,c);c.activeCubeFace=4;a.render(b,h,c);c.texture.generateMipmaps=n;c.activeCubeFace=5;a.render(b,m,c);a.setRenderTarget(null)}}function ie(){x.call(this);this.type="AudioListener";this.context=je.getContext();this.gain=this.context.createGain();this.gain.connect(this.context.destination);this.filter=null}function hc(a){x.call(this);this.type="Audio";this.context=
a.context;this.gain=this.context.createGain();this.gain.connect(a.getInput());this.autoplay=!1;this.buffer=null;this.loop=!1;this.startTime=0;this.playbackRate=1;this.isPlaying=!1;this.hasPlaybackControl=!0;this.sourceType="empty";this.filters=[]}function ke(a){hc.call(this,a);this.panner=this.context.createPanner();this.panner.connect(this.gain)}function le(a,b){this.analyser=a.context.createAnalyser();this.analyser.fftSize=void 0!==b?b:2048;this.data=new Uint8Array(this.analyser.frequencyBinCount);
a.getOutput().connect(this.analyser)}function Jd(a,b,c){this.binding=a;this.valueSize=c;a=Float64Array;switch(b){case "quaternion":b=this._slerp;break;case "string":case "bool":a=Array;b=this._select;break;default:b=this._lerp}this.buffer=new a(4*c);this._mixBufferRegion=b;this.referenceCount=this.useCount=this.cumulativeWeight=0}function ka(a,b,c){this.path=b;this.parsedPath=c||ka.parseTrackName(b);this.node=ka.findNode(a,this.parsedPath.nodeName)||a;this.rootNode=a}function me(a){this.uuid=N.generateUUID();
this._objects=Array.prototype.slice.call(arguments);this.nCachedObjects_=0;var b={};this._indicesByUUID=b;for(var c=0,d=arguments.length;c!==d;++c)b[arguments[c].uuid]=c;this._paths=[];this._parsedPaths=[];this._bindings=[];this._bindingsIndicesByPath={};var e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}function ne(a,b,c){this._mixer=a;this._clip=b;this._localRoot=c||null;a=b.tracks;
b=a.length;c=Array(b);for(var d={endingStart:2400,endingEnd:2400},e=0;e!==b;++e){var f=a[e].createInterpolant(null);c[e]=f;f.settings=d}this._interpolantSettings=d;this._interpolants=c;this._propertyBindings=Array(b);this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null;this.loop=2201;this._loopCount=-1;this._startTime=null;this.time=0;this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1;this.repetitions=Infinity;this.paused=!1;this.enabled=
!0;this.clampWhenFinished=!1;this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function cd(a){this._root=a;this._initMemoryManager();this.time=this._accuIndex=0;this.timeScale=1}function Kd(a,b){"string"===typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=b);this.value=a}function Eb(){I.call(this);this.type="InstancedBufferGeometry";this.maxInstancedCount=void 0}function oe(a,b,c,d){this.uuid=N.generateUUID();this.data=a;this.itemSize=b;this.offset=c;this.normalized=!0===
d}function ic(a,b){this.uuid=N.generateUUID();this.array=a;this.stride=b;this.count=void 0!==a?a.length/b:0;this.dynamic=!1;this.updateRange={offset:0,count:-1};this.onUploadCallback=function(){};this.version=0}function jc(a,b,c){ic.call(this,a,b);this.meshPerAttribute=c||1}function kc(a,b,c){U.call(this,a,b);this.meshPerAttribute=c||1}function pe(a,b,c,d){this.ray=new cb(a,b);this.near=c||0;this.far=d||Infinity;this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}};Object.defineProperties(this.params,
{PointCloud:{get:function(){console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points.");return this.Points}}})}function We(a,b){return a.distance-b.distance}function qe(a,b,c,d){if(!1!==a.visible&&(a.raycast(b,c),!0===d)){a=a.children;d=0;for(var e=a.length;d<e;d++)qe(a[d],b,c,!0)}}function re(a){this.autostart="void" 0!="=a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1}function" se(a,b,c){this.radius="void" c?c:0;return="" this}function="" te(a,b,c){this.radius="void" oa(a,b){aa.call(this,a,b);this.animationsmap="{};this.animationsList=[];var" c="this.geometry.morphTargets.length;this.createAnimation("__default",0,c-1,c/1);this.setAnimationWeight("__default",1)}function" dd(a){x.call(this);this.material="a;this.render=function(a){}}function" ed(a,b,c,d){this.object="a;this.size=void" (c="this.object.geometry)&&c.isGeometry?b=3*c.faces.length:c&&c.isBufferGeometry&&(b=c.attributes.normal.count);c=new" i;b="new" z(6*b,3);c.addattribute("position",b);ga.call(this,c,new="" ia({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}function" lc(a){x.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;a=new" i;for(var="" b="[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],c=0,d=1;32">c;c++,d++){var e=c/32*Math.PI*2,f=d/32*
Math.PI*2;b.push(Math.cos(e),Math.sin(e),1,Math.cos(f),Math.sin(f),1)}a.addAttribute("position",new z(b,3));b=new ia({fog:!1});this.cone=new ga(a,b);this.add(this.cone);this.update()}function mc(a){this.bones=this.getBoneList(a);for(var b=new I,c=[],d=[],e=new J(0,0,1),f=new J(0,1,0),g=0;g<this.bones.length;g++){var 0="==b&&(b=1);var" h="this.bones[g];h.parent&&h.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),d.push(e.r,e.g,e.b),d.push(f.r,f.g,f.b))}b.addAttribute("position",new" z(c,3));b.addattribute("color",new="" z(d,3));="" c="new" ia({vertexcolors:2,depthtest:!1,depthwrite:!1,transparent:!0});ga.call(this,b,c);this.root="a;this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.update()}function" nc(a,b){this.light="a;this.light.updateMatrixWorld();var" pb(b,4,2),d="new" ka({wireframe:!0,fog:!1});d.color.copy(this.light.color).multiplyscalar(this.light.intensity);aa.call(this,c,d);this.matrix="this.light.matrixWorld;this.matrixAutoUpdate=!1}function" oc(a){x.call(this);this.light="a;this.light.updateMatrixWorld();var" b="new" ka({color:a.color,fog:!1});a="new" ka({color:a.color,fog:!1,wireframe:!0});var="" i;c.addattribute("position",new="" u(new="" float32array(18),3));this.add(new="" aa(c,b));this.add(new="" aa(c,a));this.update()}function="" pc(a,b){x.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;var" ob(b);c.rotatey(.5*math.pi);var="" d="new" ka({vertexcolors:2,wireframe:!0}),e="c.getAttribute("position"),e=new" float32array(3*e.count);c.addattribute("color",new="" u(e,="" 3));this.add(new="" aa(c,d));this.update()}function="" fd(a,b,c,d){a="a||10;b=b||10;c=new" j(void="" 0!="=c?c:4473924);d=new" e="b/2,f=a/b,g=a/2;a=[];for(var" l="m===e?c:d;l.toArray(h,k);k+=3;l.toArray(h,k);k+=3;l.toArray(h,k);k+=3;l.toArray(h,k);k+=3}b=new" i;b.addattribute("position",new="" z(a,3));b.addattribute("color",new="" z(h,3));c="new" ia({vertexcolors:2});ga.call(this,b,c)}function="" ld(a,b,c,d,e,f){a="a||10;" g="[],h=[],m,k,t,l,n;for(t=0;t<=b;t++)k=t/b*2*Math.PI,m=Math.sin(k)*a,k=Math.cos(k)*a,g.push(0,0,0),g.push(m,0,k),n=t&1?e:f,h.push(n.r,n.g,n.b),h.push(n.r,n.g,n.b);for(t=0;t<=c;t++)for(n=t&1?e:f,l=a-a/c*t,b=0;b<d;b++)k=b/d*2*Math.PI,m=Math.sin(k)*l,k=Math.cos(k)*l,g.push(m,0,k),h.push(n.r,n.g,n.b),k=(b+1)/d*2*Math.PI,m=Math.sin(k)*l,k=Math.cos(k)*l,g.push(m,0,k),h.push(n.r,n.g,n.b);a=new" i;a.addattribute("position",="" new="" z(g,3));a.addattribute("color",new="" z(h,3));g="new" ia({vertexcolors:2});ga.call(this,a,g)}function="" gd(a,b,c,d){this.object="a;this.size=void" only="" three.geometry="" is="" supported.="" use="" three.vertexnormalshelper,="" instead.");c="new" i;b="new" z(6*b,3);c.addattribute("position",b);ga.call(this,c,new="" ia({color:a,linewidth:d}));this.matrixautoupdate="!1;this.update()}" function="" qc(a,b){x.call(this);this.light="a;this.light.updateMatrixWorld();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;void" z([-b,b,0,b,b,0,b,-b,0,-b,-b,0,-b,b,0],3));var="" ia({fog:!1});this.add(new="" ua(c,d));c="new" z([0,0,0,0,0,1],3));this.add(new="" ua(c,d));this.update()}function="" hd(a){function="" b(a,b,d){c(a,d);c(b,d)}function="" c(a,b){f.push(0,0,0);g.push(b.r,b.g,b.b);void="" 3-1)}var="" i,e="new" ia({color:16777215,vertexcolors:1}),f="[],g=[],h={},m=new" j(16755200),k="new" j(16711680),l="new" j(43775),p="new" j(16777215),n="new" j(3355443);b("n1","n2",m);b("n2","n4",m);b("n4","n3",m);b("n3","n1",m);b("f1","f2",m);b("f2","f4",m);b("f4","f3",m);b("f3","f1",m);b("n1","f1",m);b("n2","f2",m);b("n3","f3",m);b("n4","f4",m);b("p","n1",k);b("p","n2",k);b("p","n3",k);b("p","n4",k);b("u1","u2",l);b("u2","u3",l);b("u3","u1",l);b("c","t",p);b("p","c",n);b("cn1","cn2",n);b("cn3","cn4",n);="" b("cf1","cf2",n);b("cf3","cf4",n);d.addattribute("position",new="" z(f,3));d.addattribute("color",new="" z(g,3));ga.call(this,d,e);this.camera="a;this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix();this.matrix=a.matrixWorld;this.matrixAutoUpdate=!1;this.pointMap=h;this.update()}function" rc(a,b){void="" uint16array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),d="new" float32array(24),e="new" i;e.setindex(new="" u(c,1));e.addattribute("position",new="" u(d,3));ga.call(this,="" e,new="" ia({color:b}));void="" fb(a,b,c,d,e,f){x.call(this);void="" i,md.addattribute("position",new="" z([0,0,0,0,1,0],3)),ue="new" va(0,.5,1,5,1),ue.translate(0,-.5,0));this.position.copy(b);this.line="new" ua(md,new="" ia({color:d}));this.line.matrixautoupdate="!1;this.add(this.line);this.cone=new" aa(ue,new="" ka({color:d}));this.cone.matrixautoupdate="!1;this.add(this.cone);this.setDirection(a);" this.setlength(c,e,f)}function="" nd(a){a="a||1;var" i;a.addattribute("position",new="" z(b,3));a.addattribute("color",new="" z([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));b="new" ia({vertexcolors:2});ga.call(this,a,b)}function="" ve(){var="" a="0,b=0,c=0,d=0;return{initCatmullRom:function(e,f,g,h,m){e=m*(g-e);h=m*(h-f);a=f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},initNonuniformCatmullRom:function(e,f,g,h,m,k,l){e=((f-e)/m-(g-e)/(m+k)+(g-f)/k)*k;h=((g-f)/k-(h-f)/(k+l)+(h-g)/" l)*k;a="f;b=e;c=-3*f+3*g-2*e-h;d=2*f-2*g+e+h},calc:function(e){var" f="e*e;return" a+b*e+c*f+d*f*e}}}function="" va(a){this.points="a||[];this.closed=!1}function" id(a,b,c,d){this.v0="a;this.v1=b;this.v2=c;this.v3=d}function" jd(a,b,c){this.v0="a;this.v1=b;this.v2=c}function" kd(a,b){this.v1="a;this.v2=b}function" od(a,b,c,d,e,f){wa.call(this,a,b,c,c,d,e,f)}function="" xe(a){console.warn("three.closedsplinecurve3="" has="" been="" deprecated.="" three.catmullromcurve3="" instead.");va.call(this,a);this.type="catmullrom" ;this.closed="!0}function" ye(a){console.warn("three.splinecurve3="" }function="" we(a){console.warn("three.spline="" removed.="" }void="">a?-1:0<a?1:+a});void 0="==Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return" this.tostring().match(="" ^\s*function\s*([^\(\s]*)="" )[1]}});="" void="" new="" typeerror("cannot="" convert="" undefined="" or="" null="" to="" object");for(var="" b="Object(a),c=1;c<arguments.length;c++){var" d="arguments[c];if(void" 0!="=d&&null!==d)for(var" e="" in="" d)object.prototype.hasownproperty.call(d,e)&&(b[e]="d[e])}return" b}}();pa.prototype="{addEventListener:function(a,b){void" c="this._listeners;void" b){if(void="" n="{DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var" a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz" .split(""),b="Array(36),c=0,d;return" function(){for(var="">e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,
b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a="">=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*N.DEG2RAD},radToDeg:function(a){return a*N.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,
Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};D.prototype={constructor:D,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,b){this.x=a;this.y=b;return this},setScalar:function(a){this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;
case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;
this.y+=a.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;return this},subScalar:function(a){this.x-=a;this.y-=a;return this},subVectors:function(a,b){this.x=
a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},clamp:function(a,b){this.x=Math.max(a.x,
Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new D,b=new D);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},
angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,
a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);return this},rotateAround:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=this.x-
a.x,f=this.y-a.y;this.x=e*c-f*d+a.x;this.y=e*d+f*c+a.y;return this}};var Ze=0;ea.DEFAULT_IMAGE=void 0;ea.DEFAULT_MAPPING=300;ea.prototype={constructor:ea,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.image=a.image;this.mipmaps=a.mipmaps.slice(0);this.mapping=a.mapping;this.wrapS=a.wrapS;this.wrapT=a.wrapT;this.magFilter=a.magFilter;this.minFilter=a.minFilter;this.anisotropy=a.anisotropy;this.format=a.format;
this.type=a.type;this.offset.copy(a.offset);this.repeat.copy(a.repeat);this.generateMipmaps=a.generateMipmaps;this.premultiplyAlpha=a.premultiplyAlpha;this.flipY=a.flipY;this.unpackAlignment=a.unpackAlignment;this.encoding=a.encoding;return this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var b={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,
this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var c=this.image;void 0===c.uuid&&(c.uuid=N.generateUUID());if(void 0===a.images[c.uuid]){var d=a.images,e=c.uuid,f=c.uuid,g;void 0!==c.toDataURL?g=c:(g=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g.width=c.width,g.height=c.height,g.getContext("2d").drawImage(c,0,0,c.width,c.height));g=2048<g.width||2048<g.height?g.todataurl("image jpeg",="" .6):g.todataurl("image="" png");d[e]="{uuid:f,url:g}}b.image=c.uuid}return" a.textures[this.uuid]="b},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(300===this.mapping){a.multiply(this.repeat);a.add(this.offset);if(0">a.x||1<a.x)switch(this.wraps){case 1e3:a.x-="Math.floor(a.x);break;case" 1001:a.x="0">a.x?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(0>a.y||1<a.y)switch(this.wrapt){case 1e3:a.y-="Math.floor(a.y);break;case" 1001:a.y="0">a.y?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}};Object.assign(ea.prototype,pa.prototype);fa.prototype={constructor:fa,isVector4:!0,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setScalar:function(a){this.w=this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},
setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?
a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;this.w+=a.w*b;
return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;this.w-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):this.w=this.z=
this.y=this.x=0;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=a.y/b,this.z=a.z/b);return this},
setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],m=a[9];c=a[2];b=a[6];var k=a[10];if(.01>Math.abs(d-g)&&.01>Math.abs(f-c)&&.01>Math.abs(m-b)){if(.1>Math.abs(d+g)&&.1>Math.abs(f+c)&&.1>Math.abs(m+b)&&.1>Math.abs(e+h+k-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;k=(k+1)/2;d=(d+g)/4;f=(f+c)/4;m=(m+b)/4;e>h&&e>k?.01>e?(b=0,d=c=.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>k?.01>h?(b=.707106781,c=0,d=.707106781):(c=Math.sqrt(h),
b=d/c,d=m/c):.01>k?(c=b=.707106781,d=0):(d=Math.sqrt(k),b=f/d,c=m/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-m)*(b-m)+(f-c)*(f-c)+(g-d)*(g-d));.001>Math.abs(a)&&(a=1);this.x=(b-m)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+k-1)/2);return this},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);this.w=Math.min(this.w,a.w);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);
this.w=Math.max(this.w,a.w);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));this.w=Math.max(a.w,Math.min(b.w,this.w));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new fa,b=new fa);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);
return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);
return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=
[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);this.w=a.getW(b);return this}};Ya.prototype={constructor:Ya,isWebGLRenderTarget:!0,setSize:function(a,b){if(this.width!==a||this.height!==b)this.width=a,this.height=b,this.dispose();this.viewport.set(0,0,a,b);this.scissor.set(0,0,a,
b)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.width=a.width;this.height=a.height;this.viewport.copy(a.viewport);this.texture=a.texture.clone();this.depthBuffer=a.depthBuffer;this.stencilBuffer=a.stencilBuffer;this.depthTexture=a.depthTexture;return this},dispose:function(){this.dispatchEvent({type:"dispose"})}};Object.assign(Ya.prototype,pa.prototype);Gb.prototype=Object.create(Ya.prototype);Gb.prototype.constructor=Gb;Gb.prototype.isWebGLRenderTargetCube=!0;
ca.prototype={constructor:ca,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){this._x=
a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!1===(a&&a.isEuler))throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=Math.cos(a._x/2),d=Math.cos(a._y/2),e=Math.cos(a._z/2),f=Math.sin(a._x/2),g=Math.sin(a._y/2),h=Math.sin(a._z/2),m=a.order;"XYZ"===m?(this._x=f*d*e+c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"YXZ"===m?(this._x=f*d*e+c*g*h,this._y=c*g*
e-f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"ZXY"===m?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e-f*g*h):"ZYX"===m?(this._x=f*d*e-c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e+f*g*h):"YZX"===m?(this._x=f*d*e+c*g*h,this._y=c*g*e+f*d*h,this._z=c*d*h-f*g*e,this._w=c*d*e-f*g*h):"XZY"===m&&(this._x=f*d*e-c*g*h,this._y=c*g*e-f*d*h,this._z=c*d*h+f*g*e,this._w=c*d*e+f*g*h);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,b){var c=
b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],m=b[6],b=b[10],k=c+f+b;0<k?(c=.5 math.sqrt(k+1),this._w=".25/c,this._x=(m-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c">f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(m-g)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=.25*c,
this._z=(g+m)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+m)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new q);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=-1;this._y*=
-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},multiply:function(a,
b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,m=b._z,k=b._w;this._x=c*k+f*g+d*m-e*h;this._y=d*k+f*h+e*g-c*m;this._z=e*k+f*m+c*h-d*g;this._w=f*k-c*g-d*h-e*m;this.onChangeCallback();return this},slerp:function(a,
b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a);if(1<=g)return this._w="f,this._x=c,this._y=d,this._z=e,this;var" h="Math.sqrt(1-g*g);if(.001">Math.abs(h))return this._w=.5*(f+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var m=Math.atan2(h,g),g=Math.sin((1-b)*m)/h,h=Math.sin(b*m)/h;this._w=f*g+this._w*h;this._x=
c*g+this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},
onChangeCallback:function(){}};Object.assign(ca,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,d)},slerpFlat:function(a,b,c,d,e,f,g){var h=c[d+0],m=c[d+1],k=c[d+2];c=c[d+3];d=e[f+0];var l=e[f+1],p=e[f+2];e=e[f+3];if(c!==e||h!==d||m!==l||k!==p){f=1-g;var n=h*d+m*l+k*p+c*e,u=0<=n?1:-1,q=1-n*n;q>Number.EPSILON&&(q=Math.sqrt(q),n=Math.atan2(q,n*u),f=Math.sin(f*n)/q,g=Math.sin(g*n)/q);u*=g;h=h*f+d*u;m=m*f+l*u;k=k*f+p*u;c=c*f+e*u;f===1-g&&(g=1/Math.sqrt(h*h+m*m+k*k+c*c),h*=g,m*=g,k*=g,c*=g)}a[b]=h;a[b+
1]=m;a[b+2]=k;a[b+3]=c}});q.prototype={constructor:q,isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=
a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===(b&&
b.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new ca);return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new ca);return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=
this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this.divideScalar(a[3]*b+a[7]*c+a[11]*d+a[15])},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,m=a*c+g*b-e*d,k=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+m*-g-k*-f;this.y=m*a+b*-f+k*-e-h*-g;this.z=k*a+b*-g+h*-f-m*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new S);a.multiplyMatrices(b.projectionMatrix,
a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new S);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/
a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new q,b=new q);a.set(c,c,c);b.set(d,d,d);return this.clamp(a,
b)}}(),clampLength:function(a,b){var c=this.length();return this.multiplyScalar(Math.max(a,Math.min(b,c))/c)},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);
this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-
d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;this.z=c*g-d*f;return this},projectOnVector:function(a){var b=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new q);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new q);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=
this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(N.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},
setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){if("number"===typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");
var c=a;a=b;b=c}return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);
return this}};S.prototype={constructor:S,isMatrix4:!0,set:function(a,b,c,d,e,f,g,h,m,k,l,p,n,u,q,r){var A=this.elements;A[0]=a;A[4]=b;A[8]=c;A[12]=d;A[1]=e;A[5]=f;A[9]=g;A[13]=h;A[2]=m;A[6]=k;A[10]=l;A[14]=p;A[3]=n;A[7]=u;A[11]=q;A[15]=r;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new S).fromArray(this.elements)},copy:function(a){this.elements.set(a.elements);return this},copyPosition:function(a){var b=this.elements;a=a.elements;
b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a;return function(b){void 0===a&&(a=new q);var c=this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),f=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();
c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*f;c[5]=d[5]*f;c[6]=d[6]*f;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){a=f*h;var m=f*e,k=c*h,l=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=m+
k*d;b[5]=a-l*d;b[9]=-c*g;b[2]=l-a*d;b[6]=k+m*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,m=g*e,k=d*h,l=d*e,b[0]=a+l*c,b[4]=k*c-m,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=m*c-k,b[6]=l+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,m=g*e,k=d*h,l=d*e,b[0]=a-l*c,b[4]=-f*e,b[8]=k+m*c,b[1]=m+k*c,b[5]=f*h,b[9]=l-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,m=f*e,k=c*h,l=c*e,b[0]=g*h,b[4]=k*d-m,b[8]=a*d+l,b[1]=g*e,b[5]=l*d+a,b[9]=m*d-k,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,m=f*d,k=c*g,l=c*d,b[0]=
g*h,b[4]=l-a*e,b[8]=k*e+m,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=m*e+k,b[10]=a-l*e):"XZY"===a.order&&(a=f*g,m=f*d,k=c*g,l=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+l,b[5]=f*h,b[9]=m*e-k,b[2]=k*e-m,b[6]=c*h,b[10]=l*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,m=e+e;a=c*g;var k=c*h,c=c*m,l=d*h,d=d*m,e=e*m,g=f*g,h=f*h,f=f*m;b[0]=1-(l+e);b[4]=k-f;b[8]=c+h;b[1]=k+f;b[5]=1-(a+e);b[9]=
d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+l);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a,b,c;return function(d,e,f){void 0===a&&(a=new q,b=new q,c=new q);var g=this.elements;c.subVectors(d,e).normalize();0===c.lengthSq()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.lengthSq()&&(c.z+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==
b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],m=c[12],k=c[1],l=c[5],p=c[9],n=c[13],u=c[2],q=c[6],r=c[10],A=c[14],w=c[3],y=c[7],K=c[11],c=c[15],v=d[0],E=d[4],L=d[8],C=d[12],F=d[1],x=d[5],H=d[9],D=d[13],z=d[2],J=d[6],
I=d[10],Q=d[14],M=d[3],O=d[7],P=d[11],d=d[15];e[0]=f*v+g*F+h*z+m*M;e[4]=f*E+g*x+h*J+m*O;e[8]=f*L+g*H+h*I+m*P;e[12]=f*C+g*D+h*Q+m*d;e[1]=k*v+l*F+p*z+n*M;e[5]=k*E+l*x+p*J+n*O;e[9]=k*L+l*H+p*I+n*P;e[13]=k*C+l*D+p*Q+n*d;e[2]=u*v+q*F+r*z+A*M;e[6]=u*E+q*x+r*J+A*O;e[10]=u*L+q*H+r*I+A*P;e[14]=u*C+q*D+r*Q+A*d;e[3]=w*v+y*F+K*z+c*M;e[7]=w*E+y*x+K*J+c*O;e[11]=w*L+y*H+K*I+c*P;e[15]=w*C+y*D+K*Q+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=
d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a;return function(b){void 0===a&&(a=new q);for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c), 0="==a&&(a=new" a.applymatrix4(this),b.setxyz(c,a.x,a.y,a.z);return="" b}}(),determinant:function(){var="" a="this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],m=a[13],k=a[2],l=a[6],p=a[10],n=a[14];return" a[3]*(+e*h*l-d*m*l-e*g*p+c*m*p+d*g*n-c*h*n)+a[7]*(+b*h*n-b*m*p+e*f*p-d*f*n+d*m*k-e*h*k)+a[11]*(+b*m*l-b*g*n-e*f*l+c*f*n+e*g*k-c*m*k)+a[15]*(-d*g*k-b*h*l+b*g*p+d*f*l-c*f*p+c*h*k)},transpose:function(){var="" a[12];a[12]="b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return" this},setposition:function(a){var="" b="this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return" this},getinverse:function(a,b){var="" c="this.elements,d=a.elements,e=d[0],f=d[1],g=d[2],h=d[3],m=d[4],k=d[5],l=d[6],p=d[7],n=d[8],u=d[9],q=d[10],r=d[11],A=d[12],w=d[13],y=d[14],d=d[15],K=u*y*p-w*q*p+w*l*r-k*y*r-u*l*d+k*q*d,v=A*q*p-n*y*p-A*l*r+m*y*r+n*l*d-m*q*d,E=n*w*p-A*u*p+A*k*r-m*w*r-n*k*d+m*u*d,L=A*u*l-n*w*l-A*k*q+m*w*q+n*k*y-m*u*y,C=e*K+" f*v+g*e+h*l;if(0="==C){if(!0===b)throw" error("three.matrix4.getinverse():="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("three.matrix4.getinverse():="" 0");return="" this.identity()}c="1/C;c[0]=K*C;c[1]=(w*q*h-u*y*h-w*g*r+f*y*r+u*g*d-f*q*d)*C;c[2]=(k*y*h-w*l*h+w*g*p-f*y*p-k*g*d+f*l*d)*C;c[3]=(u*l*h-k*q*h-u*g*p+f*q*p+k*g*r-f*l*r)*C;c[4]=v*C;c[5]=(n*y*h-A*q*h+A*g*r-e*y*r-n*g*d+e*q*d)*C;c[6]=(A*l*h-m*y*h-A*g*p+e*y*p+m*g*d-e*l*d)*C;c[7]=(m*q*h-n*l*h+n*g*p-e*q*p-m*g*" r+e*l*r)*c;c[8]="E*C;c[9]=(A*u*h-n*w*h-A*f*r+e*w*r+n*f*d-e*u*d)*C;c[10]=(m*w*h-A*k*h+A*f*p-e*w*p-m*f*d+e*k*d)*C;c[11]=(n*k*h-m*u*h-n*f*p+e*u*p+m*f*r-e*k*r)*C;c[12]=L*C;c[13]=(n*w*g-A*u*g+A*f*q-e*w*q-n*f*y+e*u*y)*C;c[14]=(A*k*g-m*w*g-A*f*l+e*w*l+m*f*y-e*k*y)*C;c[15]=(m*u*g-n*k*g+n*f*l-e*u*l-m*f*q+e*k*q)*C;return" this},scale:function(a){var="" this},getmaxscaleonaxis:function(){var="" math.sqrt(math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},maketranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return="" this},makerotationx:function(a){var="" this},makerotationy:function(a){var="" this},makerotationz:function(a){var="" this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return="" this},makerotationaxis:function(a,b){var="" this},makescale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return="" this},makeshear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return="" this},compose:function(a,b,c){this.makerotationfromquaternion(b);this.scale(c);this.setposition(a);="" return="" this},decompose:function(){var="" a,b;return="" function(c,d,e){void="" q,b="new" s);var="" f="this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),m=a.set(f[8],f[9],f[10]).length();0">this.determinant()&&(g=-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,k=1/m;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=k;b.elements[9]*=k;b.elements[10]*=k;d.setFromRotationMatrix(b);
e.x=g;e.y=h;e.z=m;return this}}(),makePerspective:function(a,b,c,d,e,f){void 0===f&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(c-d);g[9]=(c+d)/(c-d);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=1/(b-a),m=1/(c-d),k=1/(f-e);g[0]=
2*h;g[4]=0;g[8]=0;g[12]=-((b+a)*h);g[1]=0;g[5]=2*m;g[9]=0;g[13]=-((c+d)*m);g[2]=0;g[6]=0;g[10]=-2*k;g[14]=-((f+e)*k);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];
a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}};Za.prototype=Object.create(ea.prototype);Za.prototype.constructor=Za;Za.prototype.isCubeTexture=!0;Object.defineProperty(Za.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var Ee=new ea,Fe=new Za,Be=[],De=[];Je.prototype.setValue=function(a,b){for(var c=this.seq,d=0,e=c.length;d!==e;++d){var f=c[d];f.setValue(a,
b[f.id])}};var Rd=/([\w\d_]+)(\])?(\[|\.)?/g;$a.prototype.setValue=function(a,b,c){b=this.map[b];void 0!==b&&b.setValue(a,c,this.renderer)};$a.prototype.set=function(a,b,c){var d=this.map[c];void 0!==d&&d.setValue(a,b[c],this.renderer)};$a.prototype.setOptional=function(a,b,c){b=b[c];void 0!==b&&this.setValue(a,c,b)};$a.upload=function(a,b,c,d){for(var e=0,f=b.length;e!==f;++e){var g=b[e],h=c[g.id];!1!==h.needsUpdate&&g.setValue(a,h.value,d)}};$a.seqWithValue=function(a,b){for(var c=[],d=0,e=a.length;d!==
e;++d){var f=a[d];f.id in b&&c.push(f)}return c};var Ja={merge:function(a){for(var b={},c=0;c<a.length;c++){var d="this.clone(a[c]),e;for(e" in="" d)b[e]="d[e]}return" b},clone:function(a){var="" b="{},c;for(c" a){b[c]="{};for(var" a[c]){var="" e="a[c][d];e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?b[c][d]=e.clone():Array.isArray(e)?b[c][d]=e.slice():b[c][d]=e}}return" b}},z="{alphamap_fragment:"#ifdef" use_alphamap\n\tdiffusecolor.a="" *="texture2D(" alphamap,="" vuv="" ).g;\n#endif\n",="" alphamap_pars_fragment:"#ifdef="" use_alphamap\n\tuniform="" sampler2d="" alphamap;\n#endif\n",alphatest_fragment:"#ifdef="" alphatest\n\tif="" (="" diffusecolor.a="" <="" alphatest="" )="" discard;\n#endif\n",aomap_fragment:"#ifdef="" use_aomap\n\tfloat="" ambientocclusion="(" texture2d(="" aomap,="" vuv2="" ).r="" -="" 1.0="" aomapintensity="" +="" 1.0;\n\treflectedlight.indirectdiffuse="" defined(="" use_envmap="" &&="" physical="" )\n\t\tfloat="" dotnv="saturate(" dot(="" geometry.normal,="" geometry.viewdir="" );\n\t\treflectedlight.indirectspecular="" dotnv,="" ambientocclusion,="" material.specularroughness="" );\n\t#endif\n#endif\n",="" aomap_pars_fragment:"#ifdef="" use_aomap\n\tuniform="" aomap;\n\tuniform="" float="" aomapintensity;\n#endif",begin_vertex:"\nvec3="" transformed="vec3(" position="" );\n",beginnormal_vertex:"\nvec3="" objectnormal="vec3(" normal="" );\n",bsdfs:"float="" punctuallightintensitytoirradiancefactor(="" const="" lightdistance,="" cutoffdistance,="" decayexponent="" {\n\t\tif(=""> 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",
clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",
clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",
color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",
defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",
emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",
envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",
envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",
envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",
fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",
gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",
lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",
lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",
lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",
logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",
map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",
metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",
morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",
normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",
packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",
roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0,="" shadowcoord.y="">= 0.0, shadowCoord.y <= 1.0="" );\n\t\tbool="" infrustum="all(" infrustumvec="" );\n\t\tbvec2="" frustumtestvec="bvec2(" infrustum,="" shadowcoord.z="" <="1.0" frustumtest="all(" );\n\t\tif="" (="" )="" {\n\t\t#if="" defined(="" shadowmap_type_pcf="" )\n\t\t\tvec2="" texelsize="vec2(" shadowmapsize;\n\t\t\tfloat="" dx0="-" texelsize.x="" *="" shadowradius;\n\t\t\tfloat="" dy0="-" texelsize.y="" dx1="+" dy1="+" shadowradius;\n\t\t\treturn="" (\n\t\t\t\ttexture2dcompare(="" shadowmap,="" shadowcoord.xy="" +="" vec2(="" dx0,="" ),="" +\n\t\t\t\ttexture2dcompare(="" 0.0,="" dx1,="" 0.0="" shadowcoord.xy,="" )\n\t\t\t)="" 9.0="" );\n\t\t#elif="" shadowmap_type_pcf_soft="" (\n\t\t\t\ttexture2dshadowlerp(="" shadowmapsize,="" +\n\t\t\t\ttexture2dshadowlerp(="" );\n\t\t#else\n\t\t\treturn="" texture2dcompare(="" );\n\t\t#endif\n\t\t}\n\t\treturn="" 1.0;\n\t}\n\tvec2="" cubetouv(="" vec3="" v,="" float="" texelsizey="" {\n\t\tvec3="" absv="abs(" v="" );\n\t\tfloat="" scaletocube="1.0" max(="" absv.x,="" absv.y,="" absv.z="" );\n\t\tabsv="" -="" 2.0="" );\n\t\tvec2="" planar="v.xy;\n\t\tfloat" almostatexel="1.5" texelsizey;\n\t\tfloat="" almostone="1.0" almostatexel;\n\t\tif="">= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",
shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",
shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",
skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",
skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",
uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",
uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",
cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",
depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",
distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",
equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",
linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",
meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",
points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",
points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",
shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};J.prototype={constructor:J,
isColor:!0,r:1,g:1,b:1,set:function(a){a&&a.isColor?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setScalar:function(a){this.b=this.g=this.r=a;return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(){function a(a,c,d){0>d&&(d+=1);1<d&&--d;return d<1="" 6?a+6*(c-a)*d:.5="">d?c:d<2 3?a+6*(c-a)*(2="" 3-d):a}return="" function(b,="" c,d){b="N.euclideanModulo(b,1);c=N.clamp(c,0,1);d=N.clamp(d,0,1);0===c?this.r=this.g=this.b=d:(c=.5">=d?d*(1+c):d+c-d*c,d=2*d-c,this.r=a(d,c,b+1/3),this.g=a(d,c,b),this.b=a(d,c,b-1/3));return this}}(),setStyle:function(a){function b(b){void 0!==b&&1>parseFloat(b)&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var c;if(c=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var d=c[2];switch(c[1]){case "rgb":case "rgba":if(c=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=
Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,b(c[5]),this;if(c=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,b(c[5]),this;break;case "hsl":case "hsla":if(c=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(d)){var d=parseFloat(c[1])/
360,e=parseInt(c[2],10)/100,f=parseInt(c[3],10)/100;b(c[5]);return this.setHSL(d,e,f)}}}else if(c=/^\#([A-Fa-f0-9]+)$/.exec(a)){c=c[1];d=c.length;if(3===d)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}a&&0<a.length&&(c=wf[a],void 0="==b&&(b=2);this.r=Math.pow(a.r,b);this.g=Math.pow(a.g,b);this.b=Math.pow(a.b,b);return" 0!="=" c?this.sethex(c):console.warn("three.color:="" unknown="" color="" "+a));return="" this},clone:function(){return="" new="" this.constructor(this.r,this.g,this.b)},copy:function(a){this.r="a.r;this.g=a.g;this.b=a.b;return" this},copygammatolinear:function(a,b){void="" this},copylineartogamma:function(a,b){void="" c="0<b?1/b:1;this.r=Math.pow(a.r,c);this.g=Math.pow(a.g,c);this.b=Math.pow(a.b,c);return" this},convertgammatolinear:function(){var="" a="this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return" this},convertlineartogamma:function(){this.r="Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return" this},gethex:function(){return="" 255*this.r<<16^255*this.g<<8^255*this.b<<0},gethexstring:function(){return("000000"+this.gethex().tostring(16)).slice(-6)},gethsl:function(a){a="a||{h:0,s:0,l:0};var" b="this.r,c=this.g,d=this.b,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h=(f+e)/2;if(f===e)f=g=0;else{var" m="e-f,f=.5">=h?m/(e+f):
m/(2-e-f);switch(e){case b:g=(c-d)/m+(c<d?6:0);break;case 0="==b&&(b=" c:g="(d-b)/m+2;break;case" d:g="(b-c)/m+4}g/=6}a.h=g;a.s=f;a.l=h;return" a},getstyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsethsl:function(a,b,c){var="" d="this.getHSL();d.h+=a;d.s+=b;d.l+=c;this.setHSL(d.h,d.s,d.l);return" this},add:function(a){this.r+="a.r;this.g+=a.g;this.b+=a.b;return" this},addcolors:function(a,b){this.r="a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return" this},addscalar:function(a){this.r+="a;this.g+=a;this.b+=a;return" this},sub:function(a){this.r="Math.max(0,this.r-a.r);this.g=Math.max(0,this.g-a.g);this.b=Math.max(0,this.b-a.b);return" this},multiply:function(a){this.r*="a.r;this.g*=a.g;this.b*=a.b;return" this},multiplyscalar:function(a){this.r*="a;this.g*=a;this.b*=a;return" this},lerp:function(a,b){this.r+="(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return" this},equals:function(a){return="" a.r="==this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,b){void" 0);this.r="a[b];this.g=a[b+1];this.b=a[b+2];return" this},toarray:function(a,b){void="" a},tojson:function(){return="" this.gethex()}};var="" wf="{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981," cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,="" floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,="" lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,="" moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,="" silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eb.prototype="Object.create(ea.prototype);eb.prototype.constructor=eb;eb.prototype.isDataTexture=!0;var" v="{common:{diffuse:{value:new" j(15658734)},opacity:{value:1},map:{value:null},offsetrepeat:{value:new="" fa(0,="" 0,1,1)},specularmap:{value:null},alphamap:{value:null},envmap:{value:null},flipenvmap:{value:-1},reflectivity:{value:1},refractionratio:{value:.98}},aomap:{aomap:{value:null},aomapintensity:{value:1}},lightmap:{lightmap:{value:null},lightmapintensity:{value:1}},emissivemap:{emissivemap:{value:null}},bumpmap:{bumpmap:{value:null},bumpscale:{value:1}},normalmap:{normalmap:{value:null},normalscale:{value:new="" d(1,1)}},displacementmap:{displacementmap:{value:null},displacementscale:{value:1},displacementbias:{value:0}},="" roughnessmap:{roughnessmap:{value:null}},metalnessmap:{metalnessmap:{value:null}},gradientmap:{gradientmap:{value:null}},fog:{fogdensity:{value:2.5e-4},fognear:{value:1},fogfar:{value:2e3},fogcolor:{value:new="" j(16777215)}},lights:{ambientlightcolor:{value:[]},directionallights:{value:[],properties:{direction:{},color:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},directionalshadowmap:{value:[]},directionalshadowmatrix:{value:[]},spotlights:{value:[],properties:{color:{},position:{},="" direction:{},distance:{},conecos:{},penumbracos:{},decay:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},spotshadowmap:{value:[]},spotshadowmatrix:{value:[]},pointlights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowbias:{},shadowradius:{},shadowmapsize:{}}},pointshadowmap:{value:[]},pointshadowmatrix:{value:[]},hemispherelights:{value:[],properties:{direction:{},skycolor:{},groundcolor:{}}},rectarealights:{value:[],properties:{color:{},position:{},="" width:{},height:{}}}},points:{diffuse:{value:new="" j(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetrepeat:{value:new="" fa(0,0,1,1)}}},bb="{basic:{uniforms:Ja.merge([V.common,V.aomap,V.lightmap,V.fog]),vertexShader:Z.meshbasic_vert,fragmentShader:Z.meshbasic_frag},lambert:{uniforms:Ja.merge([V.common,V.aomap,V.lightmap,V.emissivemap,V.fog,V.lights,{emissive:{value:new" j(0)}}]),vertexshader:z.meshlambert_vert,fragmentshader:z.meshlambert_frag},phong:{uniforms:ja.merge([v.common,="" v.aomap,v.lightmap,v.emissivemap,v.bumpmap,v.normalmap,v.displacementmap,v.gradientmap,v.fog,v.lights,{emissive:{value:new="" j(0)},specular:{value:new="" j(1118481)},shininess:{value:30}}]),vertexshader:z.meshphong_vert,fragmentshader:z.meshphong_frag},standard:{uniforms:ja.merge([v.common,v.aomap,v.lightmap,v.emissivemap,v.bumpmap,v.normalmap,v.displacementmap,v.roughnessmap,v.metalnessmap,v.fog,v.lights,{emissive:{value:new="" j(0)},roughness:{value:.5},metalness:{value:0},envmapintensity:{value:1}}]),="" vertexshader:z.meshphysical_vert,fragmentshader:z.meshphysical_frag},points:{uniforms:ja.merge([v.points,v.fog]),vertexshader:z.points_vert,fragmentshader:z.points_frag},dashed:{uniforms:ja.merge([v.common,v.fog,{scale:{value:1},dashsize:{value:1},totalsize:{value:2}}]),vertexshader:z.linedashed_vert,fragmentshader:z.linedashed_frag},depth:{uniforms:ja.merge([v.common,v.displacementmap]),vertexshader:z.depth_vert,fragmentshader:z.depth_frag},normal:{uniforms:ja.merge([v.common,v.bumpmap,v.normalmap,="" v.displacementmap,{opacity:{value:1}}]),vertexshader:z.normal_vert,fragmentshader:z.normal_frag},cube:{uniforms:{tcube:{value:null},tflip:{value:-1},opacity:{value:1}},vertexshader:z.cube_vert,fragmentshader:z.cube_frag},equirect:{uniforms:{tequirect:{value:null},tflip:{value:-1}},vertexshader:z.equirect_vert,fragmentshader:z.equirect_frag},distancergba:{uniforms:{lightpos:{value:new="" q}},vertexshader:z.distancergba_vert,fragmentshader:z.distancergba_frag}};bb.physical="{uniforms:Ja.merge([bb.standard.uniforms," {clearcoat:{value:0},clearcoatroughness:{value:0}}]),vertexshader:z.meshphysical_vert,fragmentshader:z.meshphysical_frag};sc.prototype="{constructor:sc,set:function(a,b){this.min.copy(a);this.max.copy(b);return" this},setfrompoints:function(a){this.makeempty();for(var="" b="0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return" this},setfromcenterandsize:function(){var="" a="new" d;return="" function(b,c){var="" this}}(),clone:function(){return(new="" this.constructor).copy(this)},="" copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return="" this},makeempty:function(){this.min.x="this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return" this},isempty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y},getcenter:function(a){a="a||new" this.isempty()?a.set(0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){a="a||new" this.isempty()?a.set(0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);="" return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a,b){return(b||new d).set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-="" this.min.y))},intersectsbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new D).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new D;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},translate:function(a){this.min.add(a);
this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var Af=0;X.prototype={constructor:X,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update();this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else{var d=this[b];void 0===d?console.warn("THREE."+this.type+": '"+b+"' is not a property of this material."):
d&&d.isColor?d.set(c):d&&d.isVector3&&c&&c.isVector3?d.copy(c):this[b]="overdraw"===b?Number(c):c}}},toJSON:function(a){function b(a){var b=[],c;for(c in a){var d=a[c];delete d.metadata;b.push(d)}return b}var c=void 0===a;c&&(a={textures:{},images:{}});var d={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};d.uuid=this.uuid;d.type=this.type;""!==this.name&&(d.name=this.name);this.color&&this.color.isColor&&(d.color=this.color.getHex());void 0!==this.roughness&&(d.roughness=this.roughness);
void 0!==this.metalness&&(d.metalness=this.metalness);this.emissive&&this.emissive.isColor&&(d.emissive=this.emissive.getHex());this.specular&&this.specular.isColor&&(d.specular=this.specular.getHex());void 0!==this.shininess&&(d.shininess=this.shininess);void 0!==this.clearCoat&&(d.clearCoat=this.clearCoat);void 0!==this.clearCoatRoughness&&(d.clearCoatRoughness=this.clearCoatRoughness);this.map&&this.map.isTexture&&(d.map=this.map.toJSON(a).uuid);this.alphaMap&&this.alphaMap.isTexture&&(d.alphaMap=
this.alphaMap.toJSON(a).uuid);this.lightMap&&this.lightMap.isTexture&&(d.lightMap=this.lightMap.toJSON(a).uuid);this.bumpMap&&this.bumpMap.isTexture&&(d.bumpMap=this.bumpMap.toJSON(a).uuid,d.bumpScale=this.bumpScale);this.normalMap&&this.normalMap.isTexture&&(d.normalMap=this.normalMap.toJSON(a).uuid,d.normalScale=this.normalScale.toArray());this.displacementMap&&this.displacementMap.isTexture&&(d.displacementMap=this.displacementMap.toJSON(a).uuid,d.displacementScale=this.displacementScale,d.displacementBias=
this.displacementBias);this.roughnessMap&&this.roughnessMap.isTexture&&(d.roughnessMap=this.roughnessMap.toJSON(a).uuid);this.metalnessMap&&this.metalnessMap.isTexture&&(d.metalnessMap=this.metalnessMap.toJSON(a).uuid);this.emissiveMap&&this.emissiveMap.isTexture&&(d.emissiveMap=this.emissiveMap.toJSON(a).uuid);this.specularMap&&this.specularMap.isTexture&&(d.specularMap=this.specularMap.toJSON(a).uuid);this.envMap&&this.envMap.isTexture&&(d.envMap=this.envMap.toJSON(a).uuid,d.reflectivity=this.reflectivity);
this.gradientMap&&this.gradientMap.isTexture&&(d.gradientMap=this.gradientMap.toJSON(a).uuid);void 0!==this.size&&(d.size=this.size);void 0!==this.sizeAttenuation&&(d.sizeAttenuation=this.sizeAttenuation);1!==this.blending&&(d.blending=this.blending);2!==this.shading&&(d.shading=this.shading);0!==this.side&&(d.side=this.side);0!==this.vertexColors&&(d.vertexColors=this.vertexColors);1>this.opacity&&(d.opacity=this.opacity);!0===this.transparent&&(d.transparent=this.transparent);d.depthFunc=this.depthFunc;
d.depthTest=this.depthTest;d.depthWrite=this.depthWrite;0<this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha=this.premultipliedalpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframelinewidth&&(d.wireframelinewidth=this.wireframelinewidth);"round"!==this.wireframelinecap&&(d.wireframelinecap=this.wireframelinecap);"round"!==this.wireframelinejoin&&(d.wireframelinejoin=this.wireframelinejoin);d.skinning=this.skinning;d.morphtargets=this.morphtargets; c&&(c="b(a.textures),a=b(a.images),0<c.length&&(d.textures=c),0<a.length&&(d.images=a));return" d},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.name="a.name;this.fog=a.fog;this.lights=a.lights;this.blending=a.blending;this.side=a.side;this.shading=a.shading;this.vertexColors=a.vertexColors;this.opacity=a.opacity;this.transparent=a.transparent;this.blendSrc=a.blendSrc;this.blendDst=a.blendDst;this.blendEquation=a.blendEquation;this.blendSrcAlpha=a.blendSrcAlpha;this.blendDstAlpha=" a.blenddstalpha;this.blendequationalpha="a.blendEquationAlpha;this.depthFunc=a.depthFunc;this.depthTest=a.depthTest;this.depthWrite=a.depthWrite;this.colorWrite=a.colorWrite;this.precision=a.precision;this.polygonOffset=a.polygonOffset;this.polygonOffsetFactor=a.polygonOffsetFactor;this.polygonOffsetUnits=a.polygonOffsetUnits;this.alphaTest=a.alphaTest;this.premultipliedAlpha=a.premultipliedAlpha;this.overdraw=a.overdraw;this.visible=a.visible;this.clipShadows=a.clipShadows;this.clipIntersection=a.clipIntersection;" a="a.clippingPlanes;var" b="null;if(null!==a)for(var" c="a.length,b=Array(c),d=0;d!==c;++d)b[d]=a[d].clone();this.clippingPlanes=b;return" this},update:function(){this.dispatchevent({type:"update"})},dispose:function(){this.dispatchevent({type:"dispose"})}};object.assign(x.prototype,pa.prototype);ha.prototype="Object.create(X.prototype);Ha.prototype.constructor=Ha;Ha.prototype.isShaderMaterial=!0;Ha.prototype.copy=function(a){X.prototype.copy.call(this,a);this.fragmentShader=a.fragmentShader;this.vertexShader=" a.vertexshader;this.uniforms="Ja.clone(a.uniforms);this.defines=a.defines;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.lights=a.lights;this.clipping=a.clipping;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;this.extensions=a.extensions;return" this};ha.prototype.tojson="function(a){a=X.prototype.toJSON.call(this,a);a.uniforms=this.uniforms;a.vertexShader=this.vertexShader;a.fragmentShader=this.fragmentShader;return" a};ab.prototype="Object.create(X.prototype);ab.prototype.constructor=ab;ab.prototype.isMeshDepthMaterial=!0;ab.prototype.copy=function(a){X.prototype.copy.call(this,a);this.depthPacking=a.depthPacking;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.map=a.map;this.alphaMap=a.alphaMap;this.displacementMap=a.displacementMap;this.displacementScale=a.displacementScale;this.displacementBias=a.displacementBias;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;return" this};pa.prototype="{constructor:Pa,isBox3:!0,set:function(a,b){this.min.copy(a);this.max.copy(b);return" this},setfromarray:function(a){for(var="" k="a[h],l=a[h+1],p=a[h+2];k<b&&(b=k);l<c&&(c=l);p<d&&(d=p);k">e&&(e=k);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromBufferAttribute:function(a){for(var b=Infinity,c=Infinity,d=Infinity,e=-Infinity,f=-Infinity,g=-Infinity,h=0,m=a.count;h<m;h++){var k="a.getX(h),l=a.getY(h),p=a.getZ(h);k<b&&(b=k);l<c&&(c=l);p<d&&(d=p);k">e&&(e=k);l>f&&(f=l);p>g&&(g=p)}this.min.set(b,c,d);this.max.set(e,f,g);return this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandbypoint(a[b]);return this},setfromcenterandsize:function(){var="" a="new" q;return="" function(b,c){var="" d="a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(d);this.max.copy(b).add(d);return" this}}(),setfromobject:function(a){this.makeempty();return="" this.expandbyobject(a)},="" clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return="" this},makeempty:function(){this.min.x="this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return" this},isempty:function(){return="" this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getcenter:function(a){a="a||new" this.isempty()?a.set(0,0,0):a.addvectors(this.min,this.max).multiplyscalar(.5)},getsize:function(a){a="a||new" this.isempty()?="" a.set(0,0,0):a.subvectors(this.max,this.min)},expandbypoint:function(a){this.min.min(a);this.max.max(a);return="" this},expandbyvector:function(a){this.min.sub(a);this.max.add(a);return="" this},expandbyscalar:function(a){this.min.addscalar(-a);this.max.addscalar(a);return="" this},expandbyobject:function(){var="" function(b){var="" c="this;b.updateMatrixWorld(!0);b.traverse(function(b){var" e,f;e="b.geometry;if(void" 0!="=e)if(e.isGeometry){var" g="e.vertices;e=0;for(f=g.length;e<f;e++)a.copy(g[e]),a.applyMatrix4(b.matrixWorld)," c.expandbypoint(a)}else="" if(e.isbuffergeometry&&(g="e.attributes.position,void" this}}(),containspoint:function(a){return="" a.x<this.min.x||a.x="">this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getparameter:function(a, b){return(b||new="" q).set((a.x-this.min.x)="" (this.max.x-this.min.x),(a.y-this.min.y)="" (this.max.y-this.min.y),(a.z-this.min.z)="" (this.max.z-this.min.z))},intersectsbox:function(a){return="" a.max.x<this.min.x||a.min.x="">this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},intersectsSphere:function(){var a;return function(b){void 0===a&&(a=new q);this.clampPoint(b.center,a);return a.distanceToSquared(b.center)<=b.radius*b.radius}}(),intersectsplane:function(a){var b,="" c;0<a.normal.x?(b="a.normal.x*this.min.x,c=a.normal.x*this.max.x):(b=a.normal.x*this.max.x,c=a.normal.x*this.min.x);0<a.normal.y?(b+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(b+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y);0<a.normal.z?(b+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(b+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z);return" b<="a.constant&&c">=a.constant},clampPoint:function(a,b){return(b||new q).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new q;
return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new q;return function(b){b=b||new Na;this.getCenter(b.center);b.radius=.5*this.getSize(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);this.isEmpty()&&this.makeEmpty();return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new q,new q,new q,new q,new q,new q,new q,new q];return function(b){if(this.isEmpty())return this;
a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.setFromPoints(a);return this}}(),
translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};Na.prototype={constructor:Na,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromPoints:function(){var a;return function(b,c){void 0===a&&(a=new Pa);var d=this.center;void 0!==c?d.copy(c):a.setFromPoints(b).getCenter(d);for(var e=0,f=0,g=b.length;f<g;f++)e=math.max(e,d.distancetosquared(b[f]));this.radius=math.sqrt(e);return 0="" this}}(),clone:function(){return(new="" this.constructor).copy(this)},="" copy:function(a){this.center.copy(a.center);this.radius="a.radius;return" this},empty:function(){return="">=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distancetopoint:function(a){return a.distanceto(this.center)-this.radius},intersectssphere:function(a){var="" b="this.radius+a.radius;return" a.center.distancetosquared(this.center)<="b*b},intersectsBox:function(a){return" a.intersectssphere(this)},intersectsplane:function(a){return="" math.abs(this.center.dot(a.normal)-="" a.constant)<="this.radius},clampPoint:function(a,b){var" c="this.center.distanceToSquared(a),d=b||new" q;d.copy(a);c="">this.radius*this.radius&&(d.sub(this.center).normalize(),d.multiplyScalar(this.radius).add(this.center));return d},getBoundingBox:function(a){a=a||new Pa;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&
a.radius===this.radius}};ya.prototype={constructor:ya,isMatrix3:!0,set:function(a,b,c,d,e,f,g,h,m){var k=this.elements;k[0]=a;k[1]=d;k[2]=g;k[3]=b;k[4]=e;k[5]=h;k[6]=c;k[7]=f;k[8]=m;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],
a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a;return function(b){void 0===a&&(a=new q);for(var c=0,d=b.count;c<d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return 0="==b&&(b=0);for(var" b}}(),multiplyscalar:function(a){var="" b="this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return" this},determinant:function(){var="" a="this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],m=a[7],a=a[8];return" b*f*a-b*g*m-c*e*="" a+c*g*h+d*e*m-d*f*h},getinverse:function(a,b){a&&a.ismatrix4&&console.error("three.matrix3.getinverse="" no="" longer="" takes="" matrix4="" argument.");var="" c="a.elements,d=this.elements,e=c[0],f=c[1],g=c[2],h=c[3],m=c[4],k=c[5],l=c[6],p=c[7],c=c[8],n=c*m-k*p,u=k*l-c*h,q=p*h-m*l,r=e*n+f*u+g*q;if(0===r){if(!0===b)throw" error("three.matrix3.getinverse():="" can't="" invert="" matrix,="" determinant="" is="" 0");console.warn("three.matrix3.getinverse():="" 0");return="" this.identity()}r="1/r;d[0]=n*r;" d[1]="(g*p-c*f)*r;d[2]=(k*f-g*m)*r;d[3]=u*r;d[4]=(c*e-g*l)*r;d[5]=(g*h-k*e)*r;d[6]=q*r;d[7]=(f*l-p*e)*r;d[8]=(m*e-f*h)*r;return" this},transpose:function(){var="" a,b="this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return" this},getnormalmatrix:function(a){return="" this.setfrommatrix4(a).getinverse(this).transpose()},transposeintoarray:function(a){var="" this},="" fromarray:function(a,b){void="">c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a}};la.prototype={constructor:la,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,d){this.normal.set(a,b,c);this.constant=d;return this},setFromNormalAndCoplanarPoint:function(a,
b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new q,b=new q;return function(c,d,e){d=a.subVectors(e,d).cross(b.subVectors(c,d)).normalize();this.setFromNormalAndCoplanarPoint(d,c);return this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},
negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,b){var c=this.distanceToPoint(a);return(b||new q).copy(this.normal).multiplyScalar(c)},intersectLine:function(){var a=new q;return function(b,c){var d=c||new q,e=b.delta(a),f=this.normal.dot(e);
if(0===f){if(0===this.distanceToPoint(b.start))return d.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0="" 0:d.copy(e).multiplyscalar(f).add(b.start)}}(),intersectsline:function(a){var="" b="this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return">b&&0<a||0>a&&0<b},intersectsbox:function(a){return a.intersectsplane(this)},intersectssphere:function(a){return="" a.intersectsplane(this)},coplanarpoint:function(a){return(a||new="" q).copy(this.normal).multiplyscalar(-this.constant)},="" applymatrix4:function(){var="" a="new" q,b="new" ya;return="" function(c,d){var="" e="this.coplanarPoint(a).applyMatrix4(c),f=d||b.getNormalMatrix(c),f=this.normal.applyMatrix3(f).normalize();this.constant=-e.dot(f);return" this}}(),translate:function(a){this.constant-="a.dot(this.normal);return" this},equals:function(a){return="" a.normal.equals(this.normal)&&a.constant="==this.constant}};tc.prototype={constructor:tc,set:function(a,b,c,d,e,f){var" g="this.planes;g[0].copy(a);g[1].copy(b);g[2].copy(c);g[3].copy(d);g[4].copy(e);" g[5].copy(f);return="" this},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){for(var="" b="this.planes,c=0;6">c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var d=c[1],e=c[2],f=c[3],g=c[4],h=c[5],m=c[6],k=c[7],l=c[8],p=c[9],n=c[10],u=c[11],q=c[12],r=c[13],A=c[14],c=c[15];b[0].setComponents(f-a,k-g,u-l,c-q).normalize();b[1].setComponents(f+a,k+g,u+l,c+q).normalize();b[2].setComponents(f+d,k+h,u+p,c+r).normalize();b[3].setComponents(f-
d,k-h,u-p,c-r).normalize();b[4].setComponents(f-e,k-m,u-n,c-A).normalize();b[5].setComponents(f+e,k+m,u+n,c+A).normalize();return this},intersectsObject:function(){var a=new Na;return function(b){var c=b.geometry;null===c.boundingSphere&&c.computeBoundingSphere();a.copy(c.boundingSphere).applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Na;return function(b){a.center.set(0,0,0);a.radius=.7071067811865476;a.applyMatrix4(b.matrixWorld);return this.intersectsSphere(a)}}(),
intersectsSphere:function(a){var b=this.planes,c=a.center;a=-a.radius;for(var d=0;6>d;d++)if(b[d].distanceToPoint(c)<a)return!1;return!0},intersectsbox:function(){var a="new" q,b="new" q;return="" function(c){for(var="" d="this.planes,e=0;6">e;e++){var f=d[e];a.x=0<f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var g="f.distanceToPoint(a),f=f.distanceToPoint(b);if(0">
g&&0>f)return!1}return!0}}(),containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0}};cb.prototype={constructor:cb,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new q).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){this.direction.copy(a).sub(this.origin).normalize();
return this},recast:function(){var a=new q;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new q;c.subVectors(a,this.origin);var d=c.dot(this.direction);return 0>d?c.copy(this.origin):c.copy(this.direction).multiplyScalar(d).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new q;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);if(0>c)return this.origin.distanceToSquared(b);
a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceToSquared(b)}}(),distanceSqToSegment:function(){var a=new q,b=new q,c=new q;return function(d,e,f,g){a.copy(d).add(e).multiplyScalar(.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var h=.5*d.distanceTo(e),m=-this.direction.dot(b),k=c.dot(this.direction),l=-c.dot(b),p=c.lengthSq(),n=Math.abs(1-m*m),u;0<n?(d=m*l-k,e=m*k-l,u=h*n,0<=d?e>=-u?e<=u?(h=1 n,d*="h,e*=h,m=d*(d+m*e+2*k)+e*(m*d+e+2*l)+p):(e=h,d=Math.max(0,-(m*" e+k)),m="-d*d+e*(e+2*l)+p):(e=-h,d=Math.max(0,-(m*e+k)),m=-d*d+e*(e+2*l)+p):e<=-u?(d=Math.max(0,-(-m*h+k)),e=0<d?-h:Math.min(Math.max(-h,-l),h),m=-d*d+e*(e+2*l)+p):e<=u?(d=0,e=Math.min(Math.max(-h,-l),h),m=e*(e+2*l)+p):(d=Math.max(0,-(m*h+k)),e=0<d?h:Math.min(Math.max(-h,-l),h),m=-d*d+e*(e+2*l)+p)):(e=0<m?-h:h,d=Math.max(0,-(m*e+k)),m=-d*d+e*(e+2*l)+p);f&&f.copy(this.direction).multiplyScalar(d).add(this.origin);g&&g.copy(b).multiplyScalar(e).add(a);return" m}}(),intersectsphere:function(){var="" a="new" q;="" return="" function(b,c){a.subvectors(b.center,this.origin);var="" d="a.dot(this.direction),e=a.dot(a)-d*d,f=b.radius*b.radius;if(e">f)return null;f=Math.sqrt(f-e);e=d-f;d+=f;return 0>e&&0>d?null:0>e?this.at(d,c):this.at(e,c)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distancetoplane:function(a){var 0="==a.distanceToPoint(this.origin)?0:null;a=-(this.origin.dot(a.normal)+a.constant)/b;return" b="a.normal.dot(this.direction);if(0===b)return" 0<="a?a:null},intersectPlane:function(a," b){var="" c="this.distanceToPlane(a);return" null="==c?null:this.at(c,b)},intersectsPlane:function(a){var">a.normal.dot(this.direction)*b?!0:!1},intersectBox:function(a,b){var c,d,e,f,g;d=1/this.direction.x;f=1/this.direction.y;g=1/this.direction.z;var h=this.origin;0<=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c>f||e>d)return null;if(e>c||c!==c)c=e;
if(f<d||d!==d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c>g||e>d)return null;if(e>c||c!==c)c=e;if(g<d||d!==d)d=g;return 0="">d?null:this.at(0<=c?c:d,b)},intersectsbox:function(){var a="new" q;return="" function(b){return="" null!="=this.intersectBox(b,a)}}(),intersectTriangle:function(){var" q,b="new" q,c="new" q,d="new" function(e,f,g,h,m){b.subvectors(f,e);c.subvectors(g,e);d.crossvectors(b,c);f="this.direction.dot(d);if(0<f){if(h)return" null;h="1}else" if(0="">f)h=
-1,f=-f;else return null;a.subVectors(this.origin,e);e=h*this.direction.dot(c.crossVectors(a,c));if(0>e)return null;g=h*this.direction.dot(b.cross(a));if(0>g||e+g>f)return null;e=-h*a.dot(d);return 0>e?null:this.at(e/f,m)}}(),applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);this.direction.normalize();return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}};db.RotationOrders=
"XYZ YZX ZXY XZY YXZ ZYX".split(" ");db.DefaultOrder="XYZ";db.prototype={constructor:db,isEuler:!0,get x(){return this._x},set x(a){this._x=a;this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a;this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a;this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a;this.onChangeCallback()},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},
clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=N.clamp,e=a.elements;a=e[0];var f=e[4],g=e[8],h=e[1],m=e[5],k=e[9],l=e[2],p=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(-k,e),this._z=Math.atan2(-f,a)):(this._x=Math.atan2(p,m),this._z=0)):"YXZ"===
b?(this._x=Math.asin(-d(k,-1,1)),.99999>Math.abs(k)?(this._y=Math.atan2(g,e),this._z=Math.atan2(h,m)):(this._y=Math.atan2(-l,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(p,-1,1)),.99999>Math.abs(p)?(this._y=Math.atan2(-l,e),this._z=Math.atan2(-f,m)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._x=Math.atan2(p,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-f,m))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=
Math.atan2(-k,m),this._y=Math.atan2(-l,a)):(this._x=0,this._y=Math.atan2(g,e))):"XZY"===b?(this._z=Math.asin(-d(f,-1,1)),.99999>Math.abs(f)?(this._x=Math.atan2(p,m),this._y=Math.atan2(g,a)):(this._x=Math.atan2(-k,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new S);a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,
c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new ca;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=
this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new q(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}};nd.prototype={constructor:nd,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0="==a||""===a,d={};c&&(a={geometries:{},materials:{},textures:{},images:{}},d.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var" 0!="=(this.mask&a.mask)}};var" bf="0;x.DefaultUp=new" q(0,1,0);x.defaultmatrixautoupdate="!0;x.prototype={constructor:x,isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix);this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,b){this.quaternion.setFromAxisAngle(a,b)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var" a="new" ca;return="" function(b,="" c){a.setfromaxisangle(b,c);this.quaternion.multiply(a);return="" this}}(),rotatex:function(){var="" q(1,0,0);return="" function(b){return="" this.rotateonaxis(a,b)}}(),rotatey:function(){var="" q(0,1,0);return="" this.rotateonaxis(a,b)}}(),rotatez:function(){var="" q(0,0,1);return="" this.rotateonaxis(a,b)}}(),translateonaxis:function(){var="" q;return="" function(b,c){a.copy(b).applyquaternion(this.quaternion);this.position.add(a.multiplyscalar(c));return="" this}}(),="" translatex:function(){var="" this.translateonaxis(a,b)}}(),translatey:function(){var="" this.translateonaxis(a,b)}}(),translatez:function(){var="" this.translateonaxis(a,b)}}(),localtoworld:function(a){return="" a.applymatrix4(this.matrixworld)},worldtolocal:function(){var="" s;return="" b.applymatrix4(a.getinverse(this.matrixworld))}}(),lookat:function(){var="" function(b){a.lookat(b,="" this.position,this.up);this.quaternion.setfromrotationmatrix(a)}}(),add:function(a){if(1<arguments.length){for(var="" b="0;b<arguments.length;b++)this.add(arguments[b]);return" this}if(a="==this)return" console.error("three.object3d.add:="" object="" can't="" be="" added="" as="" child="" of="" itself.",a),this;a&&a.isobject3d?(null!="=a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add:" not="" an="" instance="" three.object3d.",a);return="" this},remove:function(a){if(1<="" arguments.length)for(var="" this.getobjectbyproperty("id",a)},getobjectbyname:function(a){return="" this.getobjectbyproperty("name",a)},getobjectbyproperty:function(a,b){if(this[a]="==b)return" this;for(var="" c="0,d=this.children.length;c<d;c++){var" e="this.children[c].getObjectByProperty(a,b);if(void" e}},="" getworldposition:function(a){a="a||new" q;this.updatematrixworld(!0);return="" a.setfrommatrixposition(this.matrixworld)},getworldquaternion:function(){var="" q,b="new" function(c){c="c||new" ca;this.updatematrixworld(!0);this.matrixworld.decompose(a,c,b);return="" c}}(),getworldrotation:function(){var="" function(b){b="b||new" db;this.getworldquaternion(a);return="" b.setfromquaternion(a,this.rotation.order,!1)}}(),getworldscale:function(){var="" q;="" this.updatematrixworld(!0);this.matrixworld.decompose(a,b,c);return="" c}}(),getworlddirection:function(){var="" q;this.getworldquaternion(a);return="" b.set(0,0,1).applyquaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var="" null!="=b&&(a(b),b.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0;for(var" tojson:function(a){function="" b(a){var="" in="" a){var="" d="a[c];delete" d.metadata;b.push(d)}return="" b}var="" (e.visible="!1);e.matrix=this.matrix.toArray();void" f="0;f<this.children.length;f++)e.children.push(this.children[f].toJSON(a).object)}if(c){var" d},clone:function(a){return(new="" this.constructor).copy(this,a)},copy:function(a,b){void="" a.matrixautoupdate;this.matrixworldneedsupdate="a.matrixWorldNeedsUpdate;this.layers.mask=a.layers.mask;this.visible=a.visible;this.castShadow=a.castShadow;this.receiveShadow=a.receiveShadow;this.frustumCulled=a.frustumCulled;this.renderOrder=a.renderOrder;this.userData=JSON.parse(JSON.stringify(a.userData));if(!0===b)for(var" this}};object.assign(x.prototype,pa.prototype);hb.prototype="{constructor:hb,set:function(a,b){this.start.copy(a);" this.end.copy(b);return="" this},clone:function(){return(new="" this.constructor).copy(this)},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return="" this},getcenter:function(a){return(a||new="" q).addvectors(this.start,this.end).multiplyscalar(.5)},delta:function(a){return(a||new="" q).subvectors(this.end,this.start)},distancesq:function(){return="" this.start.distancetosquared(this.end)},distance:function(){return="" this.start.distanceto(this.end)},at:function(a,b){var="" this.delta(c).multiplyscalar(a).add(this.start)},="" closestpointtopointparameter:function(){var="" function(c,d){a.subvectors(c,this.start);b.subvectors(this.end,this.start);var="" e}}(),closestpointtopoint:function(a,b,c){a="this.closestPointToPointParameter(a,b);c=c||new" this.delta(c).multiplyscalar(a).add(this.start)},applymatrix4:function(a){this.start.applymatrix4(a);this.end.applymatrix4(a);return="" this},equals:function(a){return="" a.start.equals(this.start)&&a.end.equals(this.end)}};="" za.normal="function(){var" function(b,c,d,e){e="e||new" q;e.subvectors(d,c);a.subvectors(b,c);e.cross(a);b="e.lengthSq();return" 0<b?e.multiplyscalar(1="" math.sqrt(b)):e.set(0,0,0)}}();za.barycoordfrompoint="function(){var" q,c="new" function(d,e,f,g,h){a.subvectors(g,e);b.subvectors(f,e);c.subvectors(d,e);d="a.dot(a);e=a.dot(b);f=a.dot(c);var" m="b.dot(b);g=b.dot(c);var" k="d*m-e*e;h=h||new" q;if(0="==k)return" h.set(-2,-1,-1);k="1/k;m=(m*f-e*g)*k;d=(d*g-e*f)*k;return" h.set(1-m-="" d,d,m)}}();za.containspoint="function(){var" function(b,c,d,e){b="za.barycoordFromPoint(b,c,d,e,a);return" 0<="b.x&&0<=b.y&&1">=b.x+b.y}}();za.prototype={constructor:za,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,d){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[d]);return this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},
area:function(){var a=new q,b=new q;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||new q).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return za.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new la).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return za.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return za.containsPoint(a,
this.a,this.b,this.c)},closestPointToPoint:function(){var a,b,c,d;return function(e,f){void 0===a&&(a=new la,b=[new hb,new hb,new hb],c=new q,d=new q);var g=f||new q,h=Infinity;a.setFromCoplanarPoints(this.a,this.b,this.c);a.projectPoint(e,c);if(!0===this.containsPoint(c))g.copy(c);else{b[0].set(this.a,this.b);b[1].set(this.b,this.c);b[2].set(this.c,this.a);for(var m=0;m<b.length;m++){b[m].closestpointtopoint(c,!0,d);var 0="==f&&(console.warn("THREE.BufferAttribute.copyColorsArray():" k="c.distanceToSquared(d);k<h&&(h=k,g.copy(d))}}return" g}}(),equals:function(a){return="" a.a.equals(this.a)&&="" a.b.equals(this.b)&&a.c.equals(this.c)}};ha.prototype="{constructor:ha,clone:function(){return(new" this.constructor).copy(this)},copy:function(a){this.a="a.a;this.b=a.b;this.c=a.c;this.normal.copy(a.normal);this.color.copy(a.color);this.materialIndex=a.materialIndex;for(var" b="0,c=a.vertexNormals.length;b<c;b++)this.vertexNormals[b]=a.vertexNormals[b].clone();b=0;for(c=a.vertexColors.length;b<c;b++)this.vertexColors[b]=a.vertexColors[b].clone();return" this}};ka.prototype="Object.create(X.prototype);Ka.prototype.constructor=" ka;ka.prototype.ismeshbasicmaterial="!0;Ka.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;" this.wireframelinecap="a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;return" this};u.prototype="{constructor:U,isBufferAttribute:!0,set" needsupdate(a){!0="==a&&this.version++},setArray:function(a){if(Array.isArray(a))throw" new="" typeerror("three.bufferattribute:="" array="" should="" be="" a="" typed="" array.");this.count="void" 0!="=a?a.length/this.itemSize:0;this.array=a},setDynamic:function(a){this.dynamic=a;return" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.itemsize="a.itemSize;this.count=a.count;this.normalized=a.normalized;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.itemSize;c*=b.itemSize;for(var" d="0,e=this.itemSize;d<e;d++)this.array[a+d]=b.array[c+d];return" this},copyarray:function(a){this.array.set(a);return="" this},copycolorsarray:function(a){for(var="" f="a[d];void" color="" is="" undefined",="" d),f="new" j);b[c++]="f.r;b[c++]=f.g;b[c++]=f.b}return" this},copyindicesarray:function(a){for(var="" this},copyvector2sarray:function(a){for(var="" vector="" undefined",d),f="new" d);b[c++]="f.x;b[c++]=f.y}return" this},copyvector3sarray:function(a){for(var="" q);b[c++]="f.x;b[c++]=f.y;b[c++]=f.z}return" this},copyvector4sarray:function(a){for(var="" fa);b[c++]="f.x;b[c++]=f.y;b[c++]=f.z;b[c++]=f.w}return" this},set:function(a,b){void="" this},getx:function(a){return="" this.array[a*="" this.itemsize]},setx:function(a,b){this.array[a*this.itemsize]="b;return" this},gety:function(a){return="" this.array[a*this.itemsize+1]},sety:function(a,b){this.array[a*this.itemsize+1]="b;return" this},getz:function(a){return="" this.array[a*this.itemsize+2]},setz:function(a,b){this.array[a*this.itemsize+2]="b;return" this},getw:function(a){return="" this.array[a*this.itemsize+3]},setw:function(a,b){this.array[a*this.itemsize+3]="b;return" this},setxy:function(a,b,c){a*="this.itemSize;this.array[a+0]=b;this.array[a+" 1]="c;return" this},setxyz:function(a,b,c,d){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a*="this.itemSize;this.array[a+0]=b;this.array[a+1]=c;this.array[a+2]=d;this.array[a+3]=e;return" this},onupload:function(a){this.onuploadcallback="a;return" this},clone:function(){return(new="" this.constructor(this.array,this.itemsize)).copy(this)}};uc.prototype="Object.create(U.prototype);uc.prototype.constructor=uc;vc.prototype=Object.create(U.prototype);" vc.prototype.constructor="vc;wc.prototype=Object.create(U.prototype);wc.prototype.constructor=wc;xc.prototype=Object.create(U.prototype);xc.prototype.constructor=xc;ib.prototype=Object.create(U.prototype);ib.prototype.constructor=ib;yc.prototype=Object.create(U.prototype);yc.prototype.constructor=yc;jb.prototype=Object.create(U.prototype);jb.prototype.constructor=jb;z.prototype=Object.create(U.prototype);z.prototype.constructor=z;zc.prototype=Object.create(U.prototype);zc.prototype.constructor=zc;" object.assign(me.prototype,{computegroups:function(a){var="" b,c="[],d=void" 0;a="a.faces;for(var" e="0;e<a.length;e++){var" m}var="" l="a.morphNormals,p=l.length,n;if(0<p){n=[];for(k=0;k<p;k++)n[k]=[];this.morphTargets.normal=n}for(var" u="a.skinIndices,q=a.skinWeights,r=u.length===c.length,A=q.length===c.length,k=0;k<b.length;k++){var" w="b[k];this.vertices.push(c[w.a],c[w.b],c[w.c]);var" y="w.vertexNormals;3===y.length?this.normals.push(y[0],y[1],y[2]):(y=w.normal,this.normals.push(y,y,y));y=w.vertexColors;3===y.length?this.colors.push(y[0],y[1],y[2]):(y=w.color,this.colors.push(y,y,y));!0===e&&(y=d[0][k],void" y[1],y[2]):(console.warn("three.directgeometry.fromgeometry():="" undefined="" vertexuv="" ",k),this.uvs.push(new="" d,new="" d)));!0="==f&&(y=d[1][k],void" vertexuv2="" ",k),this.uvs2.push(new="" d)));for(y="0;y<h;y++){var" q[w.b],q[w.c])}this.computegroups(a);this.verticesneedupdate="a.verticesNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return" this}});var="" vd="0;T.prototype={constructor:T,isGeometry:!0,applyMatrix:function(a){for(var" ya).getnormalmatrix(a),c="0,d=this.vertices.length;c<d;c++)this.vertices[c].applyMatrix4(a);c=0;for(d=this.faces.length;c<d;c++){a=this.faces[c];a.normal.applyMatrix3(b).normalize();" for(var="" this},rotatex:function(){var="" a;return="" function(b){void="" s);a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" s);a.makerotationy(b);this.applymatrix(a);return="" this}}(),="" rotatez:function(){var="" s);a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,c,d){void="" s);a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" s);a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" x);a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),="" frombuffergeometry:function(a){function="" b(a,b,d,e){var="" ha(a,b,d,f,u,e);c.faces.push(e);void="" c="this,d=null!==a.index?a.index.array:void" 0,e="a.attributes,f=e.position.array,g=void" void="" 0,h="void" 0,m="void" 0,k="void" 0;void="" q(f[e],f[e+1],f[e+2])),void="" q(g[e],g[e+1],g[e+2])),void="" j(h[e],h[e+1],h[e+2])),void="" d(m[u],m[u+1])),void="" d(k[u],k[u+1]));if(void="" g="f[e]," r="G.start,A=G.count,u=r,r=r+A;u<r;u+=3)b(d[u],d[u+1],d[u+2],G.materialIndex);else" for(e="0;e<d.length;e+=3)b(d[e],d[e+1],d[e+2]);else" this},center:function(){this.computeboundingbox();var="" a},normalize:function(){this.computeboundingsphere();="" var="" s;c.set(b,0,0,-b*a.x,0,b,0,-b*a.y,0,0,b,-b*a.z,0,0,0,1);this.applymatrix(c);return="" this},computefacenormals:function(){for(var="" q,b="new" q,c="0,d=this.faces.length;c<d;c++){var" b,c,d;d="Array(this.vertices.length);" q;if(a){var="" e,f,g,h="new" q,m="new" q;a="0;for(b=this.faces.length;a<b;a++)c=this.faces[a],e=this.vertices[c.a],f=this.vertices[c.b],g=this.vertices[c.c],h.subVectors(g,f),m.subVectors(e,f),h.cross(m),d[c.a].add(h),d[c.b].add(h),d[c.c].add(h)}else" for(this.computefacenormals(),a="0,b=this.faces.length;a<b;a++)c=this.faces[a],d[c.a].add(c.normal),d[c.b].add(c.normal),d[c.c].add(c.normal);b=0;for(c=this.vertices.length;b<c;b++)d[b].normalize();a=0;for(b=this.faces.length;a<" b;a++)c="this.faces[a],e=c.vertexNormals,3===e.length?(e[0].copy(d[c.a]),e[1].copy(d[c.b]),e[2].copy(d[c.c])):(e[0]=d[c.a].clone(),e[1]=d[c.b].clone(),e[2]=d[c.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var" a,b,c;this.computefacenormals();a="0;for(b=this.faces.length;a<b;a++){c=this.faces[a];var" this.faces.length&&(this.normalsneedupdate="!0)},computeMorphNormals:function(){var" a,b,c,d,e;c="0;for(d=this.faces.length;c<d;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;a<b;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var" t;f.faces="this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];e=this.morphNormals[a].faceNormals;var" q,b:new="" q,c:new="" q},e.push(h),g.push(m)}g="this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(d=this.faces.length;c<d;c++)e=" this.faces[c],h="g.faceNormals[c],m=g.vertexNormals[c],h.copy(e.normal),m.a.copy(e.vertexNormals[0]),m.b.copy(e.vertexNormals[1]),m.c.copy(e.vertexNormals[2])}c=0;for(d=this.faces.length;c<d;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeLineDistances:function(){for(var" pa);="" this.boundingbox.setfrompoints(this.vertices)},computeboundingsphere:function(){null="==this.boundingSphere&&(this.boundingSphere=new" na);this.boundingsphere.setfrompoints(this.vertices)},merge:function(a,b,c){if(!1="==(a&&a.isGeometry))console.error("THREE.Geometry.merge():" geometry="" not="" an="" instance="" of="" three.geometry.",a);else{var="" d,e="this.vertices.length,f=this.vertices,g=a.vertices,h=this.faces,m=a.faces,k=this.faceVertexUvs[0],l=a.faceVertexUvs[0],p=this.colors,n=a.colors;void" b&&(d="(new" ya).getnormalmatrix(b));a="0;for(var" q="g[a].clone();void" ha(g.a+e,g.b+e,g.c+e);p.normal.copy(g.normal);void="" n[b],p.vertexcolors.push(q.clone());p.materialindex="g.materialIndex+c;h.push(p)}a=0;for(u=l.length;a<u;a++)if(c=l[a],d=[],void" mesh="" three.mesh.",a):(a.matrixautoupdate&&a.updatematrix(),this.merge(a.geometry,a.matrix))},mergevertices:function(){var="">d;d++)if(e[d]===e[(d+1)%3]){a.push(f);break}for(f=a.length-1;0<=f;f--)for(e=a[f],this.faces.splice(e,1),c=0,g=this.facevertexuvs.length;c<g;c++)this.facevertexuvs[c].splice(e,1);f=this.vertices.length-b.length;this.vertices=b;return 0="==this.faceVertexUvs[b]&&(this.faceVertexUvs[b]=[]);d=0;for(e=h.length;d<" f},sortfacesbymaterialindex:function(){for(var="" a="this.faces,b=a.length,c=0;c<b;c++)a[c]._id=c;a.sort(function(a,b){return" a.materialindex-b.materialindex});var="" d="this.faceVertexUvs[0],e=this.faceVertexUvs[1],f,g;d&&d.length===b&&(f=[]);e&&e.length===b&&(g=[]);for(c=0;c<b;c++){var" h="a[c]._id;f&&f.push(d[h]);g&&g.push(e[h])}f&&(this.faceVertexUvs[0]=f);g&&(this.faceVertexUvs[1]=g)},toJSON:function(){function" a(a,b,c){return="" c?a|1<<b:a&~(1<<b)}function="" b(a){var="" b="a.x.toString()+a.y.toString()+a.z.toString();if(void" 0!="=k[b])return" k[b];k[b]="m.length/" 3;m.push(a.x,a.y,a.z);return="" k[b]}function="" c(a){var="" p[b];p[b]="l.length;l.push(a.getHex());return" p[b]}function="" d(a){var="" u[b];u[b]="n.length/2;n.push(a.x,a.y);return" u[b]}var="" e="{metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};e.uuid=this.uuid;e.type=this.type;""!==this.name&&(e.name=this.name);if(void" f="this.parameters,g;for(g" in="" f)void="" f[g]&&(e[g]="f[g]);return" e}f="[];for(g=0;g<this.vertices.length;g++){var" q="this.faces[g],r=void" r&&(r="this.faceVertexUvs[0][g],h.push(d(r[0]),d(r[1]),d(r[2])));A&&h.push(b(q.normal));w&&(A=q.vertexNormals,h.push(b(A[0]),b(A[1]),b(A[2])));y&&h.push(c(q.color));K&&(q=q.vertexColors,h.push(c(q[0]),c(q[1]),c(q[2])))}e.data={};e.data.vertices=f;e.data.normals=m;0<l.length&&(e.data.colors=l);0<n.length&&(e.data.uvs=[n]);e.data.faces=h;return" e},clone:function(){return(new="" t).copy(this)},copy:function(a){var="" b,c,d,e,f,g;this.vertices="[];this.colors=[];this.faces=[];this.faceVertexUvs=[[]];this.morphTargets=" [];this.morphnormals="[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;d=a.vertices;b=0;for(c=d.length;b<c;b++)this.vertices.push(d[b].clone());d=a.colors;b=0;for(c=d.length;b<c;b++)this.colors.push(d[b].clone());d=a.faces;b=0;for(c=d.length;b<c;b++)this.faces.push(d[b].clone());b=0;for(c=a.faceVertexUvs.length;b<c;b++){var" e;d++){var="" m="h[d],k=[];f=0;for(g=m.length;f<g;f++)k.push(m[f].clone());this.faceVertexUvs[b].push(k)}}f=a.morphTargets;b=0;for(c=f.length;b<c;b++){g={};g.name=f[b].name;if(void" [],d="0,e=f[b].vertexNormals.length;d<e;d++)h=f[b].vertexNormals[d],m={},m.a=h.a.clone(),m.b=h.b.clone(),m.c=h.c.clone(),g.vertexNormals.push(m);if(void" c;b++)this.linedistances.push(d[b]);b="a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.elementsNeedUpdate=a.elementsNeedUpdate;this.verticesNeedUpdate=a.verticesNeedUpdate;this.uvsNeedUpdate=a.uvsNeedUpdate;this.normalsNeedUpdate=a.normalsNeedUpdate;this.colorsNeedUpdate=a.colorsNeedUpdate;this.lineDistancesNeedUpdate=a.lineDistancesNeedUpdate;this.groupsNeedUpdate=a.groupsNeedUpdate;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}};="" object.assign(t.prototype,pa.prototype);i.prototype="{constructor:I,isBufferGeometry:!0,getIndex:function(){return" this.index},setindex:function(a){array.isarray(a)?this.index="new" (65535<ud(a)?jb:ib)(a,1):this.index="a},addAttribute:function(a,b,c){if(!1===(b&&b.isBufferAttribute)&&!1===(b&&b.isInterleavedBufferAttribute))console.warn("THREE.BufferGeometry:" .addattribute()="" now="" expects="" (="" name,="" attribute="" )."),this.addattribute(a,new="" u(b,c));else="" if("index"="==a)console.warn("THREE.BufferGeometry.addAttribute:" use="" .setindex()="" for="" index="" attribute."),="" this.setindex(b);else="" return="" this.attributes[a]="b,this},getAttribute:function(a){return" this.attributes[a]},removeattribute:function(a){delete="" this.attributes[a];return="" this},addgroup:function(a,b,c){this.groups.push({start:a,count:b,materialindex:void="" void="" ya).getnormalmatrix(a).applytobufferattribute(b),b.needsupdate="!0);null!==this.boundingBox&&this.computeBoundingBox();null!==this.boundingSphere&&this.computeBoundingSphere();return" this},rotatex:function(){var="" a;return="" function(b){void="" s);a.makerotationx(b);this.applymatrix(a);return="" this}}(),rotatey:function(){var="" s);a.makerotationy(b);this.applymatrix(a);return="" this}}(),rotatez:function(){var="" a&&(a="new" s);a.makerotationz(b);this.applymatrix(a);return="" this}}(),translate:function(){var="" function(b,c,d){void="" s);a.maketranslation(b,c,d);this.applymatrix(a);return="" this}}(),scale:function(){var="" s);a.makescale(b,c,d);this.applymatrix(a);return="" this}}(),lookat:function(){var="" x);a.lookat(b);a.updatematrix();this.applymatrix(a.matrix)}}(),center:function(){this.computeboundingbox();var="" this.translate(a.x,a.y,a.z);return="" a},setfromobject:function(a){var="" z(3*b.vertices.length,3);var="" c="new" z(3*b.colors.length,3);this.addattribute("position",a.copyvector3sarray(b.vertices));this.addattribute("color",c.copycolorsarray(b.colors));b.linedistances&&b.linedistances.length="==b.vertices.length&&(a=new" z(b.linedistances.length,1),this.addattribute("linedistance",a.copyarray(b.linedistances)));null!="=b.boundingSphere&&(this.boundingSphere=b.boundingSphere.clone());" null!="=b.boundingBox&&(this.boundingBox=b.boundingBox.clone())}else" a.ismesh&&b&&b.isgeometry&&this.fromgeometry(b);return="" this},updatefromobject:function(a){var="" 0,b.elementsneedupdate="!1);if(void" this.fromgeometry(b);c.verticesneedupdate="b.verticesNeedUpdate;c.normalsNeedUpdate=b.normalsNeedUpdate;c.colorsNeedUpdate=b.colorsNeedUpdate;c.uvsNeedUpdate=b.uvsNeedUpdate;c.groupsNeedUpdate=b.groupsNeedUpdate;" b.verticesneedupdate="!1;b.normalsNeedUpdate=!1;b.colorsNeedUpdate=!1;b.uvsNeedUpdate=!1;b.groupsNeedUpdate=!1;b=c}!0===b.verticesNeedUpdate&&(c=this.attributes.position,void" b.colorsneedupdate="!1);b.uvsNeedUpdate&&(c=this.attributes.uv,void" this},fromgeometry:function(a){a.__directgeometry="(new" me).fromgeometry(a);return="" this.fromdirectgeometry(a.__directgeometry)},="" fromdirectgeometry:function(a){var="" float32array(3*a.vertices.length);this.addattribute("position",(new="" u(b,3)).copyvector3sarray(a.vertices));0<a.normals.length&&(b="new" float32array(3*a.normals.length),this.addattribute("normal",(new="" u(b,3)).copyvector3sarray(a.normals)));0<a.colors.length&&(b="new" float32array(3*a.colors.length),this.addattribute("color",(new="" u(b,3)).copycolorsarray(a.colors)));0<a.uvs.length&&(b="new" float32array(2*a.uvs.length),this.addattribute("uv",(new="" u(b,2)).copyvector2sarray(a.uvs)));="" 0<a.uvs2.length&&(b="new" float32array(2*a.uvs2.length),this.addattribute("uv2",(new="" u(b,2)).copyvector2sarray(a.uvs2)));0<a.indices.length&&(b="new" (65535<ud(a.indices)?uint32array:uint16array)(3*a.indices.length),this.setindex((new="" u(b,1)).copyindicesarray(a.indices)));this.groups="a.groups;for(var" a.morphtargets){for(var="" g="d[e],h=new" z(3*g.length,3);b.push(h.copyvector3sarray(g))}this.morphattributes[c]="b}0<a.skinIndices.length&&(c=new" z(4*="" a.skinindices.length,4),this.addattribute("skinindex",c.copyvector4sarray(a.skinindices)));0<a.skinweights.length&&(c="new" z(4*a.skinweights.length,4),this.addattribute("skinweight",c.copyvector4sarray(a.skinweights)));null!="=a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone());null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone());return" this},computeboundingbox:function(){null="==this.boundingBox&&(this.boundingBox=new" pa);var="" this.boundingbox.makeempty();(isnan(this.boundingbox.min.x)||isnan(this.boundingbox.min.y)||isnan(this.boundingbox.min.z))&&console.error('three.buffergeometry.computeboundingbox:="" computed="" min="" max="" have="" nan="" values.="" the="" "position"="" is="" likely="" to="" values.',this)},computeboundingsphere:function(){var="" pa,b="new" q;return="" function(){null="==this.boundingSphere&&(this.boundingSphere=new" na);var="" a.getcenter(d);for(var="" radius="" nan.="" values.',this)}}}(),computefacenormals:function(){},computevertexnormals:function(){var="" if(void="" u(new="" float32array(d.length),3));else="" for(var="" q,p="new" q,n="new" q,u="new" q,g="new" q;if(a){a="a.array;0===c.length&&this.addGroup(0,a.length);for(var" r="0,A=c.length;r<A;++r)for(f=c[r],g=f.start,h=f.count,f=g,g+=h;f<g;f+=3)h=3*a[f+0],m=3*a[f+1],k=3*a[f+2],l.fromArray(d,h),p.fromArray(d,m),n.fromArray(d,k),u.subVectors(n,p),G.subVectors(l,p),u.cross(G),e[h]+=u.x,e[h+1]+=u.y," e[h+2]+="u.z,e[m]+=u.x,e[m+1]+=u.y,e[m+2]+=u.z,e[k]+=u.x,e[k+1]+=u.y,e[k+2]+=u.z}else" for(f="0,g=d.length;f<g;f+=9)l.fromArray(d,f),p.fromArray(d,f+3),n.fromArray(d,f+6),u.subVectors(n,p),G.subVectors(l,p),u.cross(G),e[f]=u.x,e[f+1]=u.y,e[f+2]=u.z,e[f+3]=u.x,e[f+4]=u.y,e[f+5]=u.z,e[f+6]=u.x,e[f+7]=u.y,e[f+8]=u.z;this.normalizeNormals();b.normal.needsUpdate=!0}},merge:function(a,b){if(!1===(a&&a.isBufferGeometry))console.error("THREE.BufferGeometry.merge():" geometry="" not="" an="" instance="" of="" three.buffergeometry.",="" a);else{void="" c)if(void="" this}},normalizenormals:function(){for(var="" console.warn("three.buffergeometry.tononindexed():="" already="" non-indexed."),="" this;var="" i,b="this.index.array,c=this.attributes,d;for(d" c){for(var="" f.constructor(b.length*e),h,m="0,k=0,l=b.length;k<l;k++){h=b[k]*e;for(var" p="0;p<e;p++)g[m++]=f[h++]}a.addAttribute(d,new" u(g,e))}return="" a},tojson:function(){var="" b)void="" (a[c]="b[c]);return" a}a.data="{attributes:{}};var" d){var="" radius:c.radius});return="" a},clone:function(){return(new="" i).copy(this)},copy:function(a){var="" b,c,d;this.index="null;this.attributes={};this.morphAttributes={};this.groups=[];this.boundingSphere=this.boundingBox=null;this.name=a.name;c=a.index;null!==c&&this.setIndex(c.clone());c=a.attributes;for(b" c)this.addattribute(b,c[b].clone());var="" e){var="" b[c],this.addgroup(e.start,e.count,e.materialindex);b="a.boundingBox;null!==b&&(this.boundingBox=b.clone());b=a.boundingSphere;null!==b&&(this.boundingSphere=b.clone());this.drawRange.start=a.drawRange.start;this.drawRange.count=a.drawRange.count;return" this},dispose:function(){this.dispatchevent({type:"dispose"})}};i.maxindex="65535;Object.assign(I.prototype,pa.prototype);Aa.prototype=Object.assign(Object.create(x.prototype),{constructor:Aa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){x.prototype.copy.call(this," a);this.drawmode="a.drawMode;return" this},updatemorphtargets:function(){var="" a(a,b,c,d,e,f,g){za.barycoordfrompoint(a,b,c,d,r);e.multiplyscalar(r.x);f.multiplyscalar(r.y);g.multiplyscalar(r.z);e.add(f).add(g);return="" e.clone()}function="" b(a,b,c,d,e,f,g){var="" null;w.copy(g);w.applymatrix4(a.matrixworld);c="b.ray.origin.distanceTo(w);return" c<b.near||c="">b.far?null:{distance:c,point:w.clone(),object:a}}function c(c,d,e,f,k,l,p,t){g.fromBufferAttribute(f,l);h.fromBufferAttribute(f,p);m.fromBufferAttribute(f,t);if(c=b(c,d,e,g,h,m,A))k&&(n.fromBufferAttribute(k,l),u.fromBufferAttribute(k,p),G.fromBufferAttribute(k,t),c.uv=a(A,g,h,m,n,u,G)),c.face=
new ha(l,p,t,za.normal(g,h,m)),c.faceIndex=l;return c}var d=new S,e=new cb,f=new Na,g=new q,h=new q,m=new q,k=new q,l=new q,p=new q,n=new D,u=new D,G=new D,r=new q,A=new q,w=new q;return function(q,r){var v=this.geometry,w=this.material,L=this.matrixWorld;if(void 0!==w&&(null===v.boundingSphere&&v.computeBoundingSphere(),f.copy(v.boundingSphere),f.applyMatrix4(L),!1!==q.ray.intersectsSphere(f)&&(d.getInverse(L),e.copy(q.ray).applyMatrix4(d),null===v.boundingBox||!1!==e.intersectsBox(v.boundingBox)))){var C;
if(v.isBufferGeometry){var F,x,w=v.index,H=v.attributes.position,L=v.attributes.uv,D,z;if(null!==w)for(D=0,z=w.count;D<z;d+=3){if(v=w.getx(d),f=w.getx(d+1),x=w.getx(d+2),c=c(this,q,e,h,l,v,f,x))c.faceindex=math.floor(d 0="==b&&(b=-1);void" 3),r.push(c)}else="" for(d="0,z=H.count;D<z;D+=3)if(v=D,F=D+1,x=D+2,C=c(this,q,e,H,L,v,F,x))C.index=v,r.push(C)}else" if(v.isgeometry){var="" j,i,l="w&&w.isMultiMaterial;D=!0===L?w.materials:null;z=v.vertices;F=v.faces;x=v.faceVertexUvs[0];0<x.length&&(H=x);for(var" q="0,M=F.length;Q<M;Q++){var" o="F[Q];C=!0===L?D[O.materialIndex]:w;if(void" 0!="=C){x=z[O.a];J=z[O.b];I=z[O.c];if(!0===C.morphTargets){C=v.morphTargets;var" p="this.morphTargetInfluences;g.set(0,0,0);h.set(0,0,0);m.set(0,0,0);for(var" t="0,W=C.length;T<W;T++){var" s="P[T];if(0!==S){var" r="C[T].vertices;g.addScaledVector(k.subVectors(R[O.a],x),S);h.addScaledVector(l.subVectors(R[O.b],J),S);m.addScaledVector(p.subVectors(R[O.c],I),S)}}g.add(x);h.add(J);m.add(I);x=g;J=h;I=m}if(C=b(this,q,e,x,J,I,A))H&&(P=H[Q],n.copy(P[0]),u.copy(P[1]),G.copy(P[2])," c.uv="a(A,x,J,I,n,u,G)),C.face=O,C.faceIndex=Q,r.push(C)}}}}}}(),clone:function(){return(new" this.constructor(this.geometry,this.material)).copy(this)}});ib.prototype="Object.create(T.prototype);Ib.prototype.constructor=Ib;kb.prototype=Object.create(I.prototype);kb.prototype.constructor=kb;Ac.prototype=Object.create(T.prototype);Ac.prototype.constructor=Ac;lb.prototype=Object.create(I.prototype);lb.prototype.constructor=lb;ra.prototype=Object.create(x.prototype);ra.prototype.constructor=ra;ra.prototype.isCamera=" !0;ra.prototype.getworlddirection="function(){var" a="new" ca;return="" function(b){b="b||new" q;this.getworldquaternion(a);return="" b.set(0,0,-1).applyquaternion(a)}}();ra.prototype.lookat="function(){var" s;return="" function(b){a.lookat(this.position,b,this.up);this.quaternion.setfromrotationmatrix(a)}}();ra.prototype.clone="function(){return(new" this.constructor).copy(this)};ra.prototype.copy="function(a){x.prototype.copy.call(this,a);this.matrixWorldInverse.copy(a.matrixWorldInverse);this.projectionMatrix.copy(a.projectionMatrix);" return="" this};fa.prototype="Object.assign(Object.create(ra.prototype),{constructor:Fa,isPerspectiveCamera:!0,copy:function(a){ra.prototype.copy.call(this,a);this.fov=a.fov;this.zoom=a.zoom;this.near=a.near;this.far=a.far;this.focus=a.focus;this.aspect=a.aspect;this.view=null===a.view?null:Object.assign({},a.view);this.filmGauge=a.filmGauge;this.filmOffset=a.filmOffset;return" this},setfocallength:function(a){a=".5*this.getFilmHeight()/a;this.fov=2*N.RAD2DEG*Math.atan(a);this.updateProjectionMatrix()}," getfocallength:function(){var="" 2*n.rad2deg*math.atan(math.tan(.5*n.deg2rad*this.fov)="" this.zoom)},getfilmwidth:function(){return="" this.filmgauge*math.min(this.aspect,1)},getfilmheight:function(){return="" this.filmgauge="" math.max(this.aspect,1)},setviewoffset:function(a,b,c,d,e,f){this.aspect="a/b;this.view={fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=" null;this.updateprojectionmatrix()},updateprojectionmatrix:function(){var="" g="f.fullWidth,h=f.fullHeight,e=e+f.offsetX*d/g,b=b-f.offsetY*c/h,d=f.width/g*d,c=f.height/h*c;f=this.filmOffset;0!==f&&(e+=a*f/this.getFilmWidth());this.projectionMatrix.makePerspective(e,e+d,b,b-c,a,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.fov=this.fov;a.object.zoom=this.zoom;a.object.near=" this.near;a.object.far="this.far;a.object.focus=this.focus;a.object.aspect=this.aspect;null!==this.view&&(a.object.view=Object.assign({},this.view));a.object.filmGauge=this.filmGauge;a.object.filmOffset=this.filmOffset;return" a}});jb.prototype="Object.assign(Object.create(ra.prototype),{constructor:Jb,isOrthographicCamera:!0,copy:function(a){ra.prototype.copy.call(this,a);this.left=a.left;this.right=a.right;this.top=a.top;this.bottom=a.bottom;this.near=a.near;this.far=a.far;this.zoom=a.zoom;this.view=" null="==a.view?null:Object.assign({},a.view);return" this},setviewoffset:function(a,b,c,d,e,f){this.view="{fullWidth:a,fullHeight:b,offsetX:c,offsetY:d,width:e,height:f};this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null;this.updateProjectionMatrix()},updateProjectionMatrix:function(){var" c="this.zoom/" (this.view.width="" this.view.fullwidth),b="this.zoom/(this.view.height/this.view.fullHeight),f=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height,e=e+this.view.offsetX/c*f,c=e+this.view.width/c*f,a=a-this.view.offsetY/b*d,b=a-this.view.height/b*d;this.projectionMatrix.makeOrthographic(e,c,a,b,this.near,this.far)},toJSON:function(a){a=x.prototype.toJSON.call(this,a);a.object.zoom=this.zoom;a.object.left=this.left;a.object.right=this.right;a.object.top=this.top;a.object.bottom=" this.bottom;a.object.near="this.near;a.object.far=this.far;null!==this.view&&(a.object.view=Object.assign({},this.view));return" a}});var="" lf="0;Kb.prototype.isFogExp2=!0;Kb.prototype.clone=function(){return" new="" kb(this.color.gethex(),this.density)};kb.prototype.tojson="function(a){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};Lb.prototype.isFog=!0;Lb.prototype.clone=function(){return" lb(this.color.gethex(),this.near,this.far)};lb.prototype.tojson="function(a){return{type:"Fog"," color:this.color.gethex(),near:this.near,far:this.far}};mb.prototype="Object.create(x.prototype);mb.prototype.constructor=mb;mb.prototype.copy=function(a,b){x.prototype.copy.call(this,a,b);null!==a.background&&(this.background=a.background.clone());null!==a.fog&&(this.fog=a.fog.clone());null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone());this.autoUpdate=a.autoUpdate;this.matrixAutoUpdate=a.matrixAutoUpdate;return" this};mb.prototype.tojson="function(a){var" b="x.prototype.toJSON.call(this," a);null!="=this.background&&(b.object.background=this.background.toJSON(a));null!==this.fog&&(b.object.fog=this.fog.toJSON());return" b};zd.prototype="Object.assign(Object.create(x.prototype),{constructor:Zd,isLensFlare:!0,copy:function(a){x.prototype.copy.call(this,a);this.positionScreen.copy(a.positionScreen);this.customUpdateCallback=a.customUpdateCallback;for(var" this},add:function(a,b,c,d,e,f){void="" c&&(c="0);void" j(16777215));void="" a,b="this.lensFlares.length,c,d=2*-this.positionScreen.x,e=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+d*c.distance,c.y=this.positionScreen.y+e*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-" c.rotation)}});nb.prototype="Object.create(X.prototype);nb.prototype.constructor=nb;nb.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.rotation=a.rotation;return" this};dc.prototype="Object.assign(Object.create(x.prototype),{constructor:Dc,isSprite:!0,raycast:function(){var" q;return="" function(b,c){a.setfrommatrixposition(this.matrixworld);var="" d="b.ray.distanceSqToPoint(a);d">this.scale.x*this.scale.y/4||c.push({distance:Math.sqrt(d),point:this.position,
face:null,object:this})}}(),clone:function(){return(new this.constructor(this.material)).copy(this)}});Ec.prototype=Object.assign(Object.create(x.prototype),{constructor:Ec,copy:function(a){x.prototype.copy.call(this,a,!1);a=a.levels;for(var b=0,c=a.length;b<c;b++){var 0="==b&&(b=0);b=Math.abs(b);for(var" d="a[b];this.addLevel(d.object.clone(),d.distance)}return" this},addlevel:function(a,b){void="" c="this.levels,d=0;d<c.length&&!(b<c[d].distance);d++);c.splice(d,0,{distance:b,object:a});this.add(a)},getObjectForDistance:function(a){for(var" b="this.levels,c=1,d=b.length;c<d&&!(a<b[c].distance);c++);return" b[c-1].object},raycast:function(){var="" a="new" q;return="" function(b,c){a.setfrommatrixposition(this.matrixworld);var="" q,b="new" function(c){var="" e="1,f=d.length;e<f;e++)if(c">=d[e].distance)d[e-
1].object.visible=!1,d[e].object.visible=!0;else break;for(;e<f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=x.prototype.tojson.call(this,a);a.object.levels=[];for(var 0="==b&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses()," b="this.levels,c=0,d=b.length;c<d;c++){var" e="b[c];a.object.levels.push({object:e.object.uuid,distance:e.distance})}return" a}});object.assign(od.prototype,{calculateinverses:function(){this.boneinverses="[];for(var" a="0,b=this.bones.length;a<b;a++){var" c="new" s;this.bones[a]&&c.getinverse(this.bones[a].matrixworld);this.boneinverses.push(c)}},="" pose:function(){for(var="" a,b="0,c=this.bones.length;b<c;b++)(a=this.bones[b])&&a.matrixWorld.getInverse(this.boneInverses[b]);b=0;for(c=this.bones.length;b<c;b++)if(a=this.bones[b])a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale)},update:function(){var" s;return="" function(){for(var="" this.identitymatrix,this.boneinverses[b]),a.toarray(this.bonematrices,16*b);this.usevertextexture&&(this.bonetexture.needsupdate="!0)}}(),clone:function(){return" new="" od(this.bones,this.boneinverses,this.usevertextexture)}});pd.prototype="Object.assign(Object.create(x.prototype),{constructor:pd,isBone:!0});qd.prototype=Object.assign(Object.create(Aa.prototype),{constructor:qd,isSkinnedMesh:!0,bind:function(a,b){this.skeleton=a;void" if(this.geometry&&this.geometry.isbuffergeometry)for(var="" fa,d="this.geometry.attributes.skinWeight,a=0;a<d.count;a++)b.x=d.getX(a),b.y=d.getY(a)," b.z="d.getZ(a),b.w=d.getW(a),c=1/b.lengthManhattan(),Infinity!==c?b.multiplyScalar(c):b.set(1,0,0,0),d.setXYZW(a,b.x,b.y,b.z,b.w)},updateMatrixWorld:function(a){Aa.prototype.updateMatrixWorld.call(this,!0);"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh" unrecognized="" bindmode:="" "+this.bindmode)},clone:function(){return(new="" this.constructor(this.geometry,this.material,="" this.skeleton.usevertextexture)).copy(this)}});ia.prototype="Object.create(X.prototype);ia.prototype.constructor=ia;ia.prototype.isLineBasicMaterial=!0;ia.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.linecap=a.linecap;this.linejoin=a.linejoin;return" this};ua.prototype="Object.assign(Object.create(x.prototype),{constructor:Ua,isLine:!0,raycast:function(){var" s,b="new" cb,c="new" na;return="" function(d,e){var="" f="d.linePrecision,f=f*f," g="this.geometry,h=this.matrixWorld;null===g.boundingSphere&&g.computeBoundingSphere();c.copy(g.boundingSphere);c.applyMatrix4(h);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(h);b.copy(d.ray).applyMatrix4(a);var" m="new" q,k="new" q,h="new" q,l="new" q,p="this&&this.isLineSegments?2:1;if(g.isBufferGeometry){var" n="g.index,u=g.attributes.position.array;if(null!==n)for(var" r="n[g+1];m.fromArray(u,3*n[g]);k.fromArray(u,3*r);r=b.distanceSqToSegment(m,k,l,h);r">f||(l.applyMatrix4(this.matrixWorld),
r=d.ray.origin.distanceTo(l),r<d.near||r>d.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else for(g=0,G=u.length/3-1;g<g;g+=p)m.fromarray(u,3*g),k.fromarray(u,3*g+3),r=b.distancesqtosegment(m,k,l,h),r>f||(l.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(l),r<d.near||r>d.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}else if(g.isGeometry)for(m=g.vertices,
k=m.length,g=0;g<k-1;g+=p)r=b.distancesqtosegment(m[g],m[g+1],l,h),r>f||(l.applyMatrix4(this.matrixWorld),r=d.ray.origin.distanceTo(l),r<d.near||r>d.far||e.push({distance:r,point:h.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return(new this.constructor(this.geometry,this.material)).copy(this)}});ga.prototype=Object.assign(Object.create(Ua.prototype),{constructor:ga,isLineSegments:!0});Oa.prototype=Object.create(X.prototype);Oa.prototype.constructor=
Oa;Oa.prototype.isPointsMaterial=!0;Oa.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.size=a.size;this.sizeAttenuation=a.sizeAttenuation;return this};Mb.prototype=Object.assign(Object.create(x.prototype),{constructor:Mb,isPoints:!0,raycast:function(){var a=new S,b=new cb,c=new Na;return function(d,e){function f(a,c){var f=b.distanceSqToPoint(a);if(f<l){var h="b.closestPointToPoint(a);h.applyMatrix4(m);var" k="d.ray.origin.distanceTo(h);k<d.near||">d.far||e.push({distance:k,distanceToRay:Math.sqrt(f),point:h.clone(),index:c,face:null,object:g})}}var g=this,h=this.geometry,m=this.matrixWorld,k=d.params.Points.threshold;null===h.boundingSphere&&h.computeBoundingSphere();c.copy(h.boundingSphere);c.applyMatrix4(m);if(!1!==d.ray.intersectsSphere(c)){a.getInverse(m);b.copy(d.ray).applyMatrix4(a);var k=k/((this.scale.x+this.scale.y+this.scale.z)/3),l=k*k,k=new q;if(h.isBufferGeometry){var p=h.index,h=h.attributes.position.array;if(null!==p)for(var n=
p.array,p=0,u=n.length;p<u;p++){var g="n[p];k.fromArray(h,3*G);f(k,G)}else" for(p="0,n=h.length/3;p<n;p++)k.fromArray(h,3*p),f(k,p)}else" for(k="h.vertices,p=0,n=k.length;p<n;p++)f(k[p],p)}}}(),clone:function(){return(new" this.constructor(this.geometry,this.material)).copy(this)}});fc.prototype="Object.assign(Object.create(x.prototype),{constructor:Fc});rd.prototype=Object.create(ea.prototype);rd.prototype.constructor=rd;Nb.prototype=Object.create(ea.prototype);Nb.prototype.constructor=Nb;Nb.prototype.isCompressedTexture=" !0;sd.prototype="Object.create(ea.prototype);sd.prototype.constructor=sd;Gc.prototype=Object.create(ea.prototype);Gc.prototype.constructor=Gc;Gc.prototype.isDepthTexture=!0;Ob.prototype=Object.create(I.prototype);Ob.prototype.constructor=Ob;Hc.prototype=Object.create(T.prototype);Hc.prototype.constructor=Hc;Pb.prototype=Object.create(I.prototype);Pb.prototype.constructor=Pb;Ic.prototype=Object.create(T.prototype);Ic.prototype.constructor=Ic;Ba.prototype=Object.create(I.prototype);Ba.prototype.constructor=" ba;jc.prototype="Object.create(T.prototype);Jc.prototype.constructor=Jc;Qb.prototype=Object.create(Ba.prototype);Qb.prototype.constructor=Qb;Kc.prototype=Object.create(T.prototype);Kc.prototype.constructor=Kc;ob.prototype=Object.create(Ba.prototype);ob.prototype.constructor=ob;Lc.prototype=Object.create(T.prototype);Lc.prototype.constructor=Lc;Rb.prototype=Object.create(Ba.prototype);Rb.prototype.constructor=Rb;Mc.prototype=Object.create(T.prototype);Mc.prototype.constructor=Mc;Sb.prototype=Object.create(Ba.prototype);" sb.prototype.constructor="Sb;Nc.prototype=Object.create(T.prototype);Nc.prototype.constructor=Nc;Tb.prototype=Object.create(I.prototype);Tb.prototype.constructor=Tb;Oc.prototype=Object.create(T.prototype);Oc.prototype.constructor=Oc;Ub.prototype=Object.create(I.prototype);Ub.prototype.constructor=Ub;Pc.prototype=Object.create(T.prototype);Pc.prototype.constructor=Pc;Vb.prototype=Object.create(I.prototype);Vb.prototype.constructor=Vb;var" ia="{area:function(a){for(var" b="a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=" a[d].x*a[e].y-a[e].x*a[d].y;return.5*c},triangulate:function(){return="" function(a,b){var="" c="a.length;if(3">c)return null;var d=[],e=[],f=[],g,h,m;if(0<ia.area(a))for(h=0;h<c;h++)e[h]=h;else for(h="0;h<c;h++)e[h]=c-1-h;var" k="2*c;for(h=c-1;2<c;){if(0">=k--){console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()");break}g=h;c<=g&&(g=0);h=g+1;c<=h&&(h=0);m=h+1;c<=m&&(m=0);var l;a:{var="" p,n,q,g,r,a,w,y;p="a[e[g]].x;n=a[e[g]].y;q=a[e[h]].x;G=a[e[h]].y;r=a[e[m]].x;A=a[e[m]].y;if(0">=(q-
p)*(A-n)-(G-n)*(r-p))l=!1;else{var K,v,E,x,C,F,D,H,z,J;K=r-q;v=A-G;E=p-r;x=n-A;C=q-p;F=G-n;for(l=0;l<c;l++)if(w=a[e[l]].x,y=a[e[l]].y,!(w===p&&y===n||w===q&&y===g||w===r&&y===a)&&(d=w-p,h=y-n,z=w-q,j=y-g,w-=r,y-=a,z=k*j-v*z,d=c*h-f*d,h=e*y-x*w,z>=-Number.EPSILON&&H>=-Number.EPSILON&&D>=-Number.EPSILON)){l=!1;break a}l=!0}}if(l){d.push([a[e[g]],a[e[h]],a[e[m]]]);f.push([e[g],e[h],e[m]]);g=h;for(m=h+1;m<c;g++,m++)e[g]=e[m];c--;k=2*c}}return b?f:d}}(),triangulateshape:function(a,b){function="" c(a){var="" b="a.length;2<b&&a[b-1].equals(a[0])&&a.pop()}function" d(a,b,c){return="" a.x!="=b.x?a.x<b.x?a.x<=c.x&&c.x<=b.x:b.x<=c.x&&c.x<=a.x:a.y<b.y?a.y<=c.y&&c.y<=b.y:b.y<=c.y&&c.y<=a.y}function" e(a,b,c,e,f){var="" g="b.x-a.x,h=b.y-a.y,k=e.x-c.x,m=e.y-c.y,l=a.x-c.x,n=a.y-c.y,p=h*k-g*m,t=h*l-g*n;if(Math.abs(p)">Number.EPSILON){if(0<p){if(0>t||t>p)return[];k=m*l-k*n;if(0>k||k>p)return[]}else{if(0<t||t<p)return[];k=m*l-k*n;if(0<k||k<p)return[]}if(0===k)return!f||0!==t&&t!==p?[a]:[];if(k===p)return!f||0!==t&&t!==p?[b]:[]; if(0="==t)return[c];if(t===p)return[e];f=k/p;return[{x:a.x+f*g,y:a.y+f*h}]}if(0!==t||m*l!==k*n)return[];h=0===g&&0===h;k=0===k&&0===m;if(h&&k)return" a.x!="=c.x||a.y!==c.y?[]:[a];if(h)return" d(c,e,a)?[a]:[];if(k)return="" d(a,b,c)?[c]:[];0!="=g?(a.x<b.x?(g=a,k=a.x,h=b,a=b.x):(g=b,k=b.x,h=a,a=a.x),c.x<e.x?(b=c,p=c.x,m=e,c=e.x):(b=e,p=e.x,m=c,c=c.x)):(a.y<b.y?(g=a,k=a.y,h=b,a=b.y):(g=b,k=b.y,h=a,a=a.y),c.y<e.y?(b=c,p=c.y,m=e,c=e.y):(b=e,p=e.y,m=c,c=c.y));return" k<="p?a<p?[]:a===p?f?[]:[b]:a<=c?[b,h]:[b,m]:" k="">c?[]:k===c?f?[]:[g]:a<=c?[g,h]:[g,m]}function f(a,b,c,d){var="" e="b.x-a.x,f=b.y-a.y;b=c.x-a.x;c=c.y-a.y;var" g="d.x-a.x;d=d.y-a.y;a=e*c-f*b;e=e*d-f*g;return" math.abs(a)="">Number.EPSILON?(b=g*c-d*b,0<a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.foreach(c);var g,h,m,k,l,p="{};m=a.concat();g=0;for(h=b.length;g<h;g++)Array.prototype.push.apply(m,b[g]);g=0;for(h=m.length;g<h;g++)l=m[g].x+":"+m[g].y,void" 0!="=p[l]&&console.warn("THREE.ShapeUtils:" duplicate="" point",l,g),p[l]="g;g=function(a,b){function" c(a,b){var="" d="h.length-" 1,e="a-1;0">e&&(e=d);var g=a+1;g>d&&(g=0);d=f(h[a],h[e],h[g],k[b]);if(!d)return!1;d=k.length-1;e=b-1;0>e&&(e=d);g=b+1;g>d&&(g=0);return(d=f(k[b],k[e],k[g],h[a]))?!0:!1}function d(a,b){var c,f;for(c=0;c<h.length;c++)if(f=c+1,f%=h.length,f=e(a,b,h[c],h[f],!0),0<f.length)return!0;return!1}function g(a,c){var="" d,f,h,k;for(d="0;d<m.length;d++)for(f=b[m[d]],h=0;h<f.length;h++)if(k=h+1,k%=f.length,k=e(a,c,f[h],f[k],!0),0<k.length)return!0;return!1}var" h="a.concat(),k,m=[],l,n,p,t,q,x=[],D,z,J,I=0;for(l=b.length;I<" l;i++)m.push(i);d="0;for(var" q="2*m.length;0<m.length;){Q--;if(0">Q){console.log("Infinite Loop! Holes left:"+m.length+", Probably Hole outside Shape!");break}for(n=D;n<h.length;n++){p=h[n];l=-1;for(i=0;i<m.length;i++)if(t=m[i],q=p.x+":"+p.y+":"+t,void 0="==x[q]){k=b[t];for(z=0;z<k.length;z++)if(t=k[z],c(n,z)&&!d(p,t)&&!g(p,t)){l=z;m.splice(I,1);D=h.slice(0,n+1);t=h.slice(n);z=k.slice(l);J=k.slice(0,l+1);h=D.concat(z).concat(J).concat(t);D=n;break}if(0<=l)break;x[q]=!0}if(0<=l)break}}return" h}(a,b);var="" n="Ia.triangulate(g,!1);g=0;for(h=n.length;g<h;g++)for(k=n[g],m=0;3">m;m++)l=k[m].x+":"+k[m].y,l=p[l],void 0!==l&&(k[m]=l);return n.concat()},isClockWise:function(a){return 0>Ia.area(a)}};La.prototype=Object.create(T.prototype);La.prototype.constructor=La;La.prototype.addShapeList=function(a,b){for(var c=a.length,d=0;d<c;d++)this.addshape(a[d],b)};la.prototype.addshape=function(a,b){function c(a,b,c){b||console.error("three.extrudegeometry:="" vec="" does="" not="" exist");return="" b.clone().multiplyscalar(c).add(a)}="" function="" d(a,b,c){var="" d,e,f;e="a.x-b.x;f=a.y-b.y;d=c.x-a.x;var" g="c.y-a.y,h=e*e+f*f;if(Math.abs(e*g-f*d)">Number.EPSILON){var k=Math.sqrt(h),m=Math.sqrt(d*d+g*g),h=b.x-f/k;b=b.y+e/k;g=((c.x-g/m-h)*g-(c.y+d/m-b)*d)/(e*g-f*d);d=h+e*g-a.x;e=b+f*g-a.y;f=d*d+e*e;if(2>=f)return new D(d,e);f=Math.sqrt(f/2)}else a=!1,e>Number.EPSILON?d>Number.EPSILON&&(a=!0):e<-number.epsilon?d<-number.epsilon&&(a=!0):math.sign(f)===math.sign(g)&&(a=!0),a?(d=-f,f=math.sqrt(h)):(d=e,e=f,f=math.sqrt(h 2));return="" new="" d(d="" f,e="" f)}="" function="" e(a,b){var="" c,d;for(r="a.length;0<=--R;){c=R;d=R-1;0">d&&(d=a.length-1);var e,f=u+2*l;for(e=0;e<f;e++){var g="U*e,h=U*(e+1),k=b+c+g,g=b+d+g,m=b+d+h,h=b+c+h,k=k+H,g=g+H,m=m+H,h=h+H;J.faces.push(new" ha(k,g,h,null,null,1));j.faces.push(new="" ha(g,m,h,null,null,1));k="w.generateSideWallUV(J,k,g,m,h);J.faceVertexUvs[0].push([k[0],k[1],k[3]]);J.faceVertexUvs[0].push([k[1],k[2],k[3]])}}}function" f(a,b,c){j.vertices.push(new="" q(a,b,c))}function="" g(a,b,c){a+="H;b+=H;c+=H;J.faces.push(new" ha(a,b,c,null,null,="" 0));a="w.generateTopUV(J,a,b,c);J.faceVertexUvs[0].push(a)}var" h="void" 0!="=b.amount?b.amount:100,m=void" g.computefrenetframes(u,!1),x="new" q,v="new" q,e="new" q);p||(k="m=l=0);var" z,c,f,j="this,H=this.vertices.length,G=a.extractPoints(n),n=G.shape,I=G.holes;if(G=!Ia.isClockWise(n)){n=n.reverse();C=0;for(F=I.length;C<F;C++)z=I[C],Ia.isClockWise(z)&&(I[C]=z.reverse());G=!1}var" t="Ia.triangulateShape(n,I),S=n;C=0;for(F=I.length;C<F;C++)z=I[C],n=n.concat(z);var" n,q,m,o,p,u="n.length,W,V=T.length,G=[],R=0;M=S.length;N=M-1;for(Q=R+1;R<M;R++,N++,Q++)N===M&&(N=0),Q===M&&(Q=0),G[R]=d(S[R],S[N],S[Q]);var" x="[],Z,ca=G.concat();" c="0;for(F=I.length;C<F;C++){z=I[C];Z=[];R=0;M=z.length;N=M-1;for(Q=R+1;R<M;R++,N++,Q++)N===M&&(N=0),Q===M&&(Q=0),Z[R]=d(z[R],z[N],z[Q]);X.push(Z);ca=ca.concat(Z)}for(N=0;N<l;N++){M=N/l;O=m*Math.cos(M*Math.PI/2);Q=k*Math.sin(M*Math.PI/2);R=0;for(M=S.length;R<M;R++)P=c(S[R],G[R],Q),f(P.x,P.y,-O);C=0;for(F=I.length;C<F;C++)for(z=I[C],Z=X[C],R=0,M=z.length;R<M;R++)P=c(z[R],Z[R],Q),f(P.x,P.y,-O)}Q=k;for(R=0;R<U;R++)P=p?c(n[R],ca[R],Q):n[R],A?(v.copy(y.normals[0]).multiplyScalar(P.x),x.copy(y.binormals[0]).multiplyScalar(P.y)," e.copy(r[0]).add(v).add(x),f(e.x,e.y,e.z)):f(p.x,p.y,0);for(m="1;M<=u;M++)for(R=0;R<U;R++)P=p?c(n[R],ca[R],Q):n[R],A?(v.copy(y.normals[M]).multiplyScalar(P.x),x.copy(y.binormals[M]).multiplyScalar(P.y),E.copy(r[M]).add(v).add(x),f(E.x,E.y,E.z)):f(P.x,P.y,h/u*M);for(N=l-1;0<=N;N--){M=N/l;O=m*Math.cos(M*Math.PI/2);Q=k*Math.sin(M*Math.PI/2);R=0;for(M=S.length;R<M;R++)P=c(S[R],G[R],Q),f(P.x,P.y,h+O);C=0;for(F=I.length;C<F;C++)for(z=I[C],Z=X[C],R=0,M=z.length;R<M;R++)P=c(z[R],Z[R],Q),A?f(P.x,P.y+r[u-1].y," r[u-1].x+o):f(p.x,p.y,h+o)}(function(){if(p){var="" a="0*U;for(R=0;R<V;R++)W=T[R],g(W[2]+a,W[1]+a,W[0]+a);a=U*(u+2*l);for(R=0;R<V;R++)W=T[R],g(W[0]+a,W[1]+a,W[2]+a)}else{for(R=0;R<V;R++)W=T[R],g(W[2],W[1],W[0]);for(R=0;R<V;R++)W=T[R],g(W[0]+U*u,W[1]+U*u,W[2]+U*u)}})();(function(){var" d(b.x,b.y),new="" d(c.x,c.y),new="" d(d.x,d.y)]},="" generatesidewalluv:function(a,b,c,d,e){a="a.vertices;b=a[b];c=a[c];d=a[d];e=a[e];return.01">Math.abs(b.y-c.y)?[new D(b.x,1-b.z),new D(c.x,1-c.z),new D(d.x,1-d.z),new D(e.x,1-e.z)]:[new D(b.y,1-b.z),new D(c.y,1-c.z),new D(d.y,1-d.z),new D(e.y,1-e.z)]}};Qc.prototype=Object.create(La.prototype);Qc.prototype.constructor=Qc;Rc.prototype=Object.create(T.prototype);Rc.prototype.constructor=Rc;pb.prototype=Object.create(I.prototype);pb.prototype.constructor=pb;Sc.prototype=Object.create(T.prototype);Sc.prototype.constructor=
Sc;Wb.prototype=Object.create(I.prototype);Wb.prototype.constructor=Wb;Tc.prototype=Object.create(T.prototype);Tc.prototype.constructor=Tc;Xb.prototype=Object.create(I.prototype);Xb.prototype.constructor=Xb;Yb.prototype=Object.create(T.prototype);Yb.prototype.constructor=Yb;Zb.prototype=Object.create(I.prototype);Zb.prototype.constructor=Zb;$b.prototype=Object.create(I.prototype);$b.prototype.constructor=$b;qb.prototype=Object.create(T.prototype);qb.prototype.constructor=qb;Va.prototype=Object.create(I.prototype);
Va.prototype.constructor=Va;Uc.prototype=Object.create(qb.prototype);Uc.prototype.constructor=Uc;Vc.prototype=Object.create(Va.prototype);Vc.prototype.constructor=Vc;Wc.prototype=Object.create(T.prototype);Wc.prototype.constructor=Wc;ac.prototype=Object.create(I.prototype);ac.prototype.constructor=ac;var Ma=Object.freeze({WireframeGeometry:Ob,ParametricGeometry:Hc,ParametricBufferGeometry:Pb,TetrahedronGeometry:Jc,TetrahedronBufferGeometry:Qb,OctahedronGeometry:Kc,OctahedronBufferGeometry:ob,IcosahedronGeometry:Lc,
IcosahedronBufferGeometry:Rb,DodecahedronGeometry:Mc,DodecahedronBufferGeometry:Sb,PolyhedronGeometry:Ic,PolyhedronBufferGeometry:Ba,TubeGeometry:Nc,TubeBufferGeometry:Tb,TorusKnotGeometry:Oc,TorusKnotBufferGeometry:Ub,TorusGeometry:Pc,TorusBufferGeometry:Vb,TextGeometry:Qc,SphereGeometry:Rc,SphereBufferGeometry:pb,RingGeometry:Sc,RingBufferGeometry:Wb,PlaneGeometry:Ac,PlaneBufferGeometry:lb,LatheGeometry:Tc,LatheBufferGeometry:Xb,ShapeGeometry:Yb,ShapeBufferGeometry:Zb,ExtrudeGeometry:La,EdgesGeometry:$b,
ConeGeometry:Uc,ConeBufferGeometry:Vc,CylinderGeometry:qb,CylinderBufferGeometry:Va,CircleGeometry:Wc,CircleBufferGeometry:ac,BoxGeometry:Ib,BoxBufferGeometry:kb});bc.prototype=Object.create(Ha.prototype);bc.prototype.constructor=bc;bc.prototype.isShadowMaterial=!0;cc.prototype=Object.create(Ha.prototype);cc.prototype.constructor=cc;cc.prototype.isRawShaderMaterial=!0;Xc.prototype={constructor:Xc,isMultiMaterial:!0,toJSON:function(a){for(var b={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},
uuid:this.uuid,type:this.type,materials:[]},c=this.materials,d=0,e=c.length;d<e;d++){var 0="==a&&(a="");void" f="c[d].toJSON(a);delete" f.metadata;b.materials.push(f)}b.visible="this.visible;return" b},clone:function(){for(var="" a="new" this.constructor,b="0;b<this.materials.length;b++)a.materials.push(this.materials[b].clone());a.visible=this.visible;return" a}};qa.prototype="Object.create(X.prototype);Qa.prototype.constructor=Qa;Qa.prototype.isMeshStandardMaterial=!0;Qa.prototype.copy=function(a){X.prototype.copy.call(this,a);" this.defines="{STANDARD:""};this.color.copy(a.color);this.roughness=a.roughness;this.metalness=a.metalness;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;" this.displacementscale="a.displacementScale;this.displacementBias=a.displacementBias;this.roughnessMap=a.roughnessMap;this.metalnessMap=a.metalnessMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.envMapIntensity=a.envMapIntensity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=" a.morphnormals;return="" this};rb.prototype="Object.create(Qa.prototype);rb.prototype.constructor=rb;rb.prototype.isMeshPhysicalMaterial=!0;rb.prototype.copy=function(a){Qa.prototype.copy.call(this,a);this.defines={PHYSICAL:""};this.reflectivity=a.reflectivity;this.clearCoat=a.clearCoat;this.clearCoatRoughness=a.clearCoatRoughness;return" this};ca.prototype="Object.create(X.prototype);Ca.prototype.constructor=Ca;Ca.prototype.isMeshPhongMaterial=!0;Ca.prototype.copy=function(a){X.prototype.copy.call(this," a);this.color.copy(a.color);this.specular.copy(a.specular);this.shininess="a.shininess;this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=a.lightMapIntensity;this.aoMap=a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;this.displacementScale=" a.displacementscale;this.displacementbias="a.displacementBias;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;this.skinning=a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return" this};sb.prototype="Object.create(Ca.prototype);sb.prototype.constructor=sb;sb.prototype.isMeshToonMaterial=!0;sb.prototype.copy=function(a){Ca.prototype.copy.call(this,a);this.gradientMap=a.gradientMap;return" this};tb.prototype="Object.create(X.prototype);tb.prototype.constructor=tb;tb.prototype.isMeshNormalMaterial=!0;tb.prototype.copy=function(a){X.prototype.copy.call(this,a);this.bumpMap=a.bumpMap;this.bumpScale=a.bumpScale;this.normalMap=a.normalMap;this.normalScale.copy(a.normalScale);this.displacementMap=a.displacementMap;" this};ub.prototype="Object.create(X.prototype);ub.prototype.constructor=ub;ub.prototype.isMeshLambertMaterial=!0;ub.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.map=a.map;this.lightMap=a.lightMap;this.lightMapIntensity=" a.lightmapintensity;this.aomap="a.aoMap;this.aoMapIntensity=a.aoMapIntensity;this.emissive.copy(a.emissive);this.emissiveMap=a.emissiveMap;this.emissiveIntensity=a.emissiveIntensity;this.specularMap=a.specularMap;this.alphaMap=a.alphaMap;this.envMap=a.envMap;this.combine=a.combine;this.reflectivity=a.reflectivity;this.refractionRatio=a.refractionRatio;this.wireframe=a.wireframe;this.wireframeLinewidth=a.wireframeLinewidth;this.wireframeLinecap=a.wireframeLinecap;this.wireframeLinejoin=a.wireframeLinejoin;" this.skinning="a.skinning;this.morphTargets=a.morphTargets;this.morphNormals=a.morphNormals;return" this};vb.prototype="Object.create(X.prototype);vb.prototype.constructor=vb;vb.prototype.isLineDashedMaterial=!0;vb.prototype.copy=function(a){X.prototype.copy.call(this,a);this.color.copy(a.color);this.linewidth=a.linewidth;this.scale=a.scale;this.dashSize=a.dashSize;this.gapSize=a.gapSize;return" this};var="" xf="Object.freeze({ShadowMaterial:bc,SpriteMaterial:nb,RawShaderMaterial:cc,ShaderMaterial:Ha,PointsMaterial:Oa," multimaterial:xc,meshphysicalmaterial:rb,meshstandardmaterial:qa,meshphongmaterial:ca,meshtoonmaterial:sb,meshnormalmaterial:tb,meshlambertmaterial:ub,meshdepthmaterial:ab,meshbasicmaterial:ka,linedashedmaterial:vb,linebasicmaterial:ia,material:x}),ld="{enabled:!1,files:{},add:function(a,b){!1!==this.enabled&&(this.files[a]=b)},get:function(a){if(!1!==this.enabled)return" this.files[a]},remove:function(a){delete="" this.files[a]},clear:function(){this.files="{}}},ta=new" $d;object.assign(sa.prototype,{load:function(a,="" b,c,d){void="" 0!="=this.path&&(a=this.path+a);var" e="this,f=ld.get(a);if(void" e.manager.itemstart(a),settimeout(function(){b&&b(f);e.manager.itemend(a)},0),f;var="" g="a.match(/^data:(.*?)(;base64)?,(.*)$/);if(g){var" h="g[1],m=!!g[2],g=g[3],g=window.decodeURIComponent(g);m&&(g=window.atob(g));try{var" k,l="(this.responseType||"").toLowerCase();switch(l){case" "arraybuffer":case="" "blob":k="new" arraybuffer(g.length);for(var="" p="new" uint8array(k),m="0;m<g.length;m++)p[m]=g.charCodeAt(m);" "blob"="==l&&(k=new" blob([k],{type:h}));break;case="" "document":k="(new" domparser).parsefromstring(g,h);break;case="" "json":k="JSON.parse(g);break;default:k=g}window.setTimeout(function(){b&&b(k);e.manager.itemEnd(a)},0)}catch(q){window.setTimeout(function(){d&&d(q);e.manager.itemError(a)},0)}}else{var" n="new" xmlhttprequest;n.open("get",a,!0);n.addeventlistener("load",function(c){var="" http="" status="" received."),="" b&&b(f),e.manager.itemend(a)):(d&&d(c),e.manager.itemerror(a))},!1);void="" n},setpath:function(a){this.path="a;return" this},setresponsetype:function(a){this.responsetype="a;return" this},setwithcredentials:function(a){this.withcredentials="a;return" this},setmimetype:function(a){this.mimetype="a;return" this}});object.assign(re.prototype,{load:function(a,b,c,d){function="" e(e){m.load(a[e],function(a){a="f._parser(a,!0);g[e]={width:a.width,height:a.height,format:a.format,mipmaps:a.mipmaps};k+=1;6===k&&(1===a.mipmapCount&&(h.minFilter=1006),h.format=a.format,h.needsUpdate=!0,b&&b(h))},c,d)}var" nb;="" h.image="g;var" m="new" sa(this.manager);m.setpath(this.path);m.setresponsetype("arraybuffer");if(array.isarray(a))for(var="" k="0,l=0,p=a.length;l<p;++l)e(l);else" m.load(a,function(a){a="f._parser(a,!0);if(a.isCubemap)for(var" c="a.mipmaps.length/a.mipmapCount,d=0;d<c;d++){g[d]={mipmaps:[]};for(var" h.image.width="a.width,h.image.height=a.height,h.mipmaps=a.mipmaps;1===a.mipmapCount&&" (h.minfilter="1006);h.format=a.format;h.needsUpdate=!0;b&&b(h)},c,d);return" h},setpath:function(a){this.path="a;return" this}});object.assign(ae.prototype,{load:function(a,b,c,d){var="" eb,g="new" sa(this.manager);g.setresponsetype("arraybuffer");g.load(a,function(a){if(a="e._parser(a))void" a.magfilter?a.magfilter:1006,f.minfilter="void" f}});object.assign(yc.prototype,{load:function(a,b,c,d){void="" e.manager.itemstart(a),settimeout(function(){b&&="" b(f);e.manager.itemend(a)},0),f;c="document.createElementNS("http://www.w3.org/1999/xhtml","img");c.addEventListener("load",function(){ld.add(a,this);b&&b(this);e.manager.itemEnd(a)},!1);c.addEventListener("error",function(b){d&&d(b);e.manager.itemError(a)},!1);void" c},setcrossorigin:function(a){this.crossorigin="a;return" this},setpath:function(a){this.path="a;return" this}});object.assign(be.prototype,{load:function(a,="" b,c,d){function="" e(c){g.load(a[c],function(a){f.images[c]="a;h++;6===h&&(f.needsUpdate=!0,b&&b(f))},void" 0,d)}var="" za,g="new" yc(this.manager);g.setcrossorigin(this.crossorigin);g.setpath(this.path);var="" f},setcrossorigin:function(a){this.crossorigin="a;return" this}});object.assign(td.prototype,{load:function(a,b,c,d){var="" ea,f="new" yc(this.manager);f.setcrossorigin(this.crossorigin);f.setpath(this.path);f.load(a,="" function(c){var="" d="0<a.search(/\.(jpg|jpeg)$/)||0===a.search(/^data\:image\/jpeg/);e.format=d?1022:1023;e.image=c;e.needsUpdate=!0;void" e},setcrossorigin:function(a){this.crossorigin="a;return" this}});ma.prototype="Object.assign(Object.create(x.prototype),{constructor:ma,isLight:!0,copy:function(a){x.prototype.copy.call(this,a);this.color.copy(a.color);this.intensity=a.intensity;return" this},tojson:function(a){a="x.prototype.toJSON.call(this," a);a.object.color="this.color.getHex();a.object.intensity=this.intensity;void" a}});ud.prototype="Object.assign(Object.create(ma.prototype),{constructor:ud," ishemispherelight:!0,copy:function(a){ma.prototype.copy.call(this,a);this.groundcolor.copy(a.groundcolor);return="" this}});object.assign(wb.prototype,{copy:function(a){this.camera="a.camera.clone();this.bias=a.bias;this.radius=a.radius;this.mapSize.copy(a.mapSize);return" this},clone:function(){return(new="" this.constructor).copy(this)},tojson:function(){var="" a.camera="this.camera.toJSON(!1).object;delete" a.camera.matrix;return="" a}});vd.prototype="Object.assign(Object.create(wb.prototype),{constructor:vd,isSpotLightShadow:!0,update:function(a){var" b="2*N.RAD2DEG*a.angle,c=this.mapSize.width/this.mapSize.height;a=a.distance||500;var" a);this.distance="a.distance;this.angle=a.angle;this.penumbra=a.penumbra;this.decay=a.decay;this.target=a.target.clone();this.shadow=a.shadow.clone();return" this}});xd.prototype="Object.assign(Object.create(ma.prototype),{constructor:xd,isPointLight:!0,copy:function(a){ma.prototype.copy.call(this,a);this.distance=a.distance;this.decay=a.decay;this.shadow=a.shadow.clone();return" this}});yd.prototype="Object.assign(Object.create(wb.prototype),{constructor:yd});zd.prototype=Object.assign(Object.create(ma.prototype)," {constructor:zd,isdirectionallight:!0,copy:function(a){ma.prototype.copy.call(this,a);this.target="a.target.clone();this.shadow=a.shadow.clone();return" this}});ad.prototype="Object.assign(Object.create(ma.prototype),{constructor:Ad,isAmbientLight:!0});var" na="{arraySlice:function(a,b,c){return" na.istypedarray(a)?new="" a.constructor(a.subarray(b,c)):a.slice(b,c)},convertarray:function(a,b,c){return!a||!c&&a.constructor="==b?a:"number"===typeof" b.bytes_per_element?new="" b(a):array.prototype.slice.call(a)},="" istypedarray:function(a){return="" arraybuffer.isview(a)&&!(a="" instanceof="" dataview)},getkeyframeorder:function(a){for(var="" a[b]-a[c]});return="" c},sortedarray:function(a,b,c){for(var="" a.constructor(d),f="0,g=0;g!==d;++f)for(var" e},flattenjson:function(a,b,c,d){for(var="" if(void="" d;this._cachedindex="c=b.length;return" this.afterend_(c-="" 1,a,e)}if(c="==f)break;e=d;d=b[++c];if(a<d)break" b}d="b.length;break" c}if(a="">=e)break a;else{f=b[1];a<f&&(c=2,e=f);for(f=c-2;;){if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(c===f)break;d=e;e=b[--c-1];if(a">=e)break b}d=c;c=0}}for(;c<d;)e=c+d>>>1,a<b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void 0="==e)return" this._cachedindex="0,this.beforeStart_(0,a,d);if(void" this.interpolate_(c,="" e,a,d)},settings:null,defaultsettings_:{},getsettings_:function(){return="" this.settings||this.defaultsettings_},copysamplevalue_:function(a){var="" b="this.resultBuffer,c=this.sampleValues,d=this.valueSize;a*=d;for(var" e="0;e!==d;++e)b[e]=c[a+e];return" b},interpolate_:function(a,b,c,d){throw="" error("call="" to="" abstract="" method");},intervalchanged_:function(a,b,c){}};object.assign(xa.prototype,{beforestart_:xa.prototype.copysamplevalue_,afterend_:xa.prototype.copysamplevalue_});bd.prototype="Object.assign(Object.create(xa.prototype)," {constructor:bd,defaultsettings_:{endingstart:2400,endingend:2400},intervalchanged_:function(a,b,c){var="" d="this.parameterPositions,e=a-2,f=a+1,g=d[e],h=d[f];if(void" 2401:e="a;g=2*b-c;break;case" 2402:e="d.length-2;g=b+d[e]-d[e+1];break;default:e=a,g=c}if(void" 2401:f="a;h=2*c-b;break;case" 2402:f="1;h=c+d[1]-d[0];break;default:f=a-1,h=b}a=.5*(c-b);d=this.valueSize;this._weightPrev=a/(b-g);this._weightNext=" a="" (h-c);this._offsetprev="e*d;this._offsetNext=f*d},interpolate_:function(a,b,c,d){var" h="a-g,m=this._offsetPrev,k=this._offsetNext,l=this._weightPrev,p=this._weightNext,n=(c-b)/(d-b);c=n*n;d=c*n;b=-l*d+2*l*c-l*n;l=(1+l)*d+(-1.5-2*l)*c+(-.5+l)*n+1;n=(-1-p)*d+(1.5+p)*c+.5*n;p=p*d-p*c;for(c=0;c!==g;++c)e[c]=b*f[m+c]+l*f[h+c]+n*f[a+c]+p*f[k+c];return" e}});zc.prototype="Object.assign(Object.create(xa.prototype),{constructor:Zc,interpolate_:function(a," b,c,d){var="" e}});cd.prototype="Object.assign(Object.create(xa.prototype),{constructor:Cd,interpolate_:function(a,b,c,d){return" this.copysamplevalue_(a-1)}});var="" xa;xa="{TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(a){return" new="" cd(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodlinear:function(a){return="" zc(this.times,="" this.values,this.getvaluesize(),a)},interpolantfactorymethodsmooth:function(a){return="" bd(this.times,this.values,this.getvaluesize(),a)},setinterpolation:function(a){var="" b;switch(a){case="" 2300:b="this.InterpolantFactoryMethodDiscrete;break;case" 2301:b="this.InterpolantFactoryMethodLinear;break;case" 2302:b="this.InterpolantFactoryMethodSmooth}if(void" interpolation="" for="" "+this.valuetypename+"="" keyframe="" track="" named="" "+this.name;if(void="" else="" throw="" error(b);console.warn(b)}else="" this.createinterpolant="b},getInterpolation:function(){switch(this.createInterpolant){case" this.interpolantfactorymethoddiscrete:return="" 2300;case="" this.interpolantfactorymethodlinear:return="" 2301;case="" this.interpolantfactorymethodsmooth:return="" 2302}},getvaluesize:function(){return="" this.values.length="" this.times.length},shift:function(a){if(0!="=a)for(var" this},scale:function(a){if(1!="=a)for(var" 0,d="b.length;c!==d;++c)b[c]*=a;return" this},trim:function(a,b){for(var="" c="this.times,d=c.length,e=0,f=d-1;e!==d&&c[e]<a;)++e;for(;-1!==f&&c[f]">b;)--f;++f;if(0!==e||f!==d)e>=f&&(f=Math.max(f,1),e=f-1),d=this.getValueSize(),this.times=na.arraySlice(c,e,f),this.values=na.arraySlice(this.values,e*d,f*d);return this},validate:function(){var a=!0,b=this.getValueSize();0!==b-Math.floor(b)&&(console.error("invalid value size in track",this),a=!1);var c=this.times,b=this.values,d=c.length;0===d&&(console.error("track is empty",
this),a=!1);for(var e=null,f=0;f!==d;f++){var g=c[f];if("number"===typeof g&&isNaN(g)){console.error("time is not a valid number",this,f,g);a=!1;break}if(null!==e&&e>g){console.error("out of order keys",this,f,g,e);a=!1;break}e=g}if(void 0!==b&&na.isTypedArray(b))for(f=0,c=b.length;f!==c;++f)if(d=b[f],isNaN(d)){console.error("value is not a valid number",this,f,d);a=!1;break}return a},optimize:function(){for(var a=this.times,b=this.values,c=this.getValueSize(),d=2302===this.getInterpolation(),e=1,
f=a.length-1,g=1;g<f;++g){var 0="==a.type)throw" h="!1,m=a[g];if(m!==a[g+1]&&(1!==g||m!==m[0]))if(d)h=!0;else" for(var="" k="g*c,l=k-c,p=k+c,m=0;m!==c;++m){var" n="b[k+m];if(n!==b[l+m]||n!==b[p+m]){h=!0;break}}if(h){if(g!==e)for(a[e]=a[g],h=g*c,k=e*c,m=0;m!==c;++m)b[k+m]=b[h+m];++e}}if(0<f){a[e]=a[f];h=f*c;k=e*c;for(m=0;m!==c;++m)b[k+m]=b[h+m];++e}e!==a.length&&(this.times=na.arraySlice(a,0,e),this.values=na.arraySlice(b,0,e*c));return" this}};dc.prototype="Object.assign(Object.create(Xa),{constructor:dc,ValueTypeName:"vector"});" dd.prototype="Object.assign(Object.create(xa.prototype),{constructor:Dd,interpolate_:function(a,b,c,d){var" e="this.resultBuffer,f=this.sampleValues,g=this.valueSize;a*=g;b=(c-b)/(d-b);for(c=a+g;a!==c;a+=4)ca.slerpFlat(e,0,f,a-g,f,a,b);return" e}});$c.prototype="Object.assign(Object.create(Xa),{constructor:$c,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(a){return" new="" dd(this.times,this.values,this.getvaluesize(),a)},interpolantfactorymethodsmooth:void="" 0});="" ec.prototype="Object.assign(Object.create(Xa),{constructor:ec,ValueTypeName:"number"});Ed.prototype=Object.assign(Object.create(Xa),{constructor:Ed,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void" 0,interpolantfactorymethodsmooth:void="" 0});fd.prototype="Object.assign(Object.create(Xa),{constructor:Fd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void" gd.prototype="Object.assign(Object.create(Xa),{constructor:Gd,ValueTypeName:"color"});yb.prototype=Xa;Xa.constructor=yb;Object.assign(yb,{parse:function(a){if(void" error("track="" type="" undefined,="" can="" not="" parse");var="" b="yb._getTrackTypeForValueTypeName(a.type);if(void" c="[],d=[];na.flattenJSON(a.keys,c,d,"value");a.times=c;a.values=d}return" void="" 0!="=b.parse?b.parse(a):new" b(a.name,a.times,a.values,a.interpolation)},tojson:function(a){var="" b.tojson(a);else{var="" b},_gettracktypeforvaluetypename:function(a){switch(a.tolowercase()){case="" "scalar":case="" "double":case="" "float":case="" "number":case="" "integer":return="" ec;case="" "vector":case="" "vector2":case="" "vector3":case="" "vector4":return="" dc;case="" "color":return="" gd;case="" "quaternion":return="" $c;case="" "bool":case="" "boolean":return="" fd;="" case="" "string":return="" ed}throw="" error("unsupported="" typename:="" "+a);}});qa.prototype="{constructor:qa,resetDuration:function(){for(var" a="0,b=0,c=this.tracks.length;b!==c;++b)var" d="this.tracks[b],a=Math.max(a,d.times[d.times.length-1]);this.duration=a},trim:function(){for(var" this},optimize:function(){for(var="" this}};object.assign(qa,{parse:function(a){for(var="" qa(a.name,a.duration,b)},tojson:function(a){var="" a},createfrommorphtargetsequence:function(a,b,c,d){for(var="" m.push(m[0]));f.push((new="" ec(".morphtargetinfluences["+b[g].name+"]",h,m)).scale(1="" c))}return="" qa(a,-1,f)},findbyname:function(a,b){var="" c[d];return="" null},createclipsfrommorphtargetsequences:function(a,b,c){for(var="" in="" d)a.push(qa.createfrommorphtargetsequence(k,="" d[k],b,c));return="" a},parseanimation:function(a,b){if(!a)return="" console.error("="" no="" animation="" jsonloader="" data"),null;for(var="" f="[],g=[];na.flattenJSON(c,f,g,d);0!==f.length&&e.push(new" a(b,f,g))}},d="[],e=a.name||"default",f=a.length||-1,g=a.fps||30,h=a.hierarchy||[],m=0;m<h.length;m++){var" p="0;p<k[l].morphTargets.length;p++)f[k[l].morphTargets[p]]=" -1;for(var="" f){for(var="" q="[],G=[],p=0;p!==k[l].morphTargets.length;++p){var" r="k[l];q.push(r.time);G.push(r.morphTarget===n?1:0)}d.push(new" ec(".morphtargetinfluence["+n+"]",q,g))}f="f.length*(g||1)}else" l=".bones[" +b[m].name+"]",c(dc,l+".position",k,"pos",d),c($c,l+".quaternion",k,"rot",d),c(dc,l+".scale",k,"scl",d)}return="" qa(e,f,d)}});object.assign(hd.prototype,{load:function(a,b,c,d){var="" sa(e.manager)).load(a,function(a){b(e.parse(json.parse(a)))},c,d)},settextures:function(a){this.textures="a},parse:function(a){function" b(a){void="" undefined="" texture",a);return="" c[a]}var="" xf[a.type];void="" a.opacity&&(d.opacity="a.opacity);void" (d.wireframelinejoin="a.wireframeLinejoin);void" d).fromarray(e)}void="" a.emissiveintensity);void="" f;e++)d.materials.push(this.parse(a.materials[e]));return="" d}});object.assign(ce.prototype,{load:function(a,b,c,d){var="" sa(e.manager)).load(a,function(a){b(e.parse(json.parse(a)))},c,d)},parse:function(a){var="" i,c="a.data.index,d={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};void" d[c.type](c.array),="" b.setindex(new="" u(c,1)));var="" e){var="" g="e[f],c=new" d[g.type](g.array);b.addattribute(f,new="" u(c,g.itemsize,g.normalized))}d="a.data.groups||a.data.drawcalls||a.data.offsets;if(void" q,void="" na(d,a.radius));return="" b}});zb.prototype="{constructor:zb,crossOrigin:void" 0,extracturlbase:function(a){a="a.split("/");if(1===a.length)return"./";a.pop();return" a.join("="" ")+"="" "},initmaterials:function(a,b,c){for(var="" d},creatematerial:function(){var="" function(e,f,g){function="" h(a,b,d,e,h){a="f+a;var" (a.wraps="1E3),1!==b[1]&&(a.wrapT=1E3));void" b}void="" j);void="" td);void="" hd);var="" m="{},k={uuid:N.generateUUID(),type:"MeshLambertMaterial"},l;for(l" "dbgcolor":case="" "dbgindex":case="" "opticaldensity":case="" "illumination":break;="" "dbgname":k.name="p;break;case" "blending":k.blending="a[p];break;case" "colorambient":case="" "mapambient":console.warn("three.loader.creatematerial:",l,"is="" longer="" supported.");break;case="" "colordiffuse":k.color="b.fromArray(p).getHex();break;case" "colorspecular":k.specular="b.fromArray(p).getHex();break;case" "coloremissive":k.emissive="b.fromArray(p).getHex();break;case" "specularcoef":k.shininess="p;break;case" "shading":"basic"="==p.toLowerCase()&&(k.type="MeshBasicMaterial");"phong"===p.toLowerCase()&&" (k.type="MeshPhongMaterial" );"standard"="==p.toLowerCase()&&(k.type="MeshStandardMaterial");break;case" "mapdiffuse":k.map="h(p,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case" "mapdiffuserepeat":case="" "mapdiffuseoffset":case="" "mapdiffusewrap":case="" "mapdiffuseanisotropy":break;case="" "mapemissive":k.emissivemap="h(p,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case" "mapemissiverepeat":case="" "mapemissiveoffset":case="" "mapemissivewrap":case="" "mapemissiveanisotropy":break;="" "maplight":k.lightmap="h(p,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case" "maplightrepeat":case="" "maplightoffset":case="" "maplightwrap":case="" "maplightanisotropy":break;case="" "mapao":k.aomap="h(p,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case" "mapaorepeat":case="" "mapaooffset":case="" "mapaowrap":case="" "mapaoanisotropy":break;case="" "mapbump":k.bumpmap="h(p,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case" "mapbumpscale":k.bumpscale="p;break;case" "mapbumprepeat":case="" "mapbumpoffset":case="" "mapbumpwrap":case="" "mapbumpanisotropy":break;case="" "mapnormal":k.normalmap="h(p,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case" "mapnormalfactor":k.normalscale="[p,p];break;case" "mapnormalrepeat":case="" "mapnormaloffset":case="" "mapnormalwrap":case="" "mapnormalanisotropy":break;case="" "mapspecular":k.specularmap="h(p,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case" "mapspecularrepeat":case="" "mapspecularoffset":case="" "mapspecularwrap":case="" "mapspecularanisotropy":break;="" "mapmetalness":k.metalnessmap="h(p,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case" "mapmetalnessrepeat":case="" "mapmetalnessoffset":case="" "mapmetalnesswrap":case="" "mapmetalnessanisotropy":break;case="" "maproughness":k.roughnessmap="h(p,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case" "maproughnessrepeat":case="" "maproughnessoffset":case="" "maproughnesswrap":case="" "maproughnessanisotropy":break;case="" "mapalpha":k.alphamap="h(p,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case" "mapalpharepeat":case="" "mapalphaoffset":case="" "mapalphawrap":case="" "mapalphaanisotropy":break;case="" "flipsided":k.side="1;break;case" "doublesided":k.side="2;break;case" "transparency":console.warn("three.loader.creatematerial:="" transparency="" has="" been="" renamed="" to="" opacity");k.opacity="p;break;case" "depthtest":case="" "depthwrite":case="" "colorwrite":case="" "opacity":case="" "reflectivity":case="" "transparent":case="" "visible":case="" "wireframe":k[l]="p;break;case" "vertexcolors":!0="==p&&(k.vertexColors=2);"face"===p&&(k.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial:" unsupported",l,p)}}"meshbasicmaterial"="==k.type&&delete" k.emissive;"meshphongmaterial"!="=k.type&&delete" k.specular;1="">k.opacity&&(k.transparent=!0);d.setTextures(m);return d.parse(k)}}()};zb.Handlers={handlers:[],add:function(a,b){this.handlers.push(a,b)},get:function(a){for(var b=this.handlers,c=0,d=b.length;c<d;c+=2){var e="b[c+1];if(b[c].test(a))return" e}return="" null}};="" object.assign(de.prototype,{load:function(a,b,c,d){var="" this.texturepath?this.texturepath:zb.prototype.extracturlbase(a),g="new" sa(this.manager);g.setwithcredentials(this.withcredentials);g.load(a,function(c){c="JSON.parse(c);var" d="c.metadata;if(void" 0!="=d&&(d=d.type,void" "+a+"="" should="" be="" loaded="" with="" three.objectloader="" instead.");return}if("scene"="==d.toLowerCase()){console.error("THREE.JSONLoader:" "+="" a+"="" three.sceneloader="" instead.");return}}c="e.parse(c,f);b(c.geometry,c.materials)},c,d)},setTexturePath:function(a){this.texturePath=a},parse:function(a,b){var" c="new" t,d="void" d,g,h,m,k,l,p,n,u,g,r,a,w,y="a.faces;l=a.vertices;var" x="a.normals,v=a.colors,z=0;if(void" q,d.x="l[m++]*b,d.y=l[m++]*b,d.z=l[m++]*b,c.vertices.push(d);" m="0;for(k=y.length;m<k;)if(b=y[m++],u=b&1,h=b&2,d=b&8,p=b&16,G=b&32,l=b&64,b&=128,u){u=new" ha;u.a="y[m];u.b=y[m+1];u.c=y[m+3];r=new" ha;r.a="y[m+1];r.b=y[m+2];r.c=y[m+3];m+=4;h&&(h=y[m++],u.materialIndex=h,r.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<z;d++)for(A=a.uvs[d],c.faceVertexUvs[d][h]=[],c.faceVertexUvs[d][h+1]=[],g=0;4">g;g++)n=y[m++],w=A[2*n],n=A[2*n+1],w=new D(w,n),2!==g&&c.faceVertexUvs[d][h].push(w),0!==g&&c.faceVertexUvs[d][h+1].push(w);p&&(p=3*y[m++],u.normal.set(x[p++],x[p++],x[p]),
r.normal.copy(u.normal));if(G)for(d=0;4>d;d++)p=3*y[m++],G=new q(x[p++],x[p++],x[p]),2!==d&&u.vertexNormals.push(G),0!==d&&r.vertexNormals.push(G);l&&(l=y[m++],l=v[l],u.color.setHex(l),r.color.setHex(l));if(b)for(d=0;4>d;d++)l=y[m++],l=v[l],2!==d&&u.vertexColors.push(new J(l)),0!==d&&r.vertexColors.push(new J(l));c.faces.push(u);c.faces.push(r)}else{u=new ha;u.a=y[m++];u.b=y[m++];u.c=y[m++];h&&(h=y[m++],u.materialIndex=h);h=c.faces.length;if(d)for(d=0;d<z;d++)for(a=a.uvs[d],c.facevertexuvs[d][h]= [],g="0;3">g;g++)n=y[m++],w=A[2*n],n=A[2*n+1],w=new D(w,n),c.faceVertexUvs[d][h].push(w);p&&(p=3*y[m++],u.normal.set(x[p++],x[p++],x[p]));if(G)for(d=0;3>d;d++)p=3*y[m++],G=new q(x[p++],x[p++],x[p]),u.vertexNormals.push(G);l&&(l=y[m++],u.color.setHex(v[l]));if(b)for(d=0;3>d;d++)l=y[m++],u.vertexColors.push(new J(v[l]));c.faces.push(u)}})(d);(function(){var b=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var d=0,g=a.skinWeights.length;d<g;d+=b)c.skinweights.push(new 0="==a.materials||0===a.materials.length)return{geometry:c};d=zb.prototype.initMaterials(a.materials,b,this.crossOrigin);return{geometry:c,materials:d}}});Object.assign(Se.prototype,{load:function(a,b,c,d){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var" fa(a.skinweights[d],="" 1<b?a.skinweights[d+1]:0,2<b?a.skinweights[d+2]:0,3<b?a.skinweights[d+3]:0));if(a.skinindices)for(d="0,g=a.skinIndices.length;d<g;d+=b)c.skinIndices.push(new" fa(a.skinindices[d],1<b?a.skinindices[d+1]:0,2<b?a.skinindices[d+2]:0,3<b?a.skinindices[d+3]:0));c.bones="a.bones;c.bones&&0<c.bones.length&&(c.skinWeights.length!==c.skinIndices.length||c.skinIndices.length!==c.vertices.length)&&console.warn("When" skinning,="" number="" of="" vertices="" ("+c.vertices.length+"),="" skinindices="" ("+c.skinindices.length+"),="" and="" skinweights="" ("+="" c.skinweights.length+")="" should="" match.")})();(function(b){if(void="" 0!="=a.morphTargets)for(var" d="0,g=a.morphTargets.length;d<g;d++){c.morphTargets[d]={};c.morphTargets[d].name=a.morphTargets[d].name;c.morphTargets[d].vertices=[];for(var" h="c.morphTargets[d].vertices,m=a.morphTargets[d].vertices,k=0,l=m.length;k<l;k+=3){var" p="new" q;p.x="m[k]*b;p.y=m[k+1]*b;p.z=m[k+2]*b;h.push(p)}}if(void" "morphcolors"="" no="" longer="" supported.="" using="" them="" as="" face="" colors.'),="" b="c.faces,h=a.morphColors[0].colors,d=0,g=b.length;d<g;d++)b[d].color.fromArray(h,3*d)})(d);(function(){var" g="0;g<d.length;g++){var" if(void="" e="this;(new" sa(e.manager)).load(a,function(c){var="" can't="" parse="" "+a+".",h.message);return}c="g.metadata;void" c.type||"geometry"="==c.type.toLowerCase()?console.error("THREE.ObjectLoader:" load="" "+a+".="" use="" three.jsonloader="" instead."):e.parse(g,b)},c,d)},settexturepath:function(a){this.texturepath="a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,b){var" c="this.parseGeometries(a.geometries),d=this.parseImages(a.images,function(){void" void="" e},parsegeometries:function(a){var="" de,d="new" ce,e="0,f=a.length;e<f;e++){var" g,h="a[e];switch(h.type){case" "planegeometry":case="" "planebuffergeometry":g="new" ma[h.type](h.width,h.height,h.widthsegments,h.heightsegments);break;case="" "boxgeometry":case="" "boxbuffergeometry":case="" "cubegeometry":g="new" ma[h.type](h.width,h.height,h.depth,h.widthsegments,h.heightsegments,h.depthsegments);break;case="" "circlegeometry":case="" "circlebuffergeometry":g="new" ma[h.type](h.radius,h.segments,h.thetastart,h.thetalength);break;case="" "cylindergeometry":case="" "cylinderbuffergeometry":g="new" ma[h.type](h.radiustop,h.radiusbottom,h.height,h.radialsegments,h.heightsegments,h.openended,h.thetastart,h.thetalength);break;case="" "conegeometry":case="" "conebuffergeometry":g="new" ma[h.type](h.radius,h.height,h.radialsegments,h.heightsegments,h.openended,h.thetastart,h.thetalength);break;case="" "spheregeometry":case="" "spherebuffergeometry":g="new" ma[h.type](h.radius,h.widthsegments,="" h.heightsegments,h.phistart,h.philength,h.thetastart,h.thetalength);break;case="" "dodecahedrongeometry":case="" "icosahedrongeometry":case="" "octahedrongeometry":case="" "tetrahedrongeometry":g="new" ma[h.type](h.radius,h.detail);break;case="" "ringgeometry":case="" "ringbuffergeometry":g="new" ma[h.type](h.innerradius,h.outerradius,h.thetasegments,h.phisegments,h.thetastart,h.thetalength);break;case="" "torusgeometry":case="" "torusbuffergeometry":g="new" ma[h.type](h.radius,h.tube,h.radialsegments,h.tubularsegments,h.arc);="" break;case="" "torusknotgeometry":case="" "torusknotbuffergeometry":g="new" ma[h.type](h.radius,h.tube,h.tubularsegments,h.radialsegments,h.p,h.q);break;case="" "lathegeometry":case="" "lathebuffergeometry":g="new" ma[h.type](h.points,h.segments,h.phistart,h.philength);break;case="" "buffergeometry":g="d.parse(h);break;case" "geometry":g="c.parse(h.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader:" unsupported="" geometry="" type="" "'+h.type+'"');continue}g.uuid="h.uuid;void" b[h.uuid]="g}return" b},parsematerials:function(a,b){var="" hd;d.settextures(b);for(var="" c},parseanimations:function(a){for(var="" b},parseimages:function(a,b){function="" c(a){d.manager.itemstart(a);return="" g.load(a,function(){d.manager.itemend(a)},void="" 0,function(){d.manager.itemerror(a)})}var="" f="new" $d(b),g="new" yc(f);="" g.setcrossorigin(this.crossorigin);for(var="" m="a[f],k=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m.url)?m.url:d.texturePath+m.url;e[m.uuid]=c(k)}}return" e},parsetextures:function(a,b){function="" c(a,b){if("number"="==typeof" a)return="" a;console.warn("three.objectloader.parsetexture:="" constant="" be="" in="" numeric="" form.",a);return="" b[a]}var="" cubeuvreflectionmapping:306,cubeuvrefractionmapping:307},e="{RepeatWrapping:1E3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},f={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008},g={};if(void" k="a[h];void" "image"="" specified="" for',k.uuid);void="" undefined="" image",="" k.image);var="" l="new" ea(b[k.image]);l.needsupdate="!0;l.uuid=k.uuid;void" l}return="" g},parseobject:function(){var="" a="new" s;return="" function(b,c,d){function="" e(a){void="" geometry",a);return="" c[a]}function="" f(a){if(void="" material",a),d[a]}var="" g;switch(b.type){case="" "scene":g="new" mb;void="" j(b.background));void="" lb(b.fog.color,b.fog.near,b.fog.far):"fogexp2"="==" b.fog.type&&(g.fog="new" kb(b.fog.color,b.fog.density)));break;case="" "perspectivecamera":g="new" fa(b.fov,b.aspect,b.near,b.far);void="" "orthographiccamera":g="new" jb(b.left,b.right,b.top,b.bottom,b.near,b.far);break;case="" "ambientlight":g="new" ad(b.color,b.intensity);break;case="" "directionallight":g="new" zd(b.color,b.intensity);break;case="" "pointlight":g="new" xd(b.color,b.intensity,b.distance,b.decay);break;case="" "spotlight":g="new" wd(b.color,b.intensity,b.distance,b.angle,b.penumbra,b.decay);break;case="" "hemispherelight":g="new" ud(b.color,b.groundcolor,b.intensity);break;case="" "mesh":g="e(b.geometry);var" qd(g,h):new="" aa(g,h);break;case="" "lod":g="new" ec;break;case="" "line":g="new" ua(e(b.geometry),f(b.material),b.mode);break;case="" "linesegments":g="new" ga(e(b.geometry),="" f(b.material));break;case="" "pointcloud":case="" "points":g="new" mb(e(b.geometry),f(b.material));break;case="" "sprite":g="new" dc(f(b.material));break;case="" "group":g="new" fc;break;case="" "skinnedmesh":console.warn("three.objectloader.parseobject()="" does="" not="" support="" skinnedmesh="" type.="" instantiates="" object3d="" instead.");default:g="new" x}g.uuid="b.uuid;void" this.parseobject(b.shadow.camera)));void="" b.children)g.add(this.parseobject(b.children[m],c,d));if("lod"="==b.type)for(b=b.levels,h=0;h<b.length;h++){var" g}}()});ua.prototype="{constructor:ua,getPoint:function(a){console.warn("THREE.Curve:" warning,="" getpoint()="" implemented!");return="" null},getpointat:function(a){a="this.getUtoTmapping(a);return" this.getpoint(a)},getpoints:function(a){isnan(a)&&(a="5);for(var" b},getspacedpoints:function(a){isnan(a)&&(a="5);for(var" b},getlength:function(){var="" a[a.length-1]},getlengths:function(a){isnan(a)&&(a="this.__arcLengthDivisions?this.__arcLengthDivisions:200);if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return" this.cachearclengths;="" this.needsupdate="!1;var" this.cachearclengths="b},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()},getUtoTmapping:function(a,b){var">m)g=d+1;else if(0<m)h=d-1;else{h=d;break}d=h;if(c[d]===f)return d="" (e-1);g="c[d];return(d+(f-g)/(c[d+1]-g))/(e-1)},getTangent:function(a){var" b="a-1E-4;a+=1E-4;0">b&&(b=0);1<a&&(a=1);b=this.getpoint(b);return this.getpoint(a).clone().sub(b).normalize()},gettangentat:function(a){a="this.getUtoTmapping(a);return" this.gettangent(a)},computefrenetframes:function(a,b){var="" c="new" q,d="[],e=[],f=[],g=new" q,h="new" s,m,k;for(m="0;m<=a;m++)k=m/a,d[m]=this.getTangentAt(k),d[m].normalize();e[0]=new" q;f[0]="new" q;m="Number.MAX_VALUE;k=Math.abs(d[0].x);var" l="Math.abs(d[0].y),p=Math.abs(d[0].z);k<=m&&(m=k,c.set(1,0,0));l<=m&&(m=l,c.set(0,1,0));p<=m&&c.set(0,0,1);" g.crossvectors(d[0],c).normalize();e[0].crossvectors(d[0],g);f[0].crossvectors(d[0],e[0]);for(m="1;m<=a;m++)e[m]=e[m-1].clone(),f[m]=f[m-1].clone(),g.crossVectors(d[m-1],d[m]),g.length()">Number.EPSILON&&(g.normalize(),c=Math.acos(N.clamp(d[m-1].dot(d[m]),-1,1)),e[m].applyMatrix4(h.makeRotationAxis(g,c))),f[m].crossVectors(d[m],e[m]);if(!0===b)for(c=Math.acos(N.clamp(e[0].dot(e[a]),-1,1)),c/=a,0<d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),m=1;m<=a;m++)e[m].applymatrix4(h.makerotationaxis(d[m],c*m)), f[m].crossvectors(d[m],e[m]);return{tangents:d,normals:e,binormals:f}}};ta.prototype="Object.create(ua.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isLineCurve=!0;Ta.prototype.getPoint=function(a){if(1===a)return" this.v2.clone();var="" b="this.v2.clone().sub(this.v1);b.multiplyScalar(a).add(this.v1);return" b};ta.prototype.getpointat="function(a){return" this.getpoint(a)};ta.prototype.gettangent="function(a){return" this.v2.clone().sub(this.v1).normalize()};ad.prototype="Object.assign(Object.create(ua.prototype)," {constructor:ad,add:function(a){this.curves.push(a)},closepath:function(){var="" a="this.curves[0].getPoint(0),b=this.curves[this.curves.length-1].getPoint(1);a.equals(b)||this.curves.push(new" ta(b,a))},getpoint:function(a){var="">=b)return b=c[a]-b,a=this.curves[a],c=a.getLength(),a.getPointAt(0===c?0:1-b/c);a++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=
!0;this.cacheLengths=null;this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],b=0,c=0,d=this.curves.length;c<d;c++)b+=this.curves[c].getlength(),a.push(b);return this.cachelengths="a},getSpacedPoints:function(a){isNaN(a)&&(a=40);for(var" b="[],c=0;c<=a;c++)b.push(this.getPoint(c/a));this.autoClose&&b.push(b[0]);return" b},getpoints:function(a){a="a||12;for(var" f="e[d],f=f.getPoints(f&&f.isEllipseCurve?2*a:f&&f.isLineCurve?1:f&&f.isSplineCurve?a*f.points.length:a),g=0;g<f.length;g++){var" h="f[g];c&&c.equals(h)||(b.push(h),c=h)}this.autoClose&&1<b.length&&!b[b.length-1].equals(b[0])&&b.push(b[0]);return" b},createpointsgeometry:function(a){a="this.getPoints(a);return" this.creategeometry(a)},createspacedpointsgeometry:function(a){a="this.getSpacedPoints(a);return" this.creategeometry(a)},creategeometry:function(a){for(var="" t,c="0,d=a.length;c<d;c++){var" e="a[c];" b.vertices.push(new="" q(e.x,e.y,e.z||0))}return="" b}});wa.prototype="Object.create(ua.prototype);Wa.prototype.constructor=Wa;Wa.prototype.isEllipseCurve=!0;Wa.prototype.getPoint=function(a){for(var">c;)c+=b;for(;c>b;)c-=b;c<number.epsilon&&(c=d?0:b);!0!==this.aclockwise||d||(c=c===b?-b:c-b);b=this.astartangle+a*c;a=this.ax+this.xradius*math.cos(b);var e="this.aY+this.yRadius*Math.sin(b);0!==this.aRotation&&(b=Math.cos(this.aRotation)," c="Math.sin(this.aRotation),d=a-this.aX,e-=this.aY,a=d*b-e*c+this.aX,e=d*c+e*b+this.aY);return" new="" d(a,e)};cb.prototype="Object.create(ua.prototype);Cb.prototype.constructor=Cb;Cb.prototype.isSplineCurve=!0;Cb.prototype.getPoint=function(a){var" b="this.points,c=(b.length-1)*a;a=Math.floor(c);var">b.length-2?b.length-1:a+1],b=b[a>b.length-3?b.length-1:a+2];return new D(Te(c,d.x,e.x,f.x,b.x),Te(c,d.y,e.y,f.y,b.y))};fc.prototype=Object.create(ua.prototype);fc.prototype.constructor=
fc;fc.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new D(Bb(a,b.x,c.x,d.x,e.x),Bb(a,b.y,c.y,d.y,e.y))};gc.prototype=Object.create(ua.prototype);gc.prototype.constructor=gc;gc.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2;return new D(Ab(a,b.x,c.x,d.x),Ab(a,b.y,c.y,d.y))};var xe=Object.assign(Object.create(ad.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var b=1,c=a.length;b<c;b++)this.lineto(a[b].x,a[b].y)},moveto:function(a, b){this.currentpoint.set(a,b)},lineto:function(a,b){var="" c="new" ta(this.currentpoint.clone(),new="" d(a,b));this.curves.push(c);this.currentpoint.set(a,b)},quadraticcurveto:function(a,b,c,d){a="new" gc(this.currentpoint.clone(),new="" d(a,b),new="" d(c,d));this.curves.push(a);this.currentpoint.set(c,d)},beziercurveto:function(a,b,c,d,e,f){a="new" fc(this.currentpoint.clone(),new="" d(c,d),new="" d(e,f));this.curves.push(a);this.currentpoint.set(e,f)},splinethru:function(a){var="" b="[this.currentPoint.clone()].concat(a)," cb(b);this.curves.push(b);this.currentpoint.copy(a[a.length-1])},arc:function(a,b,c,d,e,f){this.absarc(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f)},absarc:function(a,b,c,d,e,f){this.absellipse(a,b,c,c,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){this.absellipse(a+this.currentpoint.x,b+this.currentpoint.y,c,d,e,f,g,h)},absellipse:function(a,b,c,d,e,f,g,h){a="new" wa(a,b,c,d,e,f,g,h);0<this.curves.length&&(b="a.getPoint(0),b.equals(this.currentPoint)||this.lineTo(b.x,b.y));this.curves.push(a);" a="a.getPoint(1);this.currentPoint.copy(a)}});bd.prototype=xe;xe.constructor=bd;Db.prototype=Object.assign(Object.create(xe),{constructor:Db,getPointsHoles:function(a){for(var" b},extractallpoints:function(a){return{shape:this.getpoints(a),holes:this.getpointsholes(a)}},extractpoints:function(a){return="" this.extractallpoints(a)}});ee.prototype="{moveTo:function(a,b){this.currentPath=new" bd;this.subpaths.push(this.currentpath);="" this.currentpath.moveto(a,b)},lineto:function(a,b){this.currentpath.lineto(a,b)},quadraticcurveto:function(a,b,c,d){this.currentpath.quadraticcurveto(a,b,c,d)},beziercurveto:function(a,b,c,d,e,f){this.currentpath.beziercurveto(a,b,c,d,e,f)},splinethru:function(a){this.currentpath.splinethru(a)},toshapes:function(a,b){function="" c(a){for(var="" e="a[c],f=new" db;f.curves="e.curves;b.push(f)}return" b}function="" d(a,b){for(var="" g="b[e],h=" b[f],k="h.x-g.x,m=h.y-g.y;if(Math.abs(m)">Number.EPSILON){if(0>m&&(g=b[f],k=-k,h=b[e],m=-m),!(a.y<g.y||a.y>h.y))if(a.y===g.y){if(a.x===g.x)return!0}else{e=m*(a.x-g.x)-k*(a.y-g.y);if(0===e)return!0;0>e||(d=!d)}}else if(a.y===g.y&&(h.x<=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return 0="==b&&(b=100);void" d}var="" e="Ia.isClockWise,f=this.subPaths;if(0===f.length)return[];if(!0===b)return" c(f);var="" g,h,m,k="[];if(1===f.length)return" h="f[0],m=new" db,m.curves="h.curves,k.push(m),k;var" l="!e(f[0].getPoints()),l=a?!l:l;m=[];var" p="[],n=[],q=0,x;p[q]=void" 0;n[q]="[];for(var" r="0,A=f.length;r<A;r++)h=f[r],x=h.getPoints(),g=e(x),(g=a?!g:g)?(!l&&p[q]&&q++,p[q]={s:new" db,p:x},p[q].s.curves="h.curves,l&&q++,n[q]=[]):n[q].push({h:h,p:x[0]});if(!p[0])return" c(f);if(1<p.length){r="!1;h=[];e=0;for(f=p.length;e<f;e++)m[e]=[];e=0;for(f=p.length;e<f;e++)for(g=n[e],l=0;l<g.length;l++){q=g[l];x=!0;for(A=0;A<p.length;A++)d(q.p,p[A].p)&&(e!==A&&h.push({froms:e,tos:A,hole:l}),x?(x=!1,m[A].push(q)):r=!0);x&&m[e].push(q)}0<h.length&&(r||(n=m))}r=" 0;for(e="p.length;r<e;r++)for(m=p[r].s,k.push(m),h=n[r],f=0,g=h.length;f<g;f++)m.holes.push(h[f].h);return" k}};object.assign(fe.prototype,{isfont:!0,generateshapes:function(a,b,c){void="" d="this.data;a=String(a).split("");var" m="0;m<a.length;m++){var" k="a[m];if("\n"===k)g=0,h-=f;else{var" l;l="e;var" q="new" ee,x="[],r,A,w,y,z," v,d,i;if(k.o)for(var="" c="k._cachedOutline||(k._cachedOutline=k.o.split("" ")),f="0,J=C.length;F<J;)switch(C[F++]){case" "m":r="C[F++]*l+p;A=C[F++]*l+n;q.moveTo(r,A);break;case" "l":r="C[F++]*l+p;A=C[F++]*l+n;q.lineTo(r,A);break;case" "q":r="C[F++]*l+p;A=C[F++]*l+n;z=C[F++]*l+p;v=C[F++]*l+n;q.quadraticCurveTo(z,v,r,A);if(y=x[x.length-1]){w=y.x;y=y.y;for(var" n="H/c;Ab(N,w,z,r);Ab(N,y,v,A)}}break;case" "b":if(r="C[F++]*l+p,A=C[F++]*l+n,z=C[F++]*l+p,v=C[F++]*l+n,D=C[F++]*l+p,I=C[F++]*l+n,q.bezierCurveTo(z," v,d,i,r,a),y="x[x.length-1])for(w=y.x,y=y.y,H=1;H<=c;H++)N=H/c,Bb(N,w,z,D,r),Bb(N,y,v,I,A)}l={offsetX:k.ha*l,path:q}}else" 0;g+="l.offsetX;b.push(l.path)}}c=[];d=0;for(a=b.length;d<a;d++)Array.prototype.push.apply(c,b[d].toShapes());return" c}});object.assign(ue.prototype,{load:function(a,b,c,d){var="" sa(this.manager)).load(a,function(a){var="" c;try{c="JSON.parse(a)}catch(d){console.warn("THREE.FontLoader:" typeface.js="" support="" is="" being="" deprecated.="" use="" typeface.json="" instead."),c="JSON.parse(a.substring(65," a.length-2))}a="e.parse(c);b&&b(a)},c,d)},parse:function(a){return" new="" fe(a)}});var="" pd,je="{getContext:function(){void" (window.audiocontext||window.webkitaudiocontext));return="" pd},setcontext:function(a){pd="a}};Object.assign(ge.prototype,{load:function(a,b,c,d){var" sa(this.manager);e.setresponsetype("arraybuffer");e.load(a,function(a){je.getcontext().decodeaudiodata(a,function(a){b(a)})},c,d)}});he.prototype="Object.assign(Object.create(ma.prototype),{constructor:he,isRectAreaLight:!0," copy:function(a){ma.prototype.copy.call(this,a);this.width="a.width;this.height=a.height;return" this}});object.assign(ve.prototype,{update:function(){var="" a,b,c,d,e,f,g,h="new" s,m="new" s;return="" function(k){if(a!="=this||b!==k.focus||c!==k.fov||d!==k.aspect*this.aspect||e!==k.near||f!==k.far||g!==k.zoom){a=this;b=k.focus;c=k.fov;d=k.aspect*this.aspect;e=k.near;f=k.far;g=k.zoom;var" -q*d+n;x="q*d+n;l.elements[0]=2*e/(x-p);l.elements[8]=(x+p)/(x-p);this.cameraL.projectionMatrix.copy(l);p=-q*d-n;x=q*d-n;l.elements[0]=2*e/(x-p);l.elements[8]=(x+p)/(x-p);this.cameraR.projectionMatrix.copy(l)}this.cameraL.matrixWorld.copy(k.matrixWorld).multiply(m);this.cameraR.matrixWorld.copy(k.matrixWorld).multiply(h)}}()});Id.prototype=Object.create(x.prototype);Id.prototype.constructor=Id;ie.prototype=Object.assign(Object.create(x.prototype),{constructor:ie,getInput:function(){return" this.gain},="" removefilter:function(){null!="=this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return" this.filter},setfilter:function(a){null!="=this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination);this.filter=a;this.gain.connect(this.filter);this.filter.connect(this.context.destination)},getMasterVolume:function(){return" this.gain.gain.value},="" setmastervolume:function(a){this.gain.gain.value="a},updateMatrixWorld:function(){var" a="new" q,b="new" ca,c="new" q,d="new" q;return="" function(e){x.prototype.updatematrixworld.call(this,e);e="this.context.listener;var" f="this.up;this.matrixWorld.decompose(a,b,c);d.set(0,0,-1).applyQuaternion(b);e.positionX?(e.positionX.setValueAtTime(a.x,this.context.currentTime),e.positionY.setValueAtTime(a.y,this.context.currentTime),e.positionZ.setValueAtTime(a.z,this.context.currentTime),e.forwardX.setValueAtTime(d.x,this.context.currentTime)," e.forwardy.setvalueattime(d.y,this.context.currenttime),e.forwardz.setvalueattime(d.z,this.context.currenttime),e.upx.setvalueattime(f.x,this.context.currenttime),e.upy.setvalueattime(f.y,this.context.currenttime),e.upz.setvalueattime(f.z,this.context.currenttime)):(e.setposition(a.x,a.y,a.z),e.setorientation(d.x,d.y,d.z,f.x,f.y,f.z))}}()});hc.prototype="Object.assign(Object.create(x.prototype),{constructor:hc,getOutput:function(){return" this.gain},setnodesource:function(a){this.hasplaybackcontrol="!1;this.sourceType="audioNode";this.source=a;this.connect();return" this},setbuffer:function(a){this.buffer="a;this.sourceType="buffer";this.autoplay&&this.play();return" this},play:function(){if(!0="==this.isPlaying)console.warn("THREE.Audio:" audio="" already="" playing.");else="" if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this="" has="" no="" playback="" control.");else{var="" this.starttime);a.start(0,this.starttime);this.isplaying="!0;this.source=a;return" this.connect()}},pause:function(){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" control.");else="" return="" this.source.stop(),this.starttime="this.context.currentTime,this.isPlaying=!1,this},stop:function(){if(!1===this.hasPlaybackControl)console.warn("THREE.Audio:" this.filters.length){this.source.connect(this.filters[0]);for(var="" this.source.connect(this.getoutput());return="" this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var="" this.source.disconnect(this.getoutput());="" this},getfilters:function(){return="" this.filters},setfilters:function(a){a||(a="[]);!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a;return" this},getfilter:function(){return="" this.getfilters()[0]},setfilter:function(a){return="" this.setfilters(a?[a]:[])},setplaybackrate:function(a){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this.playbackrate="a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate," this.context.currenttime),this},getplaybackrate:function(){return="" this.playbackrate},onended:function(){this.isplaying="!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio:" control."),!1):this.loop},setloop:function(a){if(!1="==this.hasPlaybackControl)console.warn("THREE.Audio:" this.loop="a,!0===this.isPlaying&&(this.source.loop=this.loop),this},getVolume:function(){return" setvolume:function(a){this.gain.gain.value="a;return" this}});ke.prototype="Object.assign(Object.create(hc.prototype),{constructor:ke,getOutput:function(){return" this.panner},getrefdistance:function(){return="" this.panner.refdistance},setrefdistance:function(a){this.panner.refdistance="a},getRolloffFactor:function(){return" this.panner.rollofffactor},setrollofffactor:function(a){this.panner.rollofffactor="a},getDistanceModel:function(){return" this.panner.distancemodel},setdistancemodel:function(a){this.panner.distancemodel="a},getMaxDistance:function(){return" this.panner.maxdistance},setmaxdistance:function(a){this.panner.maxdistance="a},updateMatrixWorld:function(){var" function(b){x.prototype.updatematrixworld.call(this,b);a.setfrommatrixposition(this.matrixworld);this.panner.setposition(a.x,a.y,a.z)}}()});object.assign(le.prototype,{getfrequencydata:function(){this.analyser.getbytefrequencydata(this.data);return="" this.data},getaveragefrequency:function(){for(var="" b[c];return="" b.length}});jd.prototype="{constructor:Jd,accumulate:function(a,b){var" f+="b,this._mixBufferRegion(c,e,0,b/f,d);this.cumulativeWeight=f},apply:function(a){var" b="this.valueSize,c=this.buffer;a=a*b+b;var">d&&this._mixBufferRegion(c,a,3*b,1-d,b);for(var d=b,f=b+b;d!==f;++d)if(c[d]!==c[d+b]){e.setValue(c,a);break}},
saveOriginalState:function(){var a=this.buffer,b=this.valueSize,c=3*b;this.binding.getValue(a,c);for(var d=b;d!==c;++d)a[d]=a[c+d%b];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,b,c,d,e){if(.5<=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d,e){ca.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var 0="==a[c]){console.error("" f="1-d,g=0;g!==e;++g){var" h="b+g;a[h]=a[h]*f+a[c+g]*d}}};ka.prototype={constructor:ka,getValue:function(a," b){this.bind();this.getvalue(a,b)},setvalue:function(a,b){this.bind();this.setvalue(a,b)},bind:function(){var="" a="this.node,b=this.parsedPath,c=b.objectName,d=b.propertyName,e=b.propertyIndex;a||(this.node=a=ka.findNode(this.rootNode,b.nodeName)||this.rootNode);this.getValue=this._getValue_unavailable;this.setValue=this._setValue_unavailable;if(a){if(c){var" "materials":if(!a.material){console.error("="" can="" not="" bind="" to="" material="" as="" node="" does="" have="" material",this);return}if(!a.material.materials){console.error("="" material.materials="" node.material="" materials="" array",="" this);return}a="a.material.materials;break;case" "bones":if(!a.skeleton){console.error("="" bones="" skeleton",this);return}a="a.skeleton.bones;for(c=0;c<a.length;c++)if(a[c].name===f){f=c;break}break;default:if(void" objectname="" of="" node,="" undefined",this);return}a="a[c]}if(void" 0!="=f){if(void" trying="" objectindex="" objectname,="" but="" is="" undefined:",this,a);return}a="a[f]}}f=a[d];if(void" update="" property="" for="" track:="" "+="" b.nodename+"."+d+"="" it="" wasn't="" found.",a);else{b="this.Versioning.None;void" morphtargetinfluences="" becasuse="" geometry",this);return}if(!a.geometry.morphtargets){console.error("="" geometry.morphtargets",="" this);return}for(c="0;c<this.node.geometry.morphTargets.length;c++)if(a.geometry.morphTargets[c].name===e){e=c;break}}c=this.BindingType.ArrayElement;this.resolvedProperty=f;this.propertyIndex=e}else" void="" console.error("="" this.path+"="" found.")},unbind:function(){this.node="null;this.getValue=this._getValue_unbound;this.setValue=this._setValue_unbound}};Object.assign(ka.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:ka.prototype.getValue,_setValue_unbound:ka.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(a,b){a[b]=this.node[this.propertyName]}," function(a,b){for(var="" c="this.resolvedProperty,d=0,e=c.length;d!==e;++d)a[b++]=c[d]},function(a,b){a[b]=this.resolvedProperty[this.propertyIndex]},function(a,b){this.resolvedProperty.toArray(a,b)}],SetterByBindingTypeAndVersioning:[[function(a,b){this.node[this.propertyName]=a[b]},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.needsUpdate=!0},function(a,b){this.node[this.propertyName]=a[b];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,b){for(var" d="0,e=c.length;d!==e;++d)c[d]=a[b++]},function(a,b){for(var" this.targetobject.matrixworldneedsupdate="!0}],[function(a,b){this.resolvedProperty.fromArray(a,b)},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.needsUpdate=!0},function(a,b){this.resolvedProperty.fromArray(a,b);this.targetObject.matrixWorldNeedsUpdate=!0}]]});ka.Composite=function(a,b,c){c=c||ka.parseTrackName(b);this._targetGroup=a;this._bindings=a.subscribe_(b,c)};ka.Composite.prototype={constructor:ka.Composite,getValue:function(a,b){this.bind();var" a&&a.isanimationobjectgroup?new="" ka.composite(a,b,c):new="" ka(a,b,c)};ka.parsetrackname="function(a){var" b="/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(a);if(!b)throw" error("cannot="" parse="" trackname="" at="" all:="" "+a);b="{nodeName:b[2],objectName:b[3],objectIndex:b[4],propertyName:b[5],propertyIndex:b[6]};if(null===b.propertyName||0===b.propertyName.length)throw" error("can="" propertyname="" from="" trackname:="" "+a);return="" b};ka.findnode="function(a,b){if(!b||""===b||"root"===b||"."===b||-1===b||b===a.name||b===a.uuid)return" a;if(a.skeleton){var="" d}return="" null}(a.skeleton);if(c)return="" c}if(a.children){var="" g="a[c];if(g.name===b||g.uuid===b||(g=d(g.children)))return" g}return="" null};if(c="d(a.children))return" c}return="" null};me.prototype="{constructor:me,isAnimationObjectGroup:!0,add:function(a){for(var" arguments.length;k!="=l;++k){var" p="arguments[k],n=p.uuid,q=e[n];if(void" n="0,x=m;n!==x;++n)h[n].push(new" ka(p,f[n],g[n]))}else="" if(q<d){var="" r="--d,x=b[r];e[x.uuid]=q;b[q]=x;e[n]=r;b[r]=p;n=0;for(x=m;n!==x;++n){var" z="h[n],w=z[q];z[q]=z[r];void" ka(p,f[n],g[n]));z[r]="w}}else" objects="" with="" the="" same="" uuid="" detected.="" clean="" caches="" or="" recreate="" your="" infrastructure="" when="" reloading="" scenes...")}this.ncachedobjects_="d},remove:function(a){for(var" m="arguments[g],k=m.uuid,l=d[k];if(void">=c){var p=c++,n=b[p];d[n.uuid]=l;b[l]=n;d[k]=p;b[p]=m;m=0;for(k=f;m!==k;++m){var n=e[m],q=n[l];n[l]=n[p];n[p]=q}}}this.nCachedObjects_=c},uncache:function(a){for(var b=this._objects,c=b.length,d=this.nCachedObjects_,e=this._indicesByUUID,f=this._bindings,g=f.length,h=0,m=arguments.length;h!==m;++h){var k=arguments[h].uuid,l=e[k];
if(void 0!==l)if(delete e[k],l<d){var k="--d,p=b[k],n=--c,q=b[n];e[p.uuid]=l;b[l]=p;e[q.uuid]=k;b[k]=q;b.pop();p=0;for(q=g;p!==q;++p){var" x="f[p],r=x[n];x[l]=x[k];x[k]=r;x.pop()}}else" for(n="--c,q=b[n],e[q.uuid]=l,b[l]=q,b.pop(),p=0,q=g;p!==q;++p)x=f[p],x[l]=x[n],x.pop()}this.nCachedObjects_=d},subscribe_:function(a,b){var" c="this._bindingsIndicesByPath,d=c[a],e=this._bindings;if(void" 0!="=d)return" e[d];var="" f="this._paths,g=this._parsedPaths,h=this._objects,l=this.nCachedObjects_,k=Array(h.length),d=e.length;" c[a]="d;f.push(a);g.push(b);e.push(k);c=l;for(d=h.length;c!==d;++c)k[c]=new" ka(h[c],a,b);return="" k},unsubscribe_:function(a){var="" b="this._bindingsIndicesByPath,c=b[a];if(void" d="this._paths,e=this._parsedPaths,f=this._bindings,g=f.length-1,h=f[g];b[a[g]]=c;f[c]=h;f.pop();e[c]=e[g];e.pop();d[c]=d[g];d.pop()}}};ne.prototype={constructor:ne,play:function(){this._mixer._activateAction(this);return" this},stop:function(){this._mixer._deactivateaction(this);return="" this.reset()},reset:function(){this.paused="!1;this.enabled=!0;this.time=0;this._loopCount=-1;this._startTime=null;return" this.stopfading().stopwarping()},isrunning:function(){return="" this.enabled&&!this.paused&&0!="=this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return" this._mixer._isactiveaction(this)},startat:function(a){this._starttime="a;return" this},setloop:function(a,b){this.loop="a;this.repetitions=b;return" this},seteffectiveweight:function(a){this.weight="a;this._effectiveWeight=this.enabled?" a:0;return="" this.stopfading()},geteffectiveweight:function(){return="" this._effectiveweight},fadein:function(a){return="" this._schedulefading(a,0,1)},fadeout:function(a){return="" this._schedulefading(a,1,0)},crossfadefrom:function(a,b,c){a.fadeout(b);this.fadein(b);if(c){c="this._clip.duration;var" this},crossfadeto:function(a,b,c){return="" a.crossfadefrom(this,b,c)},stopfading:function(){var="" a="this._weightInterpolant;null!==a&&(this._weightInterpolant=" null,this._mixer._takebackcontrolinterpolant(a));return="" this},seteffectivetimescale:function(a){this.timescale="a;this._effectiveTimeScale=this.paused?0:a;return" this.stopwarping()},geteffectivetimescale:function(){return="" this._effectivetimescale},setduration:function(a){this.timescale="this._clip.duration/a;return" this.stopwarping()},syncwith:function(a){this.time="a.time;this.timeScale=a.timeScale;return" this.stopwarping()},halt:function(a){return="" this.warp(this._effectivetimescale,0,a)},warp:function(a,="" b,c){var="" this},stopwarping:function(){var="" this},getmixer:function(){return="" this._mixer},getclip:function(){return="" this._clip},getroot:function(){return="" this._localroot||="" this._mixer._root},_update:function(a,b,c,d){var="" e="this._startTime;if(null!==e){b=(a-e)*c;if(0">b||0===c)return;this._startTime=null;b*=c}b*=this._updateTimeScale(a);c=this._updateTime(b);a=this._updateWeight(a);if(0<a){b=this._interpolants;for(var e="this._propertyBindings,f=0,g=b.length;f!==g;++f)b[f].evaluate(c),e[f].accumulate(d,a)}},_updateWeight:function(a){var" b="0;if(this.enabled){var" d="c.evaluate(a)[0],b=b*d;a">c.parameterPositions[1]&&
(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=b},_updateTimeScale:function(a){var b=0;if(!this.paused){var b=this.timeScale,c=this._timeScaleInterpolant;if(null!==c){var d=c.evaluate(a)[0],b=b*d;a>c.parameterPositions[1]&&(this.stopWarping(),0===b?this.paused=!0:this.timeScale=b)}}return this._effectiveTimeScale=b},_updateTime:function(a){var b=this.time+a;if(0===a)return b;var c=this._clip.duration,d=this.loop,e=this._loopCount;if(2200===d)a:{if(-1===e&&(this._loopCount=
0,this._setEndings(!0,!0,!1)),b>=c)b=c;else if(0>b)b=0;else break a;this.clampWhenFinished?this.paused=!0:this.enabled=!1;this._mixer.dispatchEvent({type:"finished",action:this,direction:0>a?-1:1})}else{d=2202===d;-1===e&&(0<=a?(e=0,this._setendings(!0,0===this.repetitions,d)):this._setendings(0===this.repetitions,!0,d));if(b>=c||0>b){var f=Math.floor(b/c),b=b-c*f,e=e+Math.abs(f),g=this.repetitions-e;0>g?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,b=0<a?c:0,this._mixer.dispatchevent({type:"finished", action:this,direction:0<a?1:-1})):(0="==g?(a=0">a,this._setEndings(a,!a,d)):this._setEndings(!1,!1,d),this._loopCount=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f}))}if(d&&1===(e&1))return this.time=b,c-b}return this.time=b},_setEndings:function(a,b,c){var d=this._interpolantSettings;c?(d.endingStart=2401,d.endingEnd=2401):(d.endingStart=a?this.zeroSlopeAtStart?2401:2400:2402,d.endingEnd=b?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(a,b,c){var d=this._mixer,e=d.time,
f=this._weightInterpolant;null===f&&(this._weightInterpolant=f=d._lendControlInterpolant());d=f.parameterPositions;f=f.sampleValues;d[0]=e;f[0]=b;d[1]=e+a;f[1]=c;return this}};cd.prototype={constructor:cd,clipAction:function(a,b){var c=b||this._root,d=c.uuid,e="string"===typeof a?qa.findByName(c,a):a,c=null!==e?e.uuid:a,f=this._actionsByClip[c],g=null;if(void 0!==f){g=f.actionByRoot[d];if(void 0!==g)return g;g=f.knownActions[0];null===e&&(e=g._clip)}if(null===e)return null;e=new ne(this,e,b);this._bindAction(e,
g);this._addInactiveAction(e,c,d);return e},existingAction:function(a,b){var c=b||this._root,d=c.uuid,c="string"===typeof a?qa.findByName(c,a):a,c=this._actionsByClip[c?c.uuid:a];return void 0!==c?c.actionByRoot[d]||null:null},stopAllAction:function(){for(var a=this._actions,b=this._nActiveActions,c=this._bindings,d=this._nActiveBindings,e=this._nActiveBindings=this._nActiveActions=0;e!==b;++e)a[e].reset();for(e=0;e!==d;++e)c[e].useCount=0;return this},update:function(a){a*=this.timeScale;for(var b=
this._actions,c=this._nActiveActions,d=this.time+=a,e=Math.sign(a),f=this._accuIndex^=1,g=0;g!==c;++g){var h=b[g];h.enabled&&h._update(d,a,e,f)}a=this._bindings;b=this._nActiveBindings;for(g=0;g!==b;++g)a[g].apply(f);return this},getRoot:function(){return this._root},uncacheClip:function(a){var b=this._actions;a=a.uuid;var c=this._actionsByClip,d=c[a];if(void 0!==d){for(var d=d.knownActions,e=0,f=d.length;e!==f;++e){var g=d[e];this._deactivateAction(g);var h=g._cacheIndex,l=b[b.length-1];g._cacheIndex=
null;g._byClipCacheIndex=null;l._cacheIndex=h;b[h]=l;b.pop();this._removeInactiveBindingsForAction(g)}delete c[a]}},uncacheRoot:function(a){a=a.uuid;var b=this._actionsByClip,c;for(c in b){var d=b[c].actionByRoot[a];void 0!==d&&(this._deactivateAction(d),this._removeInactiveAction(d))}c=this._bindingsByRootAndName[a];if(void 0!==c)for(var e in c)a=c[e],a.restoreOriginalState(),this._removeInactiveBinding(a)},uncacheAction:function(a,b){var c=this.existingAction(a,b);null!==c&&(this._deactivateAction(c),
this._removeInactiveAction(c))}};Object.assign(cd.prototype,{_bindAction:function(a,b){var c=a._localRoot||this._root,d=a._clip.tracks,e=d.length,f=a._propertyBindings,g=a._interpolants,h=c.uuid,l=this._bindingsByRootAndName,k=l[h];void 0===k&&(k={},l[h]=k);for(l=0;l!==e;++l){var q=d[l],p=q.name,n=k[p];if(void 0===n){n=f[l];if(void 0!==n){null===n._cacheIndex&&(++n.referenceCount,this._addInactiveBinding(n,h,p));continue}n=new Jd(ka.create(c,p,b&&b._propertyBindings[l].binding.parsedPath),q.ValueTypeName,
q.getValueSize());++n.referenceCount;this._addInactiveBinding(n,h,p)}f[l]=n;g[l].resultBuffer=n.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var b=(a._localRoot||this._root).uuid,c=a._clip.uuid,d=this._actionsByClip[c];this._bindAction(a,d&&d.knownActions[0]);this._addInactiveAction(a,c,b)}b=a._propertyBindings;c=0;for(d=b.length;c!==d;++c){var e=b[c];0===e.useCount++&&(this._lendBinding(e),e.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var b=
a._propertyBindings,c=0,d=b.length;c!==d;++c){var e=b[c];0===--e.useCount&&(e.restoreOriginalState(),this._takeBackBinding(e))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[];this._nActiveActions=0;this._actionsByClip={};this._bindings=[];this._nActiveBindings=0;this._bindingsByRootAndName={};this._controlInterpolants=[];this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},
get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){a=a._cacheIndex;return null!==a&&a<this._nactiveactions},_addinactiveaction:function(a,b,c){var 0="==f?(f={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,e[b]=f):(b=f.knownActions,a._byClipCacheIndex=b.length,b.push(a));a._cacheIndex=d.length;d.push(a);" d="this._actions,e=this._actionsByClip,f=e[b];void" f.actionbyroot[c]="a},_removeInactiveAction:function(a){var" b="this._actions,c=b[b.length-1],d=a._cacheIndex;c._cacheIndex=d;b[d]=c;b.pop();a._cacheIndex=null;var" c="a._clip.uuid,d=this._actionsByClip,e=d[c],f=e.knownActions,g=f[f.length-1],h=a._byClipCacheIndex;g._byClipCacheIndex=h;f[h]=g;f.pop();a._byClipCacheIndex=null;delete" e.actionbyroot[(b._localroot||this._root).uuid];0="==f.length&&delete" d[c];this._removeinactivebindingsforaction(a)},_removeinactivebindingsforaction:function(a){a="a._propertyBindings;" for(var="" e);e[c]="a;a._cacheIndex=f.length;f.push(a)},_removeInactiveBinding:function(a){var" f[c];a:{for(var="" h="" in="" f)break="" a;delete="" e[d]}},_lendbinding:function(a){var="" --this._nactivebindings,e="b[d];a._cacheIndex=d;b[d]=a;e._cacheIndex=c;b[c]=e},_lendControlInterpolant:function(){var" a="this._controlInterpolants,b=this._nActiveControlInterpolants++,c=a[b];void" zc(new="" float32array(2),new="" float32array(2),1,this._controlinterpolantsresultbuffer),c.__cacheindex="b,a[b]=c);return" c},_takebackcontrolinterpolant:function(a){var="" b[c]="e},_controlInterpolantsResultBuffer:new" float32array(1)});object.assign(cd.prototype,pa.prototype);kd.prototype.clone="function(){return" new="" kd(void="" c;for(c="" b)this.addattribute(c,b[c].clone());a="a.groups;c=0;for(b=a.length;c<b;c++){var" this};oe.prototype="{constructor:oe,isInterleavedBufferAttribute:!0,get" count(){return="" this.data.count},get="" array(){return="" this.data.array},setx:function(a,b){this.data.array[a*this.data.stride+this.offset]="b;return" this},sety:function(a,b){this.data.array[a*this.data.stride+this.offset+1]="b;return" this},setz:function(a,b){this.data.array[a*this.data.stride+="" this.offset+2]="b;return" this},setw:function(a,b){this.data.array[a*this.data.stride+this.offset+3]="b;return" this},getx:function(a){return="" this.data.array[a*this.data.stride+this.offset]},gety:function(a){return="" this.data.array[a*this.data.stride+this.offset+1]},getz:function(a){return="" this.data.array[a*this.data.stride+this.offset+2]},getw:function(a){return="" this.data.array[a*this.data.stride+this.offset+3]},setxy:function(a,b,c){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+" 1]="c;return" this},setxyz:function(a,b,c,d){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;return" this},setxyzw:function(a,b,c,d,e){a="a*this.data.stride+this.offset;this.data.array[a+0]=b;this.data.array[a+1]=c;this.data.array[a+2]=d;this.data.array[a+3]=e;return" this}};ic.prototype="{constructor:ic,isInterleavedBuffer:!0,set" needsupdate(a){!0="==a&&this.version++},setArray:function(a){if(Array.isArray(a))throw" typeerror("three.bufferattribute:="" array="" should="" be="" typed="" array.");="" this.count="void" 0!="=a?a.length/this.stride:0;this.array=a},setDynamic:function(a){this.dynamic=a;return" this},copy:function(a){this.array="new" a.array.constructor(a.array);this.count="a.count;this.stride=a.stride;this.dynamic=a.dynamic;return" this},copyat:function(a,b,c){a*="this.stride;c*=b.stride;for(var" this},set:function(a,b){void="" this},clone:function(){return(new="" this.constructor).copy(this)},onupload:function(a){this.onuploadcallback="a;return" this}};jc.prototype="Object.create(ic.prototype);jc.prototype.constructor=jc;jc.prototype.isInstancedInterleavedBuffer=!0;jc.prototype.copy=function(a){ic.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this};kc.prototype="Object.create(U.prototype);kc.prototype.constructor=kc;kc.prototype.isInstancedBufferAttribute=!0;kc.prototype.copy=function(a){U.prototype.copy.call(this,a);this.meshPerAttribute=a.meshPerAttribute;return" this};pe.prototype="{constructor:pe,linePrecision:1," set:function(a,b){this.ray.set(a,b)},setfromcamera:function(a,b){b&&b.isperspectivecamera?(this.ray.origin.setfrommatrixposition(b.matrixworld),this.ray.direction.set(a.x,a.y,.5).unproject(b).sub(this.ray.origin).normalize()):b&&b.isorthographiccamera?(this.ray.origin.set(a.x,a.y,(b.near+b.far)="" (b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformdirection(b.matrixworld)):console.error("three.raycaster:="" unsupported="" camera="" type.")},intersectobject:function(a,b){var="" b);c.sort(we);return="" c},intersectobjects:function(a,b){var="" console.warn("three.raycaster.intersectobjects:="" objects="" is="" not="" an="" array."),c;for(var="" c}};re.prototype="{constructor:re,start:function(){this.oldTime=this.startTime=(performance||Date).now();this.elapsedTime=0;this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return" this.elapsedtime},="" getdelta:function(){var="" a}};se.prototype="{constructor:se,set:function(a,b,c){this.radius=a;this.phi=b;this.theta=c;return" this.constructor).copy(this)},copy:function(a){this.radius="a.radius;this.phi=a.phi;this.theta=a.theta;return" this},makesafe:function(){this.phi="Math.max(1E-6,Math.min(Math.PI-1E-6,this.phi));" return="" this},setfromvector3:function(a){this.radius="a.length();0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(N.clamp(a.y/this.radius,-1,1)));return" this}};te.prototype="{constructor:te,set:function(a,b,c){this.radius=a;this.theta=b;this.y=c;return" this.theta="Math.atan2(a.x,a.z);this.y=a.y;return" this}};oa.prototype="Object.create(Aa.prototype);oa.prototype.constructor=oa;oa.prototype.createAnimation=function(a,b,c,d){b={start:b,end:c,length:c-b+1,fps:d,duration:(c-b)/d,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=b;this.animationsList.push(b)};oa.prototype.autoCreateAnimations=function(a){for(var" g;f++){var="" l="h[1];d[l]||(d[l]={start:Infinity,end:-Infinity});h=d[l];f<h.start&&(h.start=f);f">h.end&&(h.end=f);c||(c=l)}}for(l in d)h=d[l],this.createAnimation(l,h.start,h.end,a);this.firstAnimation=c};oa.prototype.setAnimationDirectionForward=function(a){if(a=this.animationsMap[a])a.direction=1,a.directionBackwards=!1};oa.prototype.setAnimationDirectionBackward=function(a){if(a=this.animationsMap[a])a.direction=-1,a.directionBackwards=!0};oa.prototype.setAnimationFPS=
function(a,b){var c=this.animationsMap[a];c&&(c.fps=b,c.duration=(c.end-c.start)/c.fps)};oa.prototype.setAnimationDuration=function(a,b){var c=this.animationsMap[a];c&&(c.duration=b,c.fps=(c.end-c.start)/c.duration)};oa.prototype.setAnimationWeight=function(a,b){var c=this.animationsMap[a];c&&(c.weight=b)};oa.prototype.setAnimationTime=function(a,b){var c=this.animationsMap[a];c&&(c.time=b)};oa.prototype.getAnimationTime=function(a){var b=0;if(a=this.animationsMap[a])b=a.time;return b};oa.prototype.getAnimationDuration=
function(a){var b=-1;if(a=this.animationsMap[a])b=a.duration;return b};oa.prototype.playAnimation=function(a){var b=this.animationsMap[a];b?(b.time=0,b.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")};oa.prototype.stopAnimation=function(a){if(a=this.animationsMap[a])a.active=!1};oa.prototype.update=function(a){for(var b=0,c=this.animationsList.length;b<c;b++){var d="this.animationsList[b];if(d.active){var" e="d.duration/d.length;d.time+=d.direction*a;if(d.mirroredLoop){if(d.time">
d.duration||0>d.time)d.direction*=-1,d.time>d.duration&&(d.time=d.duration,d.directionBackwards=!0),0>d.time&&(d.time=0,d.directionBackwards=!1)}else d.time%=d.duration,0>d.time&&(d.time+=d.duration);var f=d.start+N.clamp(Math.floor(d.time/e),0,d.length-1),g=d.weight;f!==d.currentFrame&&(this.morphTargetInfluences[d.lastFrame]=0,this.morphTargetInfluences[d.currentFrame]=1*g,this.morphTargetInfluences[f]=0,d.lastFrame=d.currentFrame,d.currentFrame=f);e=d.time%e/e;d.directionBackwards&&(e=1-e);d.currentFrame!==
d.lastFrame?(this.morphTargetInfluences[d.currentFrame]=e*g,this.morphTargetInfluences[d.lastFrame]=(1-e)*g):this.morphTargetInfluences[d.currentFrame]=g}}};dd.prototype=Object.create(x.prototype);dd.prototype.constructor=dd;dd.prototype.isImmediateRenderObject=!0;ed.prototype=Object.create(ga.prototype);ed.prototype.constructor=ed;ed.prototype.update=function(){var a=new q,b=new q,c=new ya;return function(){var d=["a","b","c"];this.object.updateMatrixWorld(!0);c.getNormalMatrix(this.object.matrixWorld);
var e=this.object.matrixWorld,f=this.geometry.attributes.position,g=this.object.geometry;if(g&&g.isGeometry)for(var h=g.vertices,l=g.faces,k=g=0,q=l.length;k<q;k++)for(var p="l[k],n=0,u=p.vertexNormals.length;n<u;n++){var" x="p.vertexNormals[n];a.copy(h[p[d[n]]]).applyMatrix4(e);b.copy(x).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);f.setXYZ(g,a.x,a.y,a.z);g+=1;f.setXYZ(g,b.x,b.y,b.z);g+=1}else" if(g&&g.isbuffergeometry)for(d="g.attributes.position,h=g.attributes.normal,n=g=0,u=d.count;n<" u;n++)a.set(d.getx(n),d.gety(n),d.getz(n)).applymatrix4(e),b.set(h.getx(n),h.gety(n),h.getz(n)),b.applymatrix3(c).normalize().multiplyscalar(this.size).add(a),f.setxyz(g,a.x,a.y,a.z),g+="1,f.setXYZ(g,b.x,b.y,b.z),g+=1;f.needsUpdate=!0;return" this}}();lc.prototype="Object.create(x.prototype);lc.prototype.constructor=lc;lc.prototype.dispose=function(){this.cone.geometry.dispose();this.cone.material.dispose()};lc.prototype.update=function(){var" a="new" q,b="new" q;return="" function(){var="" c="this.light.distance?" this.light.distance:1e3,d="c*Math.tan(this.light.angle);this.cone.scale.set(d,d,c);a.setFromMatrixPosition(this.light.matrixWorld);b.setFromMatrixPosition(this.light.target.matrixWorld);this.cone.lookAt(b.sub(a));this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}();mc.prototype=Object.create(ga.prototype);mc.prototype.constructor=mc;mc.prototype.getBoneList=function(a){var" b="[];a&&a.isBone&&b.push(a);for(var" return="" b};mc.prototype.update="function(){var" s,c="new" s;return="" d="this.geometry,e=d.getAttribute("position");c.getInverse(this.root.matrixWorld);for(var" f="0,g=0;f<this.bones.length;f++){var" h="this.bones[f];h.parent&&h.parent.isBone&&(b.multiplyMatrices(c,h.matrixWorld),a.setFromMatrixPosition(b),e.setXYZ(g,a.x,a.y,a.z),b.multiplyMatrices(c,h.parent.matrixWorld),a.setFromMatrixPosition(b),e.setXYZ(g+1,a.x,a.y,a.z),g+=2)}d.getAttribute("position").needsUpdate=!0}}();nc.prototype=" object.create(aa.prototype);nc.prototype.constructor="nc;nc.prototype.dispose=function(){this.geometry.dispose();this.material.dispose()};nc.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)};oc.prototype=Object.create(x.prototype);oc.prototype.constructor=oc;oc.prototype.dispose=function(){this.children[0].geometry.dispose();this.children[0].material.dispose();this.children[1].geometry.dispose();this.children[1].material.dispose()};oc.prototype.update=" e="b.clone().sub(a);c.lookAt(e);d.lookAt(e)}c.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);d.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var" j,c="new" j;return="" c.copy(this.light.groundcolor).multiplyscalar(this.light.intensity);for(var="" q,c="new" ya;return="" function(){this.object.updatematrixworld(!0);="" c.getnormalmatrix(this.object.matrixworld);for(var="" q="f[l],p=q.normal;a.copy(g[q.a]).add(g[q.b]).add(g[q.c]).divideScalar(3).applyMatrix4(d);b.copy(p).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a);e.setXYZ(h,a.x,a.y,a.z);h+=1;e.setXYZ(h,b.x,b.y,b.z);h+=1}e.needsUpdate=!0;return" this}}();qc.prototype="Object.create(x.prototype);qc.prototype.constructor=" qc;qc.prototype.dispose="function(){var" function(){a.setfrommatrixposition(this.light.matrixworld);b.setfrommatrixposition(this.light.target.matrixworld);c.subvectors(b,a);var="" e.scale.z="c.length()}}();hd.prototype=Object.create(ga.prototype);hd.prototype.constructor=hd;hd.prototype.update=function(){function" a(a,g,h,l){d.set(g,h,l).unproject(e);a="c[a];if(void" 0!="=a)for(g=b.getAttribute("position"),h=0,l=a.length;h<l;h++)g.setXYZ(a[h],d.x,d.y,d.z)}var" b,c,d="new" q,e="new" ra;return="" function(){b="this.geometry;c=this.pointMap;e.projectionMatrix.copy(this.camera.projectionMatrix);a("c",0,0,-1);a("t",0,0,1);a("n1",-1,-1,-1);a("n2",1,-1,-1);a("n3",-1,1,-1);a("n4",1,1,-1);a("f1"," -1,-1,1);a("f2",1,-1,1);a("f3",-1,1,1);a("f4",1,1,1);a("u1",.7,1.1,-1);a("u2",-.7,1.1,-1);a("u3",0,2,-1);a("cf1",-1,0,1);a("cf2",1,0,1);a("cf3",0,-1,1);a("cf4",0,1,1);a("cn1",-1,0,-1);a("cn2",1,0,-1);a("cn3",0,-1,-1);a("cn4",0,1,-1);b.getattribute("position").needsupdate="!0}}();rc.prototype=Object.create(ga.prototype);rc.prototype.constructor=rc;rc.prototype.update=function(){var" pa;return="" function(b){b&&b.isbox3?a.copy(b):a.setfromobject(b);if(!a.isempty()){b="a.min;var" md,ue;fb.prototype="Object.create(x.prototype);Fb.prototype.constructor=Fb;Fb.prototype.setDirection=function(){var" q,b;return="" function(c){.99999<c.y?this.quaternion.set(0,0,0,1):-.99999="">c.y?this.quaternion.set(1,
0,0,0):(a.set(c.z,0,-c.x).normalize(),b=Math.acos(c.y),this.quaternion.setFromAxisAngle(a,b))}}();Fb.prototype.setLength=function(a,b,c){void 0===b&&(b=.2*a);void 0===c&&(c=.2*b);this.line.scale.set(1,Math.max(0,a-b),1);this.line.updateMatrix();this.cone.scale.set(c,b,c);this.cone.position.y=a;this.cone.updateMatrix()};Fb.prototype.setColor=function(a){this.line.material.color.copy(a);this.cone.material.color.copy(a)};Nd.prototype=Object.create(ga.prototype);Nd.prototype.constructor=Nd;var Qd=new q,
ye=new ve,ze=new ve,Ae=new ve;va.prototype=Object.create(ua.prototype);va.prototype.constructor=va;va.prototype.getPoint=function(a){var b=this.points,c=b.length;2>c&&console.log("duh, you need at least 2 points");a*=c-(this.closed?0:1);var d=Math.floor(a);a-=d;this.closed?d+=0<d?0:(math.floor(math.abs(d) 0="==this.type||"centripetal"===this.type||"chordal"===this.type){var" b.length)+1)*b.length:0="==a&&d===c-1&&(d=c-2,a=1);var" e,f,g;this.closed||0<d?e="b[(d-1)%c]:(Qd.subVectors(b[0],b[1]).add(b[0]),e=Qd);f=b[d%c];g=b[(d+1)%c];this.closed||d+2<c?b=b[(d+2)%c]:(Qd.subVectors(b[c-" 1],b[c-2]).add(b[c-1]),b="Qd);if(void" h="chordal" =="=this.type?.5:.25,c=Math.pow(e.distanceToSquared(f),h),d=Math.pow(f.distanceToSquared(g),h),h=Math.pow(g.distanceToSquared(b),h);1E-4">d&&(d=1);1E-4>c&&(c=d);1E-4>h&&(h=d);ye.initNonuniformCatmullRom(e.x,f.x,g.x,b.x,c,d,h);ze.initNonuniformCatmullRom(e.y,f.y,g.y,b.y,c,d,h);Ae.initNonuniformCatmullRom(e.z,f.z,g.z,b.z,c,d,h)}else"catmullrom"===this.type&&(c=void 0!==this.tension?this.tension:
.5,ye.initCatmullRom(e.x,f.x,g.x,b.x,c),ze.initCatmullRom(e.y,f.y,g.y,b.y,c),Ae.initCatmullRom(e.z,f.z,g.z,b.z,c));return new q(ye.calc(a),ze.calc(a),Ae.calc(a))};id.prototype=Object.create(ua.prototype);id.prototype.constructor=id;id.prototype.getPoint=function(a){var b=this.v0,c=this.v1,d=this.v2,e=this.v3;return new q(Bb(a,b.x,c.x,d.x,e.x),Bb(a,b.y,c.y,d.y,e.y),Bb(a,b.z,c.z,d.z,e.z))};jd.prototype=Object.create(ua.prototype);jd.prototype.constructor=jd;jd.prototype.getPoint=function(a){var b=this.v0,
c=this.v1,d=this.v2;return new q(Ab(a,b.x,c.x,d.x),Ab(a,b.y,c.y,d.y),Ab(a,b.z,c.z,d.z))};kd.prototype=Object.create(ua.prototype);kd.prototype.constructor=kd;kd.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var b=new q;b.subVectors(this.v2,this.v1);b.multiplyScalar(a);b.add(this.v1);return b};Od.prototype=Object.create(Wa.prototype);Od.prototype.constructor=Od;ua.create=function(a,b){console.log("THREE.Curve.create() has been deprecated");a.prototype=Object.create(ua.prototype);a.prototype.constructor=
a;a.prototype.getPoint=b;return a};Xe.prototype=Object.create(va.prototype);Ye.prototype=Object.create(va.prototype);we.prototype=Object.create(va.prototype);Object.assign(we.prototype,{initFromArray:function(a){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(a){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(a){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});
fd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Object.assign(sc.prototype,{center:function(a){console.warn("THREE.Box2: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box2: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().");
return this.intersectsBox(a)},size:function(a){console.warn("THREE.Box2: .size() has been renamed to .getSize().");return this.getSize(a)}});Object.assign(Pa.prototype,{center:function(a){console.warn("THREE.Box3: .center() has been renamed to .getCenter().");return this.getCenter(a)},empty:function(){console.warn("THREE.Box3: .empty() has been renamed to .isEmpty().");return this.isEmpty()},isIntersectionBox:function(a){console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().");
return this.intersectsBox(a)},isIntersectionSphere:function(a){console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)},size:function(a){console.warn("THREE.Box3: .size() has been renamed to .getSize().");return this.getSize(a)}});hb.prototype.center=function(a){console.warn("THREE.Line3: .center() has been renamed to .getCenter().");return this.getCenter(a)};N.random16=function(){console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead.");
return Math.random()};Object.assign(ya.prototype,{flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},multiplyVector3:function(a){console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToBuffer:function(a,b,c){console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(S.prototype,{extractPosition:function(a){console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().");return this.copyPosition(a)},
flattenToArrayOffset:function(a,b){console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.");return this.toArray(a,b)},getPosition:function(){var a;return function(){void 0===a&&(a=new q);console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");return a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector4:function(a){console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},
rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a,b,c){console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.");return this.applyToBufferAttribute(a)},applyToVector3Array:function(a,b,c){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},
makeFrustum:function(a,b,c,d,e,f){console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.");return this.makePerspective(a,b,d,c,e,f)}});la.prototype.isIntersectionLine=function(a){console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().");return this.intersectsLine(a)};ca.prototype.multiplyVector3=function(a){console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");
return a.applyQuaternion(this)};Object.assign(cb.prototype,{isIntersectionBox:function(a){console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().");return this.intersectsBox(a)},isIntersectionPlane:function(a){console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().");return this.intersectsPlane(a)},isIntersectionSphere:function(a){console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().");return this.intersectsSphere(a)}});
Object.assign(Db.prototype,{extrude:function(a){console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.");return new La(this,a)},makeGeometry:function(a){console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.");return new Yb(this,a)}});Object.assign(D.prototype,{fromAttribute:function(a,b,c){console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)}});Object.assign(q.prototype,
{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");
return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(b,a)},applyProjection:function(a){console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.");return this.applyMatrix4(a)},fromAttribute:function(a,b,c){console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,
b,c)}});Object.assign(fa.prototype,{fromAttribute:function(a,b,c){console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().");return this.fromBufferAttribute(a,b,c)}});T.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(x.prototype,{getChildByName:function(a){console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},
translate:function(a,b){console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.");return this.translateOnAxis(b,a)}});Object.defineProperties(x.prototype,{eulerOrder:{get:function(){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");return this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order.");this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},
set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Ec.prototype,{objects:{get:function(){console.warn("THREE.LOD: .objects has been renamed to .levels.");return this.levels}}});Fa.prototype.setLens=function(a,b){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.");void 0!==b&&(this.filmGauge=b);this.setFocalLength(a)};Object.defineProperties(ma.prototype,
{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov.");this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left.");this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right.");this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top.");
this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.");this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near.");this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far.");this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},
shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias.");this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.");this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.");this.shadow.mapSize.height=a}}});Object.defineProperties(U.prototype,
{length:{get:function(){console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead.");return this.array.length}}});Object.assign(I.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().");this.setIndex(a)},addDrawCall:function(a,b,c){void 0!==c&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.");console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup().");this.addGroup(a,
b)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().");this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(I.prototype,{drawcalls:{get:function(){console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups.");return this.groups}},offsets:{get:function(){console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups.");
return this.groups}}});Object.defineProperties(Kd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.");return this}}});Object.defineProperties(X.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+
": .wrapAround has been removed.")}},wrapRGB:{get:function(){console.warn("THREE."+this.type+": .wrapRGB has been removed.");return new J}}});Object.defineProperties(Ca.prototype,{metal:{get:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.");return!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Ha.prototype,{derivatives:{get:function(){console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");
return this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.");this.extensions.derivatives=a}}});Object.assign(Yd.prototype,{supportsFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' ).");return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' ).");
return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' ).");return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' ).");return this.extensions.get("WEBGL_compressed_texture_s3tc")},
supportsCompressedTexturePVRTC:function(){console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' ).");return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' ).");return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.");
return this.capabilities.vertexTextures},supportsInstancedArrays:function(){console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' ).");return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().");this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},
addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(Yd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.");this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.");
this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.");this.shadowMap.cullFace=a}}});Object.defineProperties(Ke.prototype,{cullFace:{get:function(){return this.renderReverseSided?2:1},set:function(a){a=1!==a;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+a+".");this.renderReverseSided=a}}});Object.defineProperties(Ya.prototype,
{wrapS:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");return this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.");this.texture.wrapS=a}},wrapT:{get:function(){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");return this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.");this.texture.wrapT=a}},magFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");
return this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.");this.texture.magFilter=a}},minFilter:{get:function(){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");return this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.");this.texture.minFilter=a}},anisotropy:{get:function(){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");
return this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.");this.texture.anisotropy=a}},offset:{get:function(){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");return this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset.");this.texture.offset=a}},repeat:{get:function(){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");return this.texture.repeat},
set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat.");this.texture.repeat=a}},format:{get:function(){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");return this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format.");this.texture.format=a}},type:{get:function(){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");return this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type.");
this.texture.type=a}},generateMipmaps:{get:function(){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");return this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.");this.texture.generateMipmaps=a}}});hc.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var b=this;(new ge).load(a,function(a){b.setBuffer(a)});return this};
le.prototype.getData=function(){console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData().");return this.getFrequencyData()};l.WebGLRenderTargetCube=Gb;l.WebGLRenderTarget=Ya;l.WebGLRenderer=Yd;l.ShaderLib=bb;l.UniformsLib=V;l.UniformsUtils=Ja;l.ShaderChunk=Z;l.FogExp2=Kb;l.Fog=Lb;l.Scene=mb;l.LensFlare=Zd;l.Sprite=Dc;l.LOD=Ec;l.SkinnedMesh=qd;l.Skeleton=od;l.Bone=pd;l.Mesh=Aa;l.LineSegments=ga;l.Line=Ua;l.Points=Mb;l.Group=Fc;l.VideoTexture=rd;l.DataTexture=eb;l.CompressedTexture=
Nb;l.CubeTexture=Za;l.CanvasTexture=sd;l.DepthTexture=Gc;l.Texture=ea;l.CompressedTextureLoader=Re;l.DataTextureLoader=ae;l.CubeTextureLoader=be;l.TextureLoader=td;l.ObjectLoader=Se;l.MaterialLoader=Hd;l.BufferGeometryLoader=ce;l.DefaultLoadingManager=ta;l.LoadingManager=$d;l.JSONLoader=de;l.ImageLoader=Yc;l.FontLoader=Ue;l.FileLoader=sa;l.Loader=zb;l.Cache=ld;l.AudioLoader=ge;l.SpotLightShadow=vd;l.SpotLight=wd;l.PointLight=xd;l.RectAreaLight=he;l.HemisphereLight=ud;l.DirectionalLightShadow=yd;l.DirectionalLight=
zd;l.AmbientLight=Ad;l.LightShadow=wb;l.Light=ma;l.StereoCamera=Ve;l.PerspectiveCamera=Fa;l.OrthographicCamera=Jb;l.CubeCamera=Id;l.Camera=ra;l.AudioListener=ie;l.PositionalAudio=ke;l.AudioContext=je;l.AudioAnalyser=le;l.Audio=hc;l.VectorKeyframeTrack=dc;l.StringKeyframeTrack=Ed;l.QuaternionKeyframeTrack=$c;l.NumberKeyframeTrack=ec;l.ColorKeyframeTrack=Gd;l.BooleanKeyframeTrack=Fd;l.PropertyMixer=Jd;l.PropertyBinding=ka;l.KeyframeTrack=yb;l.AnimationUtils=na;l.AnimationObjectGroup=me;l.AnimationMixer=
cd;l.AnimationClip=qa;l.Uniform=Kd;l.InstancedBufferGeometry=Eb;l.BufferGeometry=I;l.GeometryIdCount=function(){return Vd++};l.Geometry=T;l.InterleavedBufferAttribute=oe;l.InstancedInterleavedBuffer=jc;l.InterleavedBuffer=ic;l.InstancedBufferAttribute=kc;l.Face3=ha;l.Object3D=x;l.Raycaster=pe;l.Layers=nd;l.EventDispatcher=pa;l.Clock=re;l.QuaternionLinearInterpolant=Dd;l.LinearInterpolant=Zc;l.DiscreteInterpolant=Cd;l.CubicInterpolant=Bd;l.Interpolant=xa;l.Triangle=za;l.Math=N;l.Spherical=se;l.Cylindrical=
te;l.Plane=la;l.Frustum=tc;l.Sphere=Na;l.Ray=cb;l.Matrix4=S;l.Matrix3=ya;l.Box3=Pa;l.Box2=sc;l.Line3=hb;l.Euler=db;l.Vector4=fa;l.Vector3=q;l.Vector2=D;l.Quaternion=ca;l.Color=J;l.MorphBlendMesh=oa;l.ImmediateRenderObject=dd;l.VertexNormalsHelper=ed;l.SpotLightHelper=lc;l.SkeletonHelper=mc;l.PointLightHelper=nc;l.RectAreaLightHelper=oc;l.HemisphereLightHelper=pc;l.GridHelper=fd;l.PolarGridHelper=Ld;l.FaceNormalsHelper=gd;l.DirectionalLightHelper=qc;l.CameraHelper=hd;l.BoxHelper=rc;l.ArrowHelper=Fb;
l.AxisHelper=Nd;l.CatmullRomCurve3=va;l.CubicBezierCurve3=id;l.QuadraticBezierCurve3=jd;l.LineCurve3=kd;l.ArcCurve=Od;l.EllipseCurve=Wa;l.SplineCurve=Cb;l.CubicBezierCurve=fc;l.QuadraticBezierCurve=gc;l.LineCurve=Ta;l.Shape=Db;l.Path=bd;l.ShapePath=ee;l.Font=fe;l.CurvePath=ad;l.Curve=ua;l.ShapeUtils=Ia;l.SceneUtils={createMultiMaterialObject:function(a,b){for(var c=new Fc,d=0,e=b.length;d</d?0:(math.floor(math.abs(d)></q;k++)for(var></c;b++){var></this._nactiveactions},_addinactiveaction:function(a,b,c){var></a?c:0,this._mixer.dispatchevent({type:"finished",></=a?(e=0,this._setendings(!0,0===this.repetitions,d)):this._setendings(0===this.repetitions,!0,d));if(b></a){b=this._interpolants;for(var></d){var></=d)for(d=0;d!==e;++d)a[b+d]=a[c+d]},_slerp:function(a,b,c,d,e){ca.slerpflat(a,b,a,b,a,c,d)},_lerp:function(a,b,c,d,e){for(var></=a.x&&a.x<=g.x||g.x<=a.x&&a.x<=h.x))return!0}return></g.y||a.y></c;b++)this.lineto(a[b].x,a[b].y)},moveto:function(a,></number.epsilon&&(c=d?0:b);!0!==this.aclockwise||d||(c=c===b?-b:c-b);b=this.astartangle+a*c;a=this.ax+this.xradius*math.cos(b);var></d;c++)b+=this.curves[c].getlength(),a.push(b);return></d[0].dot(g.crossvectors(e[0],e[a]))&&(c=-c),m=1;m<=a;m++)e[m].applymatrix4(h.makerotationaxis(d[m],c*m)),></a&&(a=1);b=this.getpoint(b);return></m)h=d-1;else{h=d;break}d=h;if(c[d]===f)return></g;d+=b)c.skinweights.push(new></z;d++)for(a=a.uvs[d],c.facevertexuvs[d][h]=></d;c+=2){var></f;++g){var></b[e]?d=e:c=e+1;d=b[c];e=b[c-1];if(void></d;)e=c+d></f&&(c=2,e=f);for(f=c-2;;){if(void></e;d++){var></f;e++){var></-number.epsilon?d<-number.epsilon&&(a=!0):math.sign(f)===math.sign(g)&&(a=!0),a?(d=-f,f=math.sqrt(h)):(d=e,e=f,f=math.sqrt(h></c;d++)this.addshape(a[d],b)};la.prototype.addshape=function(a,b){function></h.length;n++){p=h[n];l=-1;for(i=0;i<m.length;i++)if(t=m[i],q=p.x+":"+p.y+":"+t,void></h.length;c++)if(f=c+1,f%=h.length,f=e(a,b,h[c],h[f],!0),0<f.length)return!0;return!1}function></a?0<=e&&0<=b:0<=e||0<=b):0<e}c(a);b.foreach(c);var></=c?[g,h]:[g,m]}function></t||t<p)return[];k=m*l-k*n;if(0<k||k<p)return[]}if(0===k)return!f||0!==t&&t!==p?[a]:[];if(k===p)return!f||0!==t&&t!==p?[b]:[];></p){if(0></c;g++,m++)e[g]=e[m];c--;k=2*c}}return></c;l++)if(w=a[e[l]].x,y=a[e[l]].y,!(w===p&&y===n||w===q&&y===g||w===r&&y===a)&&(d=w-p,h=y-n,z=w-q,j=y-g,w-=r,y-=a,z=k*j-v*z,d=c*h-f*d,h=e*y-x*w,z></=g&&(g=0);h=g+1;c<=h&&(h=0);m=h+1;c<=m&&(m=0);var></ia.area(a))for(h=0;h<c;h++)e[h]=h;else></u;p++){var></l){var></d.near||r></k-1;g+=p)r=b.distancesqtosegment(m[g],m[g+1],l,h),r></d.near||r></g;g+=p)m.fromarray(u,3*g),k.fromarray(u,3*g+3),r=b.distancesqtosegment(m,k,l,h),r></d.near||r></f;e++)d[e].object.visible=!1}}}(),tojson:function(a){a=x.prototype.tojson.call(this,a);a.object.levels=[];for(var></c;b++){var></z;d+=3){if(v=w.getx(d),f=w.getx(d+1),x=w.getx(d+2),c=c(this,q,e,h,l,v,f,x))c.faceindex=math.floor(d></=f;f--)for(e=a[f],this.faces.splice(e,1),c=0,g=this.facevertexuvs.length;c<g;c++)this.facevertexuvs[c].splice(e,1);f=this.vertices.length-b.length;this.vertices=b;return></b.length;m++){b[m].closestpointtopoint(c,!0,d);var></a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return></=c?c:d,b)},intersectsbox:function(){var></d||d!==d)d=g;return></d||d!==d)d=f;0<=g?(e=(a.min.z-h.z)*g,g*=a.max.z-h.z):(e=(a.max.z-h.z)*g,g*=a.min.z-h.z);if(c></=d?(c=(a.min.x-h.x)*d,d*=a.max.x-h.x):(c=(a.max.x-h.x)*d,d*=a.min.x-h.x);0<=f?(e=(a.min.y-h.y)*f,f*=a.max.y-h.y):(e=(a.max.y-h.y)*f,f*=a.min.y-h.y);if(c></=a.radius},distancetoplane:function(a){var></=u?(h=1></n?(d=m*l-k,e=m*k-l,u=h*n,0<=d?e></f.normal.x?c.min.x:c.max.x;b.x=0<f.normal.x?c.max.x:c.min.x;a.y=0<f.normal.y?c.min.y:c.max.y;b.y=0<f.normal.y?c.max.y:c.min.y;a.z=0<f.normal.z?c.min.z:c.max.z;b.z=0<f.normal.z?c.max.z:c.min.z;var></a)return!1;return!0},intersectsbox:function(){var></b},intersectsbox:function(a){return></a||0></f?void></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),a.applymatrix3(this),b.setxyz(c,a.x,a.y,a.z);return></=this.radius*this.radius},distancetopoint:function(a){return></g;f++)e=math.max(e,d.distancetosquared(b[f]));this.radius=math.sqrt(e);return></=b.radius*b.radius}}(),intersectsplane:function(a){var></this.min.z||a.min.z></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getparameter:function(a,></this.min.z||a.z></this.min.y||a.y></c;b++)this.expandbypoint(a[b]);return></m;h++){var></this.alphatest&&(d.alphatest=this.alphatest);!0===this.premultipliedalpha&&(d.premultipliedalpha=this.premultipliedalpha);!0===this.wireframe&&(d.wireframe=this.wireframe);1<this.wireframelinewidth&&(d.wireframelinewidth=this.wireframelinewidth);"round"!==this.wireframelinecap&&(d.wireframelinecap=this.wireframelinecap);"round"!==this.wireframelinejoin&&(d.wireframelinejoin=this.wireframelinejoin);d.skinning=this.skinning;d.morphtargets=this.morphtargets;></this.min.y||a.min.y></=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getparameter:function(a,b){return(b||new></this.min.y||a.y></d?6:0);break;case></a.length&&(c=wf[a],void></2></d&&--d;return></shadowmap_vertex></worldpos_vertex></project_vertex></begin_vertex></shadowmap_pars_vertex></shadowmask_pars_fragment></shadowmap_pars_fragment></lights_pars></bsdfs></packing></common></fog_vertex></shadowmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></begin_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></alphatest_fragment></color_fragment></map_particle_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></shadowmap_pars_fragment></fog_pars_fragment></map_particle_pars_fragment></color_pars_fragment></packing></common></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></displacementmap_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></uv_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></normal_fragment></normal_flip></logdepthbuf_fragment></logdepthbuf_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></uv_pars_fragment></packing></fog_vertex></shadowmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></displacementmap_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></specularmap_pars_fragment></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></aomap_fragment></lights_template></lights_physical_fragment></emissivemap_fragment></normal_fragment></normal_flip></metalnessmap_fragment></roughnessmap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></metalnessmap_pars_fragment></roughnessmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_physical_pars_fragment></lights_pars></cube_uv_reflection_fragment></bsdfs></fog_pars_fragment></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></displacementmap_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></displacementmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></envmap_fragment></aomap_fragment></lights_template></lights_phong_fragment></emissivemap_fragment></normal_fragment></normal_flip></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></normalmap_pars_fragment></bumpmap_pars_fragment></shadowmap_pars_fragment></lights_phong_pars_fragment></lights_pars></bsdfs></fog_pars_fragment></gradientmap_pars_fragment></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></packing></common></fog_vertex></shadowmap_vertex></lights_lambert_vertex></envmap_vertex></worldpos_vertex></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></skinbase_vertex></morphnormal_vertex></beginnormal_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></shadowmap_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></lights_pars></bsdfs></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></envmap_fragment></normal_flip></aomap_fragment></lightmap_fragment></emissivemap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></shadowmask_pars_fragment></shadowmap_pars_fragment></fog_pars_fragment></lights_pars></bsdfs></envmap_pars_fragment></emissivemap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></packing></common></fog_vertex></envmap_vertex></clipping_planes_vertex></worldpos_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></defaultnormal_vertex></skinnormal_vertex></morphnormal_vertex></beginnormal_vertex></skinbase_vertex></color_vertex></uv2_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></fog_pars_vertex></color_pars_vertex></envmap_pars_vertex></uv2_pars_vertex></uv_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></envmap_fragment></normal_flip></aomap_fragment></specularmap_fragment></alphatest_fragment></alphamap_fragment></color_fragment></map_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></specularmap_pars_fragment></fog_pars_fragment></envmap_pars_fragment></lightmap_pars_fragment></aomap_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv2_pars_fragment></uv_pars_fragment></color_pars_fragment></common></fog_vertex></clipping_planes_vertex></logdepthbuf_vertex></color_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></fog_pars_vertex></color_pars_vertex></common></fog_fragment></encodings_fragment></tonemapping_fragment></premultiplied_alpha_fragment></color_fragment></logdepthbuf_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></fog_pars_fragment></color_pars_fragment></common></project_vertex></begin_vertex></common></common></clipping_planes_vertex></worldpos_vertex></project_vertex></skinning_vertex></morphtarget_vertex></begin_vertex></skinbase_vertex></clipping_planes_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></common></clipping_planes_fragment></clipping_planes_pars_fragment></packing></common></clipping_planes_vertex></logdepthbuf_vertex></project_vertex></skinning_vertex></morphtarget_vertex></displacementmap_vertex></begin_vertex></skinbase_vertex></uv_vertex></clipping_planes_pars_vertex></logdepthbuf_pars_vertex></skinning_pars_vertex></morphtarget_pars_vertex></displacementmap_pars_vertex></uv_pars_vertex></common></logdepthbuf_fragment></alphatest_fragment></alphamap_fragment></map_fragment></clipping_planes_fragment></clipping_planes_pars_fragment></logdepthbuf_pars_fragment></alphamap_pars_fragment></map_pars_fragment></uv_pars_fragment></packing></common></project_vertex></begin_vertex></common></common></=></=></a.length;c++){var></d;c++)a.x=b.getx(c),a.y=b.gety(c),a.z=b.getz(c),></=n?1:-1,q=1-n*n;q></=g)return></k?(c=.5></a.y)switch(this.wrapt){case></a.x)switch(this.wraps){case></g.width||2048<g.height?g.todataurl("image></=b)return></=b)return></a?1:+a});void></this.bones.length;g++){var></e;d++)qe(a[d],b,c,!0)}}function></=></=d;p++){var></b.length;h+=3){f(b[h+0],c);f(b[h+1],d);f(b[h+2],g);var></=c;g++){var></f;d++)for(e=0;3></g;++a)for(d=l[a],e=d.start,f=d.count,></f;d++){var></=b&&b<=a.width-d&&0<=c&&c<=a.height-e&&b.readpixels(b,c,d,e,w(m),w(n),f):console.error("three.webglrenderer.readrendertargetpixels:></d;b++)a.teximage2d(c+></q;z++)x=d[z],1023!==b.format&&1022!==b.format?-1<c.getcompressedtextureformats().indexof(w)?c.compressedteximage2d(a.texture_cube_map_positive_x+r,z,w,x.width,x.height,></r.length&&n){for(var></parseint(d);c++)a+=e.replace(></"+c+"></z;o++){var></p;o++){var></d)return></arguments.length&&console.error("three.matrix4:>